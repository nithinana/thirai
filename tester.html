<!DOCTYPE html>
<html lang="en">
<head>

	  <script async src="https://www.googletagmanager.com/gtag/js?id=G-HKV7GQ766F"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-HKV7GQ766F');
</script>
	
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Thirai</title>
    <link rel="manifest" href="/static/manifest.json">
<meta name="theme-color" content="#080808">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ==============================================
           1. CORE VARIABLES & RESET
           ============================================== */
        :root {
    --sidebar-width: 76px;
    --page-pad: 20px;
            --bg-body: #080808;
            --bg-card: #121212;
            --text-main: #ffffff;
            --text-muted: #b3b3b3;
            --accent: #e50914; /* Original Accent (Red) */
            --header-height: 70px;
            --radius: 8px;
        }

        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            padding-bottom: 70px; /* Space for bottom nav */
            overflow-x: hidden; /* Prevent horizontal scroll on body */
        }

        a { text-decoration: none; color: inherit; }
        .visually-hidden { display: none !important; }

/* ==============================================
   2. HEADER (Mobile Focused) - UPDATED FADE
   ============================================== */
.header {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: var(--header-height);
    display: flex;
    align-items: center;
    padding: 0 20px;
    /* Improved Multi-stop Gradient for a smoother transition */
    background: linear-gradient(180deg,
        rgba(0, 0, 0, 0.96) 0%,
        rgba(0, 0, 0, 0.92) 25%,
        rgba(0, 0, 0, 0.65) 55%,
        rgba(0, 0, 0, 0.30) 75%,
        rgba(0, 0, 0, 0.08) 90%,
        rgba(0, 0, 0, 0) 100%
    );
    z-index: 3000;
    border-bottom: none;
    box-shadow: none;
    transition: background 0.4s cubic-bezier(0.4, 0, 0.2, 1), 
                backdrop-filter 0.4s ease;
}

.header.scrolled {
    background: rgba(8, 8, 8, 0.95); /* Matches your body background */
    backdrop-filter: blur(10px);    /* Adds a modern glass effect */
    -webkit-backdrop-filter: blur(10px);
    border-bottom: none;
}
        
/* Updated Header Layout for better mobile scaling */
.header-content {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    width: 100%;
}

/* Equal left/right space keeps the logo perfectly centered */
.back-button-wrapper {
    justify-self: start;
    display: flex;
    align-items: center;
}

.header-right-placeholder {
    justify-self: end;
    display: flex;
    align-items: center;
}

.logo-container {
    justify-self: center;
    display: flex;
    justify-content: center;
}

.logo {
    height: 22px; /* Slightly smaller for mobile */
    cursor: pointer;
    display: block;
}
/* Updated Back Button to not overlap logo */
.back-button {
    position: static; /* Changed from absolute to flow naturally in flexbox */
    color: white;
    font-size: 1.2rem;
    cursor: pointer;
    padding: 5px;
}

        /* ==============================================
           3. HERO SECTION (Starts from the very top)
           ============================================== */
        #view-home { 
            padding-top: 0; /* Important: Allows hero to start at the top */
        }

.hero {
    width: 100%; 
    height: 60vh; 
    max-height: 550px; 
    position: relative; 
    margin-bottom: -50px; /* Changed from 20px to 0 to pull content up */
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: flex-end;
}

.home-content-wrapper {
    padding-top: 5px; /* Reduced from 20px to bring categories closer to banner */
}
        .hero-bg {
            position: absolute; inset: 0; background-size: cover; background-position: top center;
            z-index: 1;
        }
        .hero-overlay {
            position: absolute; inset: 0;
            /* Smoother top edge to avoid a visible seam under the header fade */
            background: linear-gradient(0deg,
                var(--bg-body) 0%,
                rgba(8,8,8,0.55) 55%,
                rgba(8,8,8,0.15) 80%,
                rgba(8,8,8,0) 100%
            );
            z-index: 2;
        }
        .hero-content {
            position: relative; z-index: 3; padding: 0 20px 40px; text-align: center; width: 100%;
        }
        .hero-logo { width: 70%; max-width: 250px; height: auto; margin-bottom: 20px; display: block; margin: 0 auto 20px;}
        
        /* New Watch Now Button Style */
        .btn-play {
            display: inline-flex; align-items: center; gap: 10px;
            background-color: #ffffff; 
            color: #000000; /* Black text */
            padding: 10px 25px;
            border-radius: 4px; font-weight: 700; font-size: 1rem; border: none;
            box-shadow: 0 4px 15px rgba(255, 255, 255, 0.2);
            transition: background 0.2s;
        }
        .btn-play i { color: #000000; } /* Black icon */

        /* Wrapper for home page rows to separate them from hero */
        .home-content-wrapper {
            padding-top: 20px;
        }

        /* Padding for non-home views which start at the top of the viewport */
        .view-padded {
            padding-top: var(--header-height);
        }


        /* ==============================================
           4. FEATURED SLIDESHOW (Custom Carousel)
           ============================================== */
        .featured-header {
            display: flex; align-items: center; justify-content: space-between; padding: 0 20px; margin-top: 20px; margin-bottom: 15px;
        }
        .toggle-switch {
            display: flex; background: #222; border-radius: 20px; padding: 3px; position: relative;
        }
        .toggle-btn {
            padding: 6px 16px; font-size: 0.85rem; font-weight: 600; z-index: 2; cursor: pointer; color: #888; transition: color 0.3s;
        }
        .toggle-btn.active { color: #fff; }
        .toggle-bg {
            position: absolute; top: 3px; left: 3px; width: calc(50% - 3px); height: calc(100% - 6px);
            background: #444; border-radius: 18px; transition: transform 0.3s cubic-bezier(0.25, 1, 0.5, 1); z-index: 1;
        }

        
        

.featured-card img { width: 100%; height: 100%; object-fit: cover; }
        .featured-overlay {
            position: absolute; bottom: 0; left: 0; width: 100%;
            background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
            padding: 40px 20px 20px;
        }
        .featured-name { font-size: 1.5rem; font-weight: 700; text-shadow: 0 2px 4px rgba(0,0,0,0.8); }

        /* Class added by JS to the currently centered slide */
        .featured-card.active-slide {
            transform: scale(1.0);
            opacity: 1.0;
        }


        


        /* ===== Featured carousel: centered highlight + side peeks + desktop arrows ===== */
        .featured-carousel-wrap{
            position: relative;
            width: 100%;
            max-width: 980px;
            margin: 0 auto;
            overflow: hidden; /* crop sides for the "peek" look */
        }
        /* Edge fades (works even if mask-image isn't supported) */
        .featured-carousel-wrap::before,
        .featured-carousel-wrap::after{
            content:"";
            position:absolute;
            top:0; bottom:0;
            width: 110px;
            pointer-events:none;
            z-index: 3;
        }
        .featured-carousel-wrap::before{
            left:0;
            background: linear-gradient(to right, rgba(0,0,0,1), rgba(0,0,0,0));
        }
        .featured-carousel-wrap::after{
            right:0;
            background: linear-gradient(to left, rgba(0,0,0,1), rgba(0,0,0,0));
        }

        .featured-slider{
            --featured-card-w: clamp(160px, 52vw, 340px);
            --featured-gap: 18px;

            display:flex;
            gap: var(--featured-gap);
            overflow-x: scroll;
            scroll-snap-type: x mandatory;
            scroll-behavior: auto;
            scrollbar-width:none;

            /* center the snapped card */
            padding: 0 calc((100% - var(--featured-card-w)) / 2) 16px;
            scroll-padding-left: calc((100% - var(--featured-card-w)) / 2);
            scroll-padding-right: calc((100% - var(--featured-card-w)) / 2);

            /* subtle fade on browsers that support masks */
            mask-image: linear-gradient(to right, transparent 0%, black 14%, black 86%, transparent 100%);
            -webkit-mask-image: linear-gradient(to right, transparent 0%, black 14%, black 86%, transparent 100%);
        }
        .featured-slider::-webkit-scrollbar{ display:none; }

        .featured-card{
            flex: 0 0 var(--featured-card-w);
            max-width: none;
            margin: 0 !important;
            scroll-snap-align: center;
            transform: scale(0.88);
            opacity: 0.55;
        }
        .featured-card.active-slide{
            transform: scale(1.0);
            opacity: 1.0;
        }

        /* Desktop arrows */
        .featured-nav{
            position:absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 4;
            width: 44px;
            height: 44px;
            border-radius: 999px;
            border: 1px solid rgba(255,255,255,0.18);
            background: rgba(20,20,20,0.72);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            color: #fff;
            display: none; /* enabled on desktop */
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.15s ease, background 0.15s ease;
        }
        .featured-nav svg{ width: 22px; height: 22px; }
        .featured-nav:active{ transform: translateY(-50%) scale(0.96); }
        .featured-prev{ left: 10px; }
        .featured-next{ right: 10px; }

        @media (min-width: 900px){
            .featured-nav{ display:flex; }
            .featured-carousel-wrap::before,
            .featured-carousel-wrap::after{ width: 140px; }
            .featured-slider{
                --featured-card-w: 440px; /* one centered, sides peek */
                --featured-gap: 22px;
                scroll-snap-type: x mandatory;
            }
            /* Make side cards feel more "background" on wide screens */
            .featured-card{ transform: scale(0.90); opacity: 0.55; }
            .featured-card.active-slide{ transform: scale(1.02); opacity: 1.0; }
        }

        @media (orientation: landscape) and (max-height: 520px){
            .featured-slider{ --featured-card-w: 360px; }
        }

/* ==============================================
           5. STANDARD ROWS & GRIDS
           ============================================== */
        .section-title { padding: 0 var(--page-pad); margin-bottom: 15px; font-size: 1.1rem; font-weight: 700; margin-top: 30px; color: #fff; }
        
        .row-container {
            display: flex; gap: 10px; overflow-x: auto; padding: 0 var(--page-pad) 20px;
            scroll-behavior: auto; scrollbar-width: none;
        }
        .row-container::-webkit-scrollbar { display: none; }

        .card {
            flex: 0 0 auto; width: 100px; border-radius: var(--radius); overflow: hidden;
            position: relative; background: #1a1a1a; cursor: pointer; aspect-ratio: 2/3;
        
            transition: transform 0.16s ease;
        }
        .card img { width: 100%; height: 100%; object-fit: cover; background: #222; }

        
        .card:hover { transform: scale(1.03); }
.grid-layout {
            /* Adaptive grid (mobile-first): fills the screen while respecting padding + gaps */
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(96px, 1fr));
            gap: 10px;
            padding: 0 20px 30px;
            justify-content: stretch;
        }
        .grid-layout .card { width: 100%; }

        .filter-tabs { display: flex; gap: 10px; padding: 0 20px; margin-bottom: 20px; overflow-x: auto; scrollbar-width: none; }
        .filter-tab {
            padding: 8px 16px; border-radius: 20px; background: #222; color: #aaa; 
            font-size: 0.9rem; white-space: nowrap; cursor: pointer; border: 1px solid #333;
        }
        .filter-tab.active { background: #fff; color: #000; border-color: #fff; font-weight: 600; }

        /* Search Box */
/* Updated Search Controls to prevent button hiding */
.search-area { 
    padding: 0 15px; /* Slightly tighter padding */
    margin-bottom: 20px; 
}

.search-controls { 
    position: relative; 
    width: 100%; 
    display: flex; 
    gap: 8px; /* Tighter gap for small screens */
    align-items: center;
}

.search-input {
    flex: 2;
    min-width: 0;
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.10);
    border-radius: 12px;
    padding: 13px 14px;
    color: #fff;
    font-size: 0.95rem;
    transition: border-color 160ms ease, background 160ms ease;
}
.search-input:focus {
    border-color: rgba(255,255,255,0.18);
    background: rgba(255,255,255,0.08);
}
/* Prevent blue background on autofill/previous prompts */
.search-input:-webkit-autofill,
.search-input:-webkit-autofill:hover, 
.search-input:-webkit-autofill:focus, 
.search-input:-webkit-autofill:active {
    -webkit-box-shadow: 0 0 0 1000px #1c1c1c inset !important;
    -webkit-text-fill-color: white !important;
    transition: background-color 5000s ease-in-out 0s;
}
.lang-select {
    flex: 1;
    max-width: 90px; /* Limits language box width */
    background: #1c1c1c; 
    border: none; 
    color: white; 
    padding: 10px 5px;
    border-radius: 8px; 
    font-size: 0.85rem; 
    text-align: center;
}

.btn-search-trigger {
    flex-shrink: 0; /* IMPORTANT: Prevents the button from shrinking/hiding */
    background: var(--accent); 
    color: white; 
    border: none; 
    border-radius: 8px;
    padding: 12px 15px; 
    font-size: 1rem; 
}
        

        /* Load More Button (Clean circular icon button) */
        .load-more-btn{
            width: 54px;
            height: 54px;
            margin: 18px auto 44px;
            display: grid;
            position: relative;
            place-items: center;
            padding: 0;
            border: 1px solid rgba(255,255,255,0.12);
            background: rgba(255,255,255,0.06);
            color: rgba(255,255,255,0.92);
            border-radius: 50%;
            cursor: pointer;
            transition: transform 140ms ease, background 140ms ease, border-color 140ms ease, opacity 140ms ease;
            box-shadow: 0 10px 24px rgba(0,0,0,0.45);
            -webkit-tap-highlight-color: transparent;
        }
        .load-more-btn i{
            font-size: 1.05rem;
            transition: transform 140ms ease, opacity 140ms ease;
        }
        .load-more-btn:hover{
            transform: translateY(-1px);
            background: rgba(255,255,255,0.09);
            border-color: rgba(255,255,255,0.18);
        }
        .load-more-btn:active{
            transform: translateY(0px) scale(0.98);
        }
        .load-more-btn:disabled{
            cursor: default;
            opacity: 0.65;
        }

        /* Loading animation: rotating arrow + subtle pulse ring */
        .load-more-btn.is-loading i{
            animation: lm-spin 0.85s linear infinite;
            opacity: 0.95;
        }
        .load-more-btn.is-loading::after{
            content:"";
            position:absolute;
            width: 62px;
            height: 62px;
            border-radius: 50%;
            border: 1px solid rgba(255,255,255,0.14);
            animation: lm-pulse 1.1s ease-out infinite;
            pointer-events:none;
        }
        @keyframes lm-spin{ from{ transform: rotate(0deg);} to{ transform: rotate(360deg);} }
        @keyframes lm-pulse{
            0%{ transform: scale(0.92); opacity: 0.0; }
            35%{ opacity: 0.55; }
            100%{ transform: scale(1.12); opacity: 0.0; }
        }


        /* ==============================================
           6. FILTER OVERLAY + RESULTS (Mobile)
           ============================================== */
        #filterOverlay{
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.45);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 18px;
        }
        #filterOverlay.active{ display: flex; }

        .filter-card{
            width: 100%;
            max-width: 460px;
            max-height: 85vh;
            overflow-y: auto;
            background: rgba(18,18,18,0.98);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 22px;
            padding: 18px;
            box-shadow: 0 12px 40px rgba(0,0,0,0.55);
            position: relative;
            color: #fff;
        }
        .filter-card::-webkit-scrollbar{ width: 0; height: 0; }

        .close-popup{
            position: absolute;
            top: 12px;
            right: 12px;
            background: none;
            border: none;
            color: rgba(255,255,255,0.85);
            font-size: 1.6rem;
            cursor: pointer;
            line-height: 1;
            padding: 2px 6px;
        }

        .filter-section-title{
            display: block;
            font-size: 10px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1.2px;
            color: rgba(255,255,255,0.55);
            margin: 10px 0 10px;
        }

        .top-controls{
            margin-bottom: 10px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(255,255,255,0.08);
        }

        .genre-grid{
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 14px;
        }
        .genre-btn{
            font-size: 11px;
            padding: 9px 0;
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.10);
            background: rgba(255,255,255,0.04);
            color: rgba(255,255,255,0.92);
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.12s ease, background 0.12s ease, border-color 0.12s ease;
        }
        .genre-btn:active{ transform: translateY(1px); }
        .genre-btn.active{
            background: rgba(255,255,255,0.16);
            border-color: rgba(255,255,255,0.22);
            color: #fff;
        }

        #filterCustomSection{
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.35s ease;
            border-bottom: 1px solid rgba(255,255,255,0.08);
            margin-bottom: 12px;
        }
        #filterCustomSection.expanded{
            max-height: 1000px;
            padding-bottom: 12px;
        }

        .slider-box{ margin-bottom: 10px; }
        .slider-head{
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 11px;
            margin-bottom: 6px;
            color: rgba(255,255,255,0.85);
        }
        .slider-head b{ color: #fff; font-weight: 900; }

        .any-check{
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 10px;
            font-weight: 800;
            cursor: pointer;
            color: rgba(255,255,255,0.55);
        }
        input[type="range"]{ width: 100%; height: 5px; accent-color: #fff; cursor: pointer; }
        input[type="range"]:disabled{ opacity: 0.18; }

        select, .pg-num{
            width: 100%;
            background: rgba(255,255,255,0.06);
            color: #fff;
            border: 1px solid rgba(255,255,255,0.10);
            border-radius: 12px;
            padding: 10px 12px;
            font-size: 12px;
            outline: none;
        }

        #filterYearExpandSection{
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.35s ease;
        }
        #filterYearExpandSection.expanded{
            max-height: 420px;
            margin-top: 8px;
            padding-top: 10px;
            border-top: 1px solid rgba(255,255,255,0.08);
        }
        .year-grid{
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }
        .year-btn{
            font-size: 10px;
            padding: 8px 0;
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.10);
            background: rgba(255,255,255,0.04);
            color: rgba(255,255,255,0.92);
            cursor: pointer;
            font-weight: 800;
        }
        .year-btn.explore-decade{
            grid-column: span 4;
            background: rgba(255,255,255,0.10);
            border: 1px dashed rgba(255,255,255,0.35);
        }

        .action-controls{
            display: flex;
            gap: 10px;
            margin: 10px 0 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(255,255,255,0.08);
            align-items: flex-end;
        }
        .btn-fetch{
            width: 100%;
            height: 40px;
            background: #ffffff;
            color: #000;
            border: none;
            border-radius: 12px;
            font-weight: 900;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.6px;
            cursor: pointer;
        }

        /* Results cards (full-screen grid view) */
        .result-card{
            background: #121212;
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.06);
            cursor: pointer;
        }
        .result-card img{
            width: 100%;
            aspect-ratio: 2/3;
            object-fit: cover;
            background: #222;
            display: block;
        }
        .result-title{
            padding: 8px 8px 10px;
            font-size: 0.8rem;
            font-weight: 700;
            color: rgba(255,255,255,0.88);
            line-height: 1.2;
            height: 2.6em;
            overflow: hidden;
            text-overflow: ellipsis;
        }



        
        /* Filter results: match grid style (like actor/search grids) */
        .media-card{
            display: flex;
            flex-direction: column;
            gap: 6px;
            cursor: pointer;
        }
        .media-card .card{ width: 100%; }
        .media-title{
            display: none !important;
            padding: 0 2px 2px;
            font-size: 0.8rem;
            font-weight: 700;
            color: rgba(255,255,255,0.86);
            line-height: 1.2;
            height: 2.6em;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Landscape sizing tweaks (posters + spacing) */
        @media (orientation: landscape) and (max-height: 520px){
            .card{ width: 120px; }
            .grid-layout{ grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); }
        }
/* ==============================================
           6. MOBILE BOTTOM NAV
           ============================================== */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; width: 100%; height: 60px;
            display: flex; justify-content: space-around; align-items: center;
            background-color: rgba(10,10,10,0.95); backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255,255,255,0.05); z-index: 200;
        }
.bottom-nav .nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: #666;
    font-size: 0.7rem;
    font-weight: 500;
    /* width: 33%; */ /* REMOVE THIS */
    flex: 1;        /* ADD THIS */
    height: 100%;
}
        .bottom-nav .nav-item.active { color: white; }
        .bottom-nav .nav-item i { font-size: 1.2rem; margin-bottom: 4px; }
        .bottom-nav .nav-item span { display: none !important; }
        .bottom-nav .nav-item i { margin-bottom: 0 !important; }

    /* ==============================================
   7. DESKTOP FRIENDLY LAYOUT (Responsive Enhancements)
   ============================================== */
.page-container {
    width: 100%;
    max-width: 1240px;
    margin: 0 auto;
}


/* Desktop sidebar (hidden on mobile) */
.desktop-sidebar {
    display: none;
}

.desktop-sidebar .side-item {
    appearance: none;
    border: 0;
    background: transparent;
    color: rgba(255,255,255,0.72);
    width: 44px;
    height: 44px;
    border-radius: 14px;
    display: grid;
    place-items: center;
    cursor: pointer;
    transition: background 140ms ease, color 140ms ease, transform 140ms ease;
}
.desktop-sidebar .side-item i { font-size: 1.1rem; }
.desktop-sidebar .side-item:hover { background: rgba(255,255,255,0.06); color: rgba(255,255,255,0.92); }
.desktop-sidebar .side-item:active { transform: translateY(1px); }
.desktop-sidebar .side-item:focus { background: transparent; color: rgba(255,255,255,0.92); }

.desktop-sidebar .side-item.active { color: #fff; background: rgba(255,255,255,0.08); }

/* Desktop header nav (hidden on mobile) */
.desktop-nav {
    display: none;
    align-items: center;
    gap: 10px;
}
.desktop-nav .nav-link {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    border-radius: 10px;
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.08);
    color: rgba(255,255,255,0.85);
    font-weight: 600;
    font-size: 0.9rem;
    cursor: pointer;
    transition: transform 0.12s ease, background 0.12s ease, border-color 0.12s ease;
    user-select: none;
    white-space: nowrap;
}
.desktop-nav .nav-link:hover {
    transform: translateY(-1px);
    background: rgba(255,255,255,0.09);
    border-color: rgba(255,255,255,0.14);
}
.desktop-nav .nav-link.active {
    background: rgba(255,255,255,0.16);
    border-color: rgba(255,255,255,0.18);
    color: #fff;
}

/* Make horizontal rows feel nicer on desktop */
.row-container { scroll-snap-type: x proximity; }
.card { scroll-snap-align: start; }
.card::after{
    display: none;
    content:"";
    position:absolute;
    inset:0;
    background: linear-gradient(90deg,
            rgba(0,0,0,0.92) 0%,
            rgba(0,0,0,0.70) 42%,
            rgba(0,0,0,0.34) 76%,
            rgba(0,0,0,0) 100%
        );
    opacity: 0;
    transition: opacity 0.18s ease;
    pointer-events:none;
}
/* Wider screens */
@media (min-width: 900px) {
    body { padding-bottom: 0; padding-left: var(--sidebar-width); } /* bottom nav hidden on desktop */
    .bottom-nav { display: none; }
    .desktop-sidebar {
        display: flex;
        position: fixed;
        top: 0;
        padding-top: var(--header-height);
        left: 0;
        bottom: 0;
        width: var(--sidebar-width);
        align-items: center;
        justify-content: center; /* center the buttons vertically */
        flex-direction: column;
        gap: 18px;
        /* Smooth black fade (matches attached reference vibe) */
        background: linear-gradient(90deg,
            rgba(0,0,0,0.92) 0%,
            rgba(0,0,0,0.70) 42%,
            rgba(0,0,0,0.34) 76%,
            rgba(0,0,0,0) 100%
        );
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border-right: none;
        z-index: 90;
    }
    .desktop-sidebar::after {
        content: "";
        position: absolute;
        top: 0;
        right: -56px;
        width: 56px;
        height: 100%;
        background: linear-gradient(90deg, rgba(0,0,0,0.78) 0%, rgba(0,0,0,0) 100%);
        pointer-events: none;
    }


    /* Desktop header: same smooth black->transparent fade as mobile */
    .header {
        height: 72px;
        padding: 0 28px;
        /* Multi-stop fade (dark -> transparent) */
        background: linear-gradient(180deg,
        rgba(0, 0, 0, 0.96) 0%,
        rgba(0, 0, 0, 0.92) 25%,
        rgba(0, 0, 0, 0.65) 55%,
        rgba(0, 0, 0, 0.30) 75%,
        rgba(0, 0, 0, 0.08) 90%,
        rgba(0, 0, 0, 0) 100%
    );
    border-bottom: none;
        transition: background 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                    backdrop-filter 0.4s ease,
                    border-bottom-color 0.4s ease;
    }
    .header { left: 0; width: 100%; }

    .header.scrolled {
        background: rgba(8, 8, 8, 0.95);
        backdrop-filter: blur(14px);
        -webkit-backdrop-filter: blur(14px);
        border-bottom: none;
    }

    .header-content {
        max-width: 1240px;
        margin: 0 auto;
        padding-left: var(--sidebar-width);
    }

        /* Centered logo; sidebar handles navigation */
    .logo-container { justify-self: center; }
    .logo { height: 24px; }
    .back-button-wrapper { justify-self: start; }
    .desktop-nav { display: none; }
    .header-right-placeholder { justify-self: end; width: auto; }

    /* Views get centered with comfortable spacing */
    #view-home .home-content-wrapper,
    #view-search,
    #view-collections,
    #view-actor-details,
    #view-filter-results,
    #view-lang-category {
        max-width: 1240px;
        margin: 0 auto;
    }

    /* Give the hero a more premium look on desktop */
    .hero { height: 70vh; max-height: 650px; margin-bottom: -80px; }
    .hero-content { padding: 0 28px 60px; }
    .hero-logo { width: 360px; max-width: 360px; margin-bottom: 22px; }

    /* Bigger cards / better spacing for mouse users */
    .section-title { padding: 0 28px; font-size: 1.2rem; margin-top: 36px; }
    .row-container { padding: 0 28px 26px; gap: 14px; }
    .card { width: 150px; border-radius: 12px; }
    .card:hover { transform: scale(1.03); }

    /* Grid sizes for desktop */
    .grid-layout {
        padding: 0 28px 36px;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 14px;
    }

    /* Search area centered and wider */
    .search-area { padding: 0 28px; }
    .search-controls { max-width: 760px; margin: 0 auto; }
    .search-input { font-size: 0.95rem; padding: 12px 14px; }
    .lang-select { max-width: 110px; }
    .btn-search-trigger { padding: 12px 16px; }

    /* Featured slider feels less cramped */
    .featured-header { padding: 0 28px; margin-top: 24px; }
    .featured-slider { padding: 0 28px 34px; gap: 18px; }
    .featured-card { max-width: 320px; }
}

/* Ultra-wide: keep things from stretching too much */
@media (min-width: 1400px) {
    .section-title { padding: 0 0; }
    .row-container { padding: 0 0 26px; }
    .grid-layout { padding: 0 0 36px; }
    .featured-header { padding: 0 0; }
    .featured-slider { padding: 0 0 34px; }
    .search-area { padding: 0 0; }
}
    
/* Landscape: keep back button above sidebar controls */
@media (orientation: landscape) {
    #back-button{
        position: fixed !important;
        top: 14px;
        left: 14px;
        z-index: 5000;
    }
}

/* ===== Language section arrow (Home) ===== */
.section-title.section-title-row{
  display:flex;
  align-items:center;
  justify-content:flex-start;
  gap:6px;
}
.section-arrow{ pointer-events:auto; 
  border:none;
  background:transparent;
  color:rgba(255,255,255,0.75);
  font-size:1.25rem;
  line-height:1;
  padding:6px 8px; margin-left:6px;
  cursor:pointer;
}
.section-arrow:hover{ color:#fff; }
.section-arrow span{ display:inline-block; transform: translateY(-1px); }

/* ===== Mobile home side padding ===== */
@media (max-width: 700px){
  #view-home .row-container{ padding-left: 24px; padding-right: 24px; }
  #view-home .section-title{ padding-left: 24px; padding-right: 24px; }
}

</style>

<style>
/* Mobile portrait: align row posters with titles + tighten spacing */
@media (max-width: 700px) and (orientation: portrait){

  #view-home .section-title{
    padding-left: 18px !important;
    padding-right: 18px !important;
    margin-top: 16px !important;
    margin-bottom: 8px !important;
  }

  #view-home .row-container{
    padding-left: 18px !important;
    padding-right: 18px !important;
    padding-bottom: 10px !important;
    gap: 8px !important;
  }

  #view-home .home-content-wrapper{
    padding-top: 6px !important;
  }
}
</style>


<style>
/* Mobile portrait: comfortable edge margins + centered titles between rows */
@media (max-width: 700px) and (orientation: portrait){

  #view-home .home-content-wrapper{
    padding-left: 14px !important;
    padding-right: 14px !important;
  }

  #view-home .row-container{
    padding-left: 4px !important;
    padding-right: 4px !important;
    padding-bottom: 14px !important;
    margin-bottom: 6px !important;
    gap: 10px !important;
  }

  #view-home .section-title{
    padding-left: 4px !important;
    padding-right: 4px !important;
    margin-top: 22px !important;
    margin-bottom: 10px !important;
    line-height: 1.2;
  }

  #view-home .section-title:first-of-type{
    margin-top: 12px !important;
  }

}
</style>


<style>
/* Fix Continue Watching title visibility and layering */
#view-home .continue-title,
#view-home .section-title.continue,
#view-home .section-title[data-category="continue"],
#view-home .section-title{
  color: #ffffff !important;
  position: relative !important;
  z-index: 10 !important;
}

/* Ensure sections stack correctly */
#view-home .continue-section{
  position: relative !important;
  z-index: 90 !important;
}

#view-home .row-container{
  position: relative !important;
  z-index: 10 !important;
}

.hero,
.hero-container{
  position: relative !important;
  z-index: 1 !important;
}
</style>


<style>
/* Move Continue Watching and poster rows slightly down from Watch Now button */
#view-home .home-content-wrapper{
  margin-top: 10px !important; /* small downward shift */
}

/* Extra precise adjustment for Continue section */
#view-home .continue-section,
#view-home .section-title:first-of-type{
  margin-top: 14px !important;
}

/* Ensure rows follow the shift naturally */
#view-home .row-container:first-of-type{
  margin-top: 6px !important;
}
</style>


<style id="featured-carousel-overrides">
.featured-carousel,
.featured-track {
  overflow-x: auto !important;
  animation: none !important;
  scroll-behavior: auto !important;
}

.featured-track {
  display: flex !important;
  gap: 24px !important;
}

.featured-card {
  flex: 0 0 340px !important;
  scroll-snap-align: center !important;
}

.featured-card img {
  border-radius: 18px !important;
  display: block;
}

.featured-carousel {
  scroll-snap-type: x mandatory !important;
}

.featured-carousel::-webkit-scrollbar {
  display: none;
}

/* fade edges */
.featured-carousel::before,
.featured-carousel::after {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  width: 80px;
  pointer-events: none;
  z-index: 2;
}

.featured-carousel::before {
  left: 0;
  background: linear-gradient(to right, rgba(0,0,0,0.6), transparent);
}

.featured-carousel::after {
  right: 0;
  background: linear-gradient(to left, rgba(0,0,0,0.6), transparent);
}
</style>


<style id="featured-sizing-responsive">
/* Keep the Featured slider comfortably sized on mobile */
@media (max-width: 600px){
  .featured-slider{
    --featured-card-w: clamp(140px, 62vw, 240px);
    --featured-gap: 12px;
    padding: 0 calc((100% - var(--featured-card-w)) / 2) 10px;
    mask-image: linear-gradient(to right, transparent 0%, black 10%, black 90%, transparent 100%);
    -webkit-mask-image: linear-gradient(to right, transparent 0%, black 10%, black 90%, transparent 100%);
  }
  .featured-card{ transform: scale(0.90); }
  .featured-name{ font-size: 0.95rem; }
  .featured-carousel-wrap{ margin-bottom: 6px; }
  .featured-nav{ width: 36px; height: 36px; }
}

/* Desktop: avoid being cut off; give room for arrows and edge fades */
@media (min-width: 900px){
  .featured-carousel-wrap{
    max-width: 1100px;
    margin-left: auto;
    margin-right: auto;
    padding-left: 54px;  /* space for left arrow */
    padding-right: 54px; /* space for right arrow */
    box-sizing: border-box;
  }
  .featured-slider{
    --featured-card-w: clamp(240px, 26vw, 360px);
    padding: 0 calc((100% - var(--featured-card-w)) / 2) 14px;
  }
}
</style>


<style id="featured-fluid-responsive">
/* Fluid responsive scaling based on viewport width */
.featured-carousel-wrap{
  width: 100%;
  max-width: min(92vw, 1200px);
  margin-left: auto;
  margin-right: auto;
  box-sizing: border-box;
}

/* Card width scales smoothly with screen size */
.featured-slider{
  --featured-card-w: clamp(140px, 28vw, 380px);
  --featured-gap: clamp(10px, 2.2vw, 26px);
  padding-left: calc((100% - var(--featured-card-w)) / 2);
  padding-right: calc((100% - var(--featured-card-w)) / 2);
  padding-bottom: clamp(8px, 1.5vw, 18px);
}

/* Scale the cards proportionally */
.featured-card{
  flex: 0 0 var(--featured-card-w);
}

/* Image scales perfectly inside card */
.featured-card img{
  width: 100%;
  height: auto;
  border-radius: clamp(10px, 1.2vw, 18px);
}

/* Scale text with viewport */
.featured-name{
  font-size: clamp(0.85rem, 1.4vw, 1.15rem);
}

/* Scale arrows proportionally */
.featured-nav{
  width: clamp(32px, 3.5vw, 46px);
  height: clamp(32px, 3.5vw, 46px);
}

/* Ensure no cutoff on very large displays */
@media (min-width: 1400px){
  .featured-carousel-wrap{
    max-width: 1300px;
  }
}

/* Ensure proper fit on very small displays */
@media (max-width: 420px){
  .featured-slider{
    --featured-card-w: clamp(130px, 60vw, 200px);
  }
}
</style>


<style id="featured-mobile-height-fix">
/* Prevent Featured card from becoming overly tall on mobile */
@media (max-width: 600px){
  .featured-card{
    /* keep the whole card from taking over the screen */
    max-height: 56vh;
  }
  .featured-card img{
    /* constrain image height and crop gracefully */
    height: clamp(220px, 50vh, 420px);
    width: 100%;
    object-fit: cover;
    object-position: center top;
  }
  .featured-overlay{
    /* keep name readable but not huge */
    padding: 10px 12px;
  }
  .featured-name{
    font-size: clamp(0.9rem, 4.2vw, 1.05rem);
  }
  /* reduce the extra bottom padding in the slider so it doesn't feel cut off */
  .featured-slider{
    padding-bottom: 8px !important;
  }
}
</style>


<style id="featured-mobile-peek-fix">
@media (max-width: 600px){
  /* Let the carousel span edge-to-edge on mobile */
  .featured-carousel-wrap{
    max-width: 100vw !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
  }

  /* Make the centered card larger, and guarantee a side-peek */
  .featured-slider{
    --featured-card-w: min(78vw, 320px) !important;
    --featured-gap: 14px !important;
    padding-left: calc((100% - var(--featured-card-w)) / 2) !important;
    padding-right: calc((100% - var(--featured-card-w)) / 2) !important;
  }

  /* Slightly stronger side fade so the peek feels intentional */
  .featured-slider{
    mask-image: linear-gradient(to right, transparent 0%, black 12%, black 88%, transparent 100%) !important;
    -webkit-mask-image: linear-gradient(to right, transparent 0%, black 12%, black 88%, transparent 100%) !important;
  }
}
</style>


<style id="featured-no-crop-posters">
@media (max-width: 600px){
  /* Keep poster fully visible (no crop) */
  .featured-card{
    aspect-ratio: 2 / 3;
    max-height: none !important;
  }
  .featured-card img{
    width: 100% !important;
    height: 100% !important;
    object-fit: contain !important;
    object-position: center center !important;
    background: #000; /* letterbox sides if needed */
  }
}
</style>


<style id="featured-mobile-proper-sizing">
@media (max-width: 600px){
  /* Make the Featured area feel like a section, not a full-screen hero */
  .featured-carousel-wrap{
    max-width: 100vw !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
  }

  /* Card width scales with screen; leaves room for side peeks */
  .featured-slider{
    --featured-card-w: clamp(210px, 70vw, 290px) !important;
    --featured-gap: 14px !important;
    padding-left: calc((100% - var(--featured-card-w)) / 2) !important;
    padding-right: calc((100% - var(--featured-card-w)) / 2) !important;
    padding-bottom: 10px !important;
    mask-image: linear-gradient(to right, transparent 0%, black 14%, black 86%, transparent 100%) !important;
    -webkit-mask-image: linear-gradient(to right, transparent 0%, black 14%, black 86%, transparent 100%) !important;
  }

  .featured-card{
    flex: 0 0 var(--featured-card-w) !important;
    /* cap vertical size so it doesn't collide with the bottom nav */
    max-height: 46vh !important;
    transform: scale(0.92) !important;
  }

  /* Keep posters fully visible but not giant: fixed-ish height + contain */
  .featured-card img{
    width: 100% !important;
    height: clamp(220px, 42vh, 320px) !important;
    aspect-ratio: 2 / 3;
    object-fit: contain !important;
    background: #000;
    border-radius: 18px !important;
  }

  .featured-overlay{
    /* Keep label smaller and not blocking the poster */
    padding: 8px 10px !important;
  }
  .featured-name{
    font-size: 0.95rem !important;
    line-height: 1.1;
  }
}
</style>


<style id="featured-mobile-tune-v2">
@media (max-width: 600px){
  /* Slightly larger card for mobile while keeping side peeks */
  .featured-slider{
    --featured-card-w: clamp(230px, 76vw, 320px) !important;
  }

  /* Let height be driven by width (2:3 poster) so it fills naturally */
  .featured-card img{
    height: min(calc(var(--featured-card-w) * 1.5), 52vh) !important;
    object-fit: contain !important;
    background: transparent !important;
  }

  /* Remove extra "boxy" feeling */
  .featured-card{
    max-height: none !important;
    transform: scale(0.94) !important;
  }

  /* Nudge spacing so section feels tighter */
  .featured-slider{
    padding-bottom: 6px !important;
  }
}
</style>


<style id="featured-cleanup">
/* ===== Featured poster styling cleanup ===== */
.featured-card {
  border-radius: 20px;
  overflow: hidden;
}

.featured-card img {
  border-radius: 20px;
  display: block;
}

/* Remove actor name text */
.featured-name {
  display: none !important;
}

/* Remove bottom overlay */
.featured-overlay {
  display: none !important;
}
</style>


<style id="toggle-switch-fix">
/* ===== Toggle switch polish (Actors / Actresses) ===== */
.toggle-switch{
  position: relative;
  display: grid;
  grid-template-columns: 1fr 1fr;
  align-items: stretch;
  padding: 3px;
  border-radius: 999px;
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.10);
  overflow: hidden;
}

.toggle-btn{
  width: 100%;
  text-align: center;
  padding: 8px 0;
  font-size: 0.9rem;
  font-weight: 700;
  color: rgba(255,255,255,0.55);
  border-radius: 999px;
  user-select: none;
}

.toggle-btn.active{
  color: rgba(255,255,255,0.95);
}

.toggle-bg{
  position: absolute;
  top: 3px;
  left: 3px;
  height: calc(100% - 6px);
  width: calc(50% - 0px);
  border-radius: 999px;
  background: rgba(255,255,255,0.16);
  box-shadow: 0 8px 18px rgba(0,0,0,0.35);
  transition: transform 0.28s cubic-bezier(0.25, 1, 0.5, 1);
  z-index: 1;
}

/* ensure labels sit above the sliding pill */
.toggle-btn{ position: relative; z-index: 2; }
</style>


<style id="continue-watching-remove-style">
#continue-watching-row .card{
  position: relative;
}
#continue-watching-row .remove-watch-item{
  position: absolute;
  top: 6px;
  right: 6px;
  width: 22px;
  height: 22px;
  border-radius: 50%;
  border: none;
  background: rgba(0,0,0,0.75);
  color: #fff;
  font-size: 15px;
  font-weight: 700;
  line-height: 22px;
  padding: 0;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 5;
}
#continue-watching-row .remove-watch-item:hover{
  background: rgba(0,0,0,0.95);
}
#continue-watching-row .remove-watch-item:active{
  transform: scale(0.92);
}
</style>


<style id="prevent-flash-fix">
/* Hide embedded home rows until cache JSON load completes */
#view-home .home-content-wrapper{
  visibility:hidden;
}
</style>


<style id="global-loading-overlay-style">
#loadingOverlay {
    position: fixed;
    inset: 0;
    background-color: #080808;
    z-index: 99999;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    opacity: 1;
    transition: opacity 0.5s ease;
}
#loadingOverlay img {
    width: min(220px, 60vw);
    height: auto;
    display: block;
    animation: fade-logo 1.6s ease-in-out infinite;
}
#slowNetworkMessage {
    margin-top: 20px;
    opacity: 0.7;
    font-size: 0.9rem;
}
@keyframes fade-logo {
    0%, 100% { opacity: 0.25; }
    50% { opacity: 1; }
}
</style>


<style id="recent-movies-centering-fix">
/* Recent movies view — add side margins and center grid */
#view-filter-results .grid-layout,
#view-actor-details .grid-layout {
    padding-left: 20px !important;
    padding-right: 20px !important;
    justify-content: center !important;
}

/* Desktop centering */
@media (min-width: 700px){
    #view-filter-results .grid-layout,
    #view-actor-details .grid-layout {
        max-width: 1100px;
        margin-left: auto !important;
        margin-right: auto !important;
    }
}
</style>


<style id="lang-category-centering-fix">
/* Center the "Language • Recent/Popular" view like the other desktop views */
@media (min-width: 900px){
  #view-lang-category{
    max-width: 1240px;
    margin-left: auto;
    margin-right: auto;
  }
}

/* Give the Recent/Popular pills the same side padding as other sections */
#view-lang-category > div[style*="display:flex"]{
  padding-left: var(--page-pad) !important;
  padding-right: var(--page-pad) !important;
}

/* Center the posters grid and avoid huge empty space on wide screens */
#lang-category-grid{
  justify-content: center;
}

@media (min-width: 900px){
  #lang-category-grid{
    max-width: 1240px;
    margin-left: auto;
    margin-right: auto;
    padding-left: 28px !important;
    padding-right: 28px !important;

    /* keep columns a fixed poster width so the whole set can center */
    grid-template-columns: repeat(auto-fit, minmax(150px, 150px)) !important;
    justify-content: center !important;
  }
}
</style>


<style id="home-row-arrows-style">
/* ===== Home language rows: clean left/right arrows ===== */
#view-home .row-wrap{
  position: relative;
}

#view-home .row-wrap .row-nav{
  position: absolute;
  top: 0;
  bottom: 0;
  width: 64px;           /* match fade width */
  height: auto;                    /* full row height */
  border-radius: 0;                /* no circle */
  border: none;
  background: transparent;
  box-shadow: none;
  color: rgba(255,255,255,0.92);
  display: none;                   /* enabled on desktop */
  align-items: center;
  justify-content: flex-start;         /* move arrow closer into fade */
  padding-left:14px;
  cursor: pointer;
  z-index: 40;
  opacity: 0;
  pointer-events: none;
  transition: opacity 140ms ease, transform 140ms ease;
}
#view-home .row-wrap .row-nav svg{ width: 20px; height: 20px; }
#view-home .row-wrap .row-nav:active{ transform: scale(0.98); }
#view-home .row-wrap .row-prev{ left: 0; }
#view-home .row-wrap .row-next{ right: 0; justify-content:flex-end; padding-right:14px; }

/* only show when JS says it's needed */
#view-home .row-wrap .row-nav.is-visible{
  opacity: 1;
  pointer-events: auto;
}

/* side fades removed — arrows only, no gradient fade */

/* Desktop only (avoid covering swipe on mobile) */
@media (min-width: 900px){
  #view-home .row-wrap .row-nav{ display: flex; }
}
</style>


<style id="home-row-fade-conditional">
/* Conditional fades — only show on sides where more content exists */
#view-home .row-wrap::before,
#view-home .row-wrap::after{
  content:"";
  position:absolute;
  top:0;
  bottom:0;
  width:84px;
  pointer-events:none;
  z-index:20;
  opacity:0;
  transition: opacity 140ms ease;
}

/* left fade (show when not at far left) */
#view-home .row-wrap.can-scroll-left::before{
  left:0;
  opacity:1;
  background: linear-gradient(to right, rgba(8,8,8,0.95), rgba(8,8,8,0));
}

/* right fade (show when not at far right) */
#view-home .row-wrap.can-scroll-right::after{
  right:0;
  opacity:1;
  background: linear-gradient(to left, rgba(8,8,8,0.95), rgba(8,8,8,0));
}
</style>


    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>

<style id="watch-party-overlay-style">
/* ==============================================
   WATCH PARTY POPUP (Modal Overlay)
   ============================================== */
#watchPartyOverlay{
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  padding: 18px;
  background: rgba(0,0,0,0.45);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  z-index: 4000;
}
#watchPartyOverlay.active{ display:flex; }

.watchparty-card{
  width: 100%;
  max-width: 460px;
  max-height: 85vh;
  overflow: hidden;
  background: rgba(18,18,18,0.98);
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 22px;
  padding: 18px;
  box-shadow: 0 12px 40px rgba(0,0,0,0.55);
  position: relative;
  color: #fff;
}
.watchparty-card *{ box-sizing: border-box; }
.watchparty-close{
  position:absolute;
  top: 10px;
  right: 12px;
  background: none;
  border: none;
  color: rgba(255,255,255,0.85);
  font-size: 1.7rem;
  cursor: pointer;
  line-height: 1;
  padding: 2px 6px;
}
.watchparty-head{
  display:flex;
  align-items:center;
  gap:10px;
  padding-right: 34px;
  margin-bottom: 14px;
}
.watchparty-head i{
  width: 42px;
  height: 42px;
  border-radius: 14px;
  display:grid;
  place-items:center;
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.10);
}
.watchparty-title{
  font-size: 1.15rem;
  font-weight: 900;
  line-height: 1.1;
}
.watchparty-sub{
  font-size: 0.8rem;
  color: rgba(255,255,255,0.60);
  margin-top: 4px;
}

.wp-code-inputs{
  display:flex;
  justify-content:center;
  gap: 8px;
  margin: 14px 0 14px;
}
.wp-code{
  width: 40px;
  height: 50px;
  text-align:center;
  font-size: 1.35rem;
  font-weight: 900;
  color: #fff;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 12px;
  outline: none;
}
.wp-code:focus{
  border-color: rgba(255,255,255,0.22);
  background: rgba(255,255,255,0.08);
}
.wp-primary{
  width: 100%;
  height: 44px;
  border: none;
  border-radius: 14px;
  background: #ffffff;
  color: #000;
  font-weight: 900;
  letter-spacing: 0.4px;
  cursor: pointer;
}
.wp-primary:disabled{ opacity: 0.5; cursor:not-allowed; }

.wp-loading{
  display:none;
  align-items:center;
  justify-content:center;
  gap: 10px;
  padding: 22px 0 6px;
  color: rgba(255,255,255,0.80);
}
.wp-loading i{
  font-size: 1.4rem;
  animation: wp-spin 1s linear infinite;
}
@keyframes wp-spin{ 100%{ transform: rotate(360deg);} }

.wp-error{
  display:none;
  margin-top: 10px;
  color: #ff6b6b;
  font-size: 0.85rem;
  text-align:center;
}
.wp-lobby{
  display:none;
}
.wp-movie{
  display:flex;
  gap: 12px;
  align-items:center;
  margin-top: 10px;
}
.wp-poster{
  width: 74px;
  height: 110px;
  border-radius: 14px;
  object-fit: cover;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.10);
}
.wp-mtitle{ font-weight: 900; font-size: 1.0rem; }
.wp-mstatus{ color: rgba(255,255,255,0.65); font-size: 0.82rem; margin-top: 4px; }

.wp-users{
  margin-top: 14px;
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 14px;
  padding: 10px;
  max-height: 120px;
  overflow:auto;
}
.wp-user{
  display:flex;
  align-items:center;
  gap:8px;
  padding: 6px 2px;
  font-size: 0.85rem;
  color: rgba(255,255,255,0.90);
}
.wp-user i{ color: rgba(255,255,255,0.70); }
.wp-name{
  width: 100%;
  margin-top: 12px;
  padding: 12px 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.06);
  color: #fff;
  outline: none;
}
.wp-note{
  margin-top: 10px;
  font-size: 0.75rem;
  color: rgba(255,255,255,0.55);
  text-align:center;
  line-height: 1.4;
}
</style>

</head>
<body>

<div id="loadingOverlay">
    <img src="https://thirai.me/static/thiraiwhite.png" alt="Loading...">
    <div id="slowNetworkMessage" style="display:none;">
        <i class="fa fa-info-circle"></i>
        <span>Our server appears to be slow right now, please be patient.</span>
    </div>
</div>


<header class="header" id="main-header">
    <div class="header-content">
        <div class="back-button-wrapper">
            <i class="fas fa-arrow-left back-button visually-hidden" id="back-button" onclick="goBack()"></i>
        </div>

        <div class="logo-container">
            <img src="https://thirai.me/static/thiraiwhite.png" alt="Thirai" class="logo" onclick="switchTab('home')">
        </div>
<div class="header-right-placeholder"></div>
    </div>
</header>

<!-- Desktop Sidebar -->
<aside class="desktop-sidebar" aria-label="Primary">
  <button class="side-item" id="desk-home" onclick="switchTab('home')" aria-label="Home" title="Home">
    <i class="fas fa-home"></i>
  </button>
  <button class="side-item" id="desk-search" onclick="switchTab('search')" aria-label="Search" title="Search">
    <i class="fas fa-search"></i>
  </button>
  <button class="side-item" id="desk-collections" onclick="switchTab('collections')" aria-label="Collections" title="Collections">
    <i class="fas fa-layer-group"></i>
  </button>

    <button class="side-item" id="desk-watchparty" onclick="openWatchPartyPopup()" aria-label="Watch Party" title="Watch Party">
    <i class="fas fa-user-friends"></i>
  </button>

<button class="side-item" id="desk-filter" onclick="toggleFilterPopup()" aria-label="Filter" title="Filter">
    <i class="fas fa-sliders"></i>
  </button>
</aside>


    <div id="view-home">
        <div class="hero">
            <div id="hero-bg" class="hero-bg"></div>
            <div class="hero-overlay"></div>
            <div class="hero-content">
                <div id="hero-logo-container"></div>
                <a id="hero-link" href="#" class="btn-play visually-hidden"><i class="fas fa-play"></i> Watch Now</a>
            </div>
        </div>

        <div class="home-content-wrapper">

            <div class="section-title visually-hidden" id="cw-title">Continue</div>
            <div class="row-container visually-hidden" id="continue-watching-row"></div>

            <div class="section-title section-title-row"><span>Tamil</span><button class="section-arrow" data-lang="tamil" data-category="recent" aria-label="Tamil recent"><span>›</span></button></div>
            <div class="row-container" id="row-tamil"></div>

            <div class="section-title section-title-row"><span>Malayalam</span><button class="section-arrow" data-lang="malayalam" data-category="recent" aria-label="Malayalam recent"><span>›</span></button></div>
            <div class="row-container" id="row-malayalam"></div>
          
            <div class="section-title section-title-row"><span>Hindi</span><button class="section-arrow" data-lang="hindi" data-category="recent" aria-label="Hindi recent"><span>›</span></button></div>
            <div class="row-container" id="row-hindi"></div>

            <div class="section-title section-title-row"><span>Telugu</span><button class="section-arrow" data-lang="telugu" data-category="recent" aria-label="Telugu recent"><span>›</span></button></div>
            <div class="row-container" id="row-telugu"></div>

            <div class="section-title section-title-row"><span>Punjabi</span><button class="section-arrow" data-lang="punjabi" data-category="recent" aria-label="Punjabi recent"><span>›</span></button></div>
            <div class="row-container" id="row-punjabi"></div>

            <div class="section-title section-title-row"><span>Marathi</span><button class="section-arrow" data-lang="marathi" data-category="recent" aria-label="Marathi recent"><span>›</span></button></div>
            <div class="row-container" id="row-marathi"></div>

            <div class="section-title section-title-row"><span>Kannada</span><button class="section-arrow" data-lang="kannada" data-category="recent" aria-label="Kannada recent"><span>›</span></button></div>
            <div class="row-container" id="row-kannada"></div>

            <div class="section-title section-title-row"><span>Bengali</span><button class="section-arrow" data-lang="bengali" data-category="recent" aria-label="Bengali recent"><span>›</span></button></div>
            <div class="row-container" id="row-bengali"></div>

            <div class="section-title visually-hidden" id="tmdb-movies-title">TMDB Movies</div>
            <div class="row-container visually-hidden" id="row-tmdb-movies"></div>

            <div class="section-title visually-hidden" id="tmdb-tv-title">TMDB TV Shows</div>
            <div class="row-container visually-hidden" id="row-tmdb-tv"></div>

        </div>
    </div>

    <div id="view-collections" class="visually-hidden view-padded">
        
        <div class="featured-header">
            <div style="font-size:1.1rem; font-weight:700;">Featured</div>
            <div class="toggle-switch" onclick="toggleFeatured()">
                <div class="toggle-bg" id="feat-toggle-bg"></div>
                <div class="toggle-btn active" id="btn-actors">Actors</div>
                <div class="toggle-btn" id="btn-actresses">Actresses</div>
            </div>
        </div>

        <div class="featured-carousel-wrap" id="featured-carousel-wrap">
            <button class="featured-nav featured-prev" type="button" aria-label="Previous featured" onclick="featuredPrev()">
                <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M15.5 19.5L8 12l7.5-7.5" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </button>

            <div class="featured-slider" id="featured-slider"></div>

            <button class="featured-nav featured-next" type="button" aria-label="Next featured" onclick="featuredNext()">
                <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M8.5 4.5L16 12l-7.5 7.5" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </button>
        </div>

        <div class="section-title">Browse by Language</div>
        <div class="filter-tabs" id="lang-filter-tabs">
            <div class="filter-tab active" data-lang="tamil" onclick="filterGrid('tamil', this)">Tamil</div>
            <div class="filter-tab" data-lang="hindi" onclick="filterGrid('hindi', this)">Hindi</div>
            <div class="filter-tab" data-lang="malayalam" onclick="filterGrid('malayalam', this)">Malayalam</div>
            <div class="filter-tab" data-lang="telugu" onclick="filterGrid('telugu', this)">Telugu</div>
            <div class="filter-tab" data-lang="kannada" onclick="filterGrid('kannada', this)">Kannada</div>
            <div class="filter-tab" data-lang="marathi" onclick="filterGrid('marathi', this)">Marathi</div>
            <div class="filter-tab" data-lang="punjabi" onclick="filterGrid('punjabi', this)">Punjabi</div>
        </div>
        
        <div class="grid-layout" id="grid-actors">
            </div>
    </div>

    <div id="view-search" class="visually-hidden view-padded">
        <div class="search-area">
            <div class="search-controls">
                <input type="text" class="search-input" id="search-input" placeholder="Search movies...">
                <select id="lang-select" class="lang-select">
                    <option value="tamil">Tamil</option>
                    <option value="hindi">Hindi</option>
                    <option value="malayalam">Malayalam</option>
                    <option value="telugu">Telugu</option>
                    <option value="kannada">Kannada</option>
                    <option value="marathi">Marathi</option>
                    <option value="punjabi">Punjabi</option>
                                    <option value="tmdb">TMDB</option>
</select>
                <button class="btn-search-trigger" onclick="doSearch(1, true)">
                    <i class="fas fa-search"></i>
                </button>
            </div>
        </div>
        <div class="grid-layout" id="search-results"></div>
        <button class="load-more-btn visually-hidden" id="load-more-search" onclick="loadMoreSearch()" aria-label="Load more"><i class="fas fa-arrow-rotate-right" aria-hidden="true"></i></button>
    </div>

    <div id="view-actor-details" class="visually-hidden view-padded">
        <div class="section-title" id="actor-details-title" style="margin-top: 0;">Movies</div>
        <div class="grid-layout" id="actor-movies-grid"></div>
        <button class="load-more-btn visually-hidden" id="load-more-actor" onclick="loadNextActorPage()" aria-label="Load more"><i class="fas fa-arrow-rotate-right" aria-hidden="true"></i></button>
    </div>


    <div id="view-filter-results" class="visually-hidden view-padded">
        <div class="section-title" id="filter-results-title" style="margin-top: 0;">Results</div>
        <div class="grid-layout" id="filter-results-grid"></div>
        <button class="load-more-btn visually-hidden" id="load-more-filter" onclick="loadMoreFilterResults()" aria-label="Load more"><i class="fas fa-arrow-rotate-right" aria-hidden="true"></i></button>
        <div id="filter-loading" class="visually-hidden" style="text-align:center; color:#777; padding: 10px 0;">Loading...</div>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('home')" id="btm-home">
            <i class="fas fa-home"></i> <span>Home</span>
        </div>
        <div class="nav-item" onclick="switchTab('collections')" id="btm-collections">
            <i class="fas fa-layer-group"></i> <span>Collections</span>
        </div>

                <div class="nav-item" onclick="openWatchPartyPopup()" id="btm-watchparty">
            <i class="fas fa-user-friends"></i> <span>Watch Party</span>
        </div>

<div class="nav-item" onclick="toggleFilterPopup()" id="btm-filter">
            <i class="fas fa-sliders"></i> <span>Filter</span>
        </div>
<div class="nav-item" onclick="switchTab('search')" id="btm-search">
    <i class="fas fa-search"></i> <span>Search</span>
</div>

<div class="nav-item visually-hidden" id="btm-install">
    <i class="fas fa-download"></i> <span>Install</span>
</div>
        </div>

    </div>

    
    <!-- Watch Party Overlay -->
    <div id="watchPartyOverlay" onclick="closeWatchPartyOnOutsideClick(event)">
      <div class="watchparty-card" role="dialog" aria-modal="true" aria-label="Watch Party">
        <button class="watchparty-close" aria-label="Close" onclick="closeWatchPartyPopup()">&times;</button>

        <div class="watchparty-head">
          <i class="fas fa-user-friends" aria-hidden="true"></i>
          <div>
            <div class="watchparty-title">Watch Party</div>
            <div class="watchparty-sub">Enter a 6‑digit code to join.</div>
          </div>
        </div>

        <!-- Code View -->
        <div id="wpCodeView">
          <div class="wp-code-inputs" aria-label="Party code">
            <input type="text" class="wp-code" maxlength="1" pattern="[A-Z0-9]" inputmode="text" autocomplete="off">
            <input type="text" class="wp-code" maxlength="1" pattern="[A-Z0-9]" inputmode="text" autocomplete="off">
            <input type="text" class="wp-code" maxlength="1" pattern="[A-Z0-9]" inputmode="text" autocomplete="off">
            <input type="text" class="wp-code" maxlength="1" pattern="[A-Z0-9]" inputmode="text" autocomplete="off">
            <input type="text" class="wp-code" maxlength="1" pattern="[A-Z0-9]" inputmode="text" autocomplete="off">
            <input type="text" class="wp-code" maxlength="1" pattern="[A-Z0-9]" inputmode="text" autocomplete="off">
          </div>

          <button class="wp-primary" id="wpCheckBtn" disabled>Search</button>
          <div class="wp-note">Note: Feature not publicly available yet. DM for more info.</div>
          <div class="wp-error" id="wpError">Invalid or expired room code.</div>
        </div>

        <!-- Loading -->
        <div class="wp-loading" id="wpLoading">
          <i class="fas fa-sync-alt" aria-hidden="true"></i>
          <span>Checking room…</span>
        </div>

        <!-- Lobby -->
        <div class="wp-lobby" id="wpLobby">
          <div class="wp-movie">
            <img src="" class="wp-poster" id="wpPoster" alt="">
            <div>
              <div class="wp-mtitle" id="wpTitle">Movie Session</div>
              <div class="wp-mstatus" id="wpStatus"></div>
            </div>
          </div>

          <div class="wp-users" id="wpUserList"></div>

          <input type="text" id="wpNickname" class="wp-name" placeholder="Name" autocomplete="off">
          <button class="wp-primary" id="wpJoinBtn" disabled style="margin-top:12px;">Join</button>
        </div>
      </div>
    </div>


<!-- Filter Overlay -->
    <div id="filterOverlay" onclick="closeFilterOnOutsideClick(event)">
        <div class="filter-card" role="dialog" aria-modal="true" aria-label="Filter movies">
            <button class="close-popup" onclick="toggleFilterPopup()">&times;</button>

            <div class="top-controls">
                <span class="filter-section-title">Language</span>
                <select id="filter-ln">
                    <option value="tamil" selected>Tamil</option>
                    <option value="hindi">Hindi</option>
                    <option value="telugu">Telugu</option>
                    <option value="malayalam">Malayalam</option>
                    <option value="kannada">Kannada</option>
                    <option value="bengali">Bengali</option>
                    <option value="marathi">Marathi</option>
                    <option value="punjabi">Punjabi</option>
                </select>
            </div>

            <span class="filter-section-title">Quick Genres</span>
            <div class="genre-grid">
                <button class="genre-btn" data-attr="action" onclick="toggleFilterGenre(this)">Action</button>
                <button class="genre-btn" data-attr="comedy" onclick="toggleFilterGenre(this)">Comedy</button>
                <button class="genre-btn" data-attr="romance" onclick="toggleFilterGenre(this)">Romance</button>
                <button class="genre-btn" data-attr="storyline" onclick="toggleFilterGenre(this)">Storyline</button>
                <button class="genre-btn" data-attr="performance" onclick="toggleFilterGenre(this)">Performance</button>
                <button class="genre-btn" style="opacity: 0.85" onclick="toggleFilterCustom()">
                    <i class="fas fa-sliders"></i> Custom
                </button>
            </div>

            <div id="filterCustomSection">
                <span class="filter-section-title">Genre Tuning</span>
                <div id="filter-slider-container"></div>

                <div class="slider-box" style="margin-top: 10px;">
                    <div class="slider-head">
                        <span style="font-weight: 800; font-size: 10px; text-transform: uppercase;">Review Count</span>
                    </div>
                    <input type="number" id="filter-ratecount" class="pg-num" value="75" min="0">
                </div>
            </div>

            <div class="action-controls">
                <button class="btn-fetch" onclick="runFilterGo()">Go</button>
            </div>

            <span class="filter-section-title">Release Date</span>
            <div class="genre-grid" style="grid-template-columns: repeat(4, 1fr);">
                <button class="genre-btn decade-selector" onclick="showFilterYears(2020, this)">2020s</button>
                <button class="genre-btn decade-selector" onclick="showFilterYears(2010, this)">2010s</button>
                <button class="genre-btn decade-selector" onclick="showFilterYears(2000, this)">2000s</button>
                <button class="genre-btn decade-selector" onclick="showFilterYears(1990, this)">1990s</button>
                <button class="genre-btn decade-selector" onclick="showFilterYears(1980, this)">1980s</button>
                <button class="genre-btn decade-selector" onclick="showFilterYears(1970, this)">1970s</button>
                <button class="genre-btn decade-selector" onclick="showFilterYears(1960, this)">1960s</button>
                <button class="genre-btn decade-selector" onclick="showFilterYears(1950, this)">1950s</button>
            </div>

            <div id="filterYearExpandSection">
                <div id="filterYearGridContent" class="year-grid"></div>
            </div>
        </div>
    </div>


    <script>
        // ===============================================
        // DATA EMBEDDED FROM UPLOADED JSON FILES
        // ===============================================
        const API_KEY = '926e94b0f70b5bed8417b679652366ab'; // TMDB API Key for movie posters/backdrops
        const TMDB_BASE = 'https://api.themoviedb.org/3';
        const API_BASE = 'https://api.thirai.me';

        // ===============================================
        // FILTER (Year / Decade / Genre) - in-app overlay + full-screen results
        // ===============================================
        const FILTER_PRIMARY_API_URL = API_BASE;
        const FILTER_FALLBACK_API_URL = 'https://backendthirai-test.onrender.com/'; // same fallback as year/decade/genre pages
        let FILTER_API_BASE_URL = FILTER_PRIMARY_API_URL;

        const FILTER_CATEGORIES = ['action', 'comedy', 'romance', 'storyline', 'performance'];

        function toggleFilterPopup() {
            const overlay = document.getElementById('filterOverlay');
            if (!overlay) return;
            overlay.classList.toggle('active');
            filterPopupOpen = overlay.classList.contains('active');
            setFilterActive(filterPopupOpen);
            if (filterPopupOpen) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        }

        function closeFilterOnOutsideClick(event) {
            const overlay = document.getElementById('filterOverlay');
            if (event.target === overlay) toggleFilterPopup();
        }

        function initMobileFilter() {
            const sliderContainer = document.getElementById('filter-slider-container');
            if (!sliderContainer) return;

            sliderContainer.innerHTML = '';
            FILTER_CATEGORIES.forEach(cat => {
                const div = document.createElement('div');
                div.className = 'slider-box';
                div.innerHTML = `
                    <div class="slider-head">
                        <span style="text-transform: capitalize;">${cat}: <b id="filter-v-${cat}">ANY</b></span>
                        <label class="any-check">
                            <input type="checkbox" id="filter-c-${cat}" checked onchange="handleFilterAny('${cat}')"> ANY
                        </label>
                    </div>
                    <input type="range" id="filter-s-${cat}" min="1" max="4" value="4" disabled oninput="updateFilterLabel('${cat}')">
                `;
                sliderContainer.appendChild(div);
                updateFilterLabel(cat);
            });
        }

        function toggleFilterCustom() {
            const customBox = document.getElementById('filterCustomSection');
            const yearBox = document.getElementById('filterYearExpandSection');
            if (yearBox) yearBox.classList.remove('expanded');
            if (customBox) customBox.classList.toggle('expanded');
        }

        function showFilterYears(decade, btn) {
            const yearBox = document.getElementById('filterYearExpandSection');
            const yearContent = document.getElementById('filterYearGridContent');
            const customBox = document.getElementById('filterCustomSection');
            const lang = document.getElementById('filter-ln').value;

            document.querySelectorAll('.decade-selector').forEach(b => b.classList.remove('active'));
            if (btn) btn.classList.add('active');

            if (customBox) customBox.classList.remove('expanded');

            if (yearBox.classList.contains('expanded') && yearBox.dataset.activeDecade == decade) {
                yearBox.classList.remove('expanded');
                if (btn) btn.classList.remove('active');
                return;
            }

            yearContent.innerHTML = '';
            yearBox.dataset.activeDecade = decade;

            const currentYear = new Date().getFullYear();
            for (let i = 0; i <= 9; i++) {
                const year = decade + i;
                if (year > currentYear) break;

                const ybtn = document.createElement('button');
                ybtn.className = 'year-btn';
                ybtn.innerText = year;
                ybtn.onclick = () => {
                    toggleFilterPopup();
                    openYearResults(lang, year);
                };
                yearContent.appendChild(ybtn);
            }

            const exploreBtn = document.createElement('button');
            exploreBtn.className = 'year-btn explore-decade';
            exploreBtn.innerText = `Explore the ${decade}s`;
            exploreBtn.onclick = () => {
                toggleFilterPopup();
                openDecadeResults(lang, decade);
            };
            yearContent.appendChild(exploreBtn);

            yearBox.classList.add('expanded');
        }

        function toggleFilterGenre(btn) {
            const attr = btn.getAttribute('data-attr');
            btn.classList.toggle('active');

            const checkbox = document.getElementById('filter-c-' + attr);
            const slider = document.getElementById('filter-s-' + attr);

            if (btn.classList.contains('active')) {
                checkbox.checked = false;
                slider.disabled = false;
                slider.value = 4;
            } else {
                checkbox.checked = true;
                slider.disabled = true;
            }
            updateFilterLabel(attr);
        }

        function handleFilterAny(id) {
            const s = document.getElementById('filter-s-' + id);
            const check = document.getElementById('filter-c-' + id);
            s.disabled = check.checked;

            const btn = document.querySelector(`.genre-btn[data-attr="${id}"]`);
            if (btn) {
                if (check.checked) btn.classList.remove('active');
                else if (s.value == 4) btn.classList.add('active');
            }
            updateFilterLabel(id);
        }

        function updateFilterLabel(id) {
            const label = document.getElementById('filter-v-' + id);
            if (!label) return;
            const isAny = document.getElementById('filter-c-' + id).checked;
            label.innerText = isAny ? 'ANY' : document.getElementById('filter-s-' + id).value;
        }

        function runFilterGo() {
            const lang = document.getElementById('filter-ln').value;
            const ratecount = document.getElementById('filter-ratecount').value;

            const getVal = (cat) => {
                const isAny = document.getElementById(`filter-c-${cat}`).checked;
                if (isAny) return 0;
                return document.getElementById(`filter-s-${cat}`).value;
            };

            const params = {
                lang,
                action: getVal('action'),
                comedy: getVal('comedy'),
                romance: getVal('romance'),
                storyline: getVal('storyline'),
                performance: getVal('performance'),
                ratecount: ratecount
            };

            toggleFilterPopup();
            openGenreResults(params);
        }

        // ===============================================
        // FILTER RESULTS VIEW (Full screen, back enabled)
        // ===============================================
        let filterState = { mode: '', params: {}, page: 1, hasMore: false, isLoading: false };

        function normalizeBase(base) {
            return (base || '').replace(/\/$/, '');
        }

        function setFilterLoading(isLoading) {
            const loadingEl = document.getElementById('filter-loading');
            if (!loadingEl) return;
            if (isLoading) loadingEl.classList.remove('visually-hidden');
            else loadingEl.classList.add('visually-hidden');
        }

        function renderFilterMovies(movies, append = true) {
            const grid = document.getElementById('filter-results-grid');
            if (!grid) return;

            if (!append) grid.innerHTML = '';

            if (!movies || movies.length === 0) {
                if (!append) {
                    grid.innerHTML = '<p style="color:#777; width:100%; text-align:center; padding: 20px 0;">No movies found.</p>';
                }
                return;
            }

            const baseClean = normalizeBase(FILTER_API_BASE_URL);

            movies.forEach(movie => {
                if (!movie) return;

                const imgUrl = movie.img_url
                    ? (movie.img_url.startsWith('http') ? movie.img_url : baseClean + movie.img_url)
                    : '';

                const wrapper = document.createElement('div');
                wrapper.className = 'media-card';

                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `<img src="${imgUrl}" loading="lazy" alt="${movie.title || ''}">`;

                const title = document.createElement('div');
                title.className = 'media-title';
                title.textContent = movie.title || '';

                wrapper.appendChild(card);
                wrapper.appendChild(title);

                wrapper.onclick = () => {
                    if (movie.page_url) window.location.href = getRedirectUrl(movie.page_url);
                };

                grid.appendChild(wrapper);
            });
        }

        function openYearResults(lang, year) {
            filterState = { mode: 'year', params: { lang, year }, page: 1, hasMore: false, isLoading: false };
            document.getElementById('filter-results-title').textContent = `${lang.charAt(0).toUpperCase() + lang.slice(1)} • ${year}`;
            document.getElementById('filter-results-grid').innerHTML = '';
            document.getElementById('load-more-filter').classList.add('visually-hidden');
            FILTER_API_BASE_URL = FILTER_PRIMARY_API_URL;
            switchTab('filter-results');
            fetchAndRenderFilter(1, false);
        }

        function openDecadeResults(lang, decade) {
            filterState = { mode: 'decade', params: { lang, decade }, page: 1, hasMore: false, isLoading: false };
            document.getElementById('filter-results-title').textContent = `${lang.charAt(0).toUpperCase() + lang.slice(1)} • ${decade}s`;
            document.getElementById('filter-results-grid').innerHTML = '';
            document.getElementById('load-more-filter').classList.add('visually-hidden');
            FILTER_API_BASE_URL = FILTER_PRIMARY_API_URL;
            switchTab('filter-results');
            fetchAndRenderFilter(1, false);
        }

        function openGenreResults(params) {
            filterState = { mode: 'genre', params: params, page: 1, hasMore: false, isLoading: false };
            document.getElementById('filter-results-title').textContent = `${params.lang.charAt(0).toUpperCase() + params.lang.slice(1)} • Genre`;
            document.getElementById('filter-results-grid').innerHTML = '';
            document.getElementById('load-more-filter').classList.add('visually-hidden');
            FILTER_API_BASE_URL = FILTER_PRIMARY_API_URL;
            switchTab('filter-results');
            fetchAndRenderFilter(1, false);
        }

        function buildFilterEndpoint(base, mode, params, page) {
            const b = normalizeBase(base);

            if (mode === 'year') {
                return `${b}/year/${params.lang}/${params.year}?page=${page}`;
            }
            if (mode === 'decade') {
                return `${b}/decade/${params.lang}/${params.decade}?page=${page}`;
            }
            // genre
            return `${b}/genre/${params.lang}?action=${params.action}&comedy=${params.comedy}&romance=${params.romance}&storyline=${params.storyline}&performance=${params.performance}&ratecount=${params.ratecount}&page=${page}`;
        }

        async function fetchAndRenderFilter(startPage, append = true) {
            if (filterState.isLoading) return;
            filterState.isLoading = true;

            const loadMoreBtn = document.getElementById('load-more-filter');
            if (loadMoreBtn) loadMoreBtn.classList.add('visually-hidden');
            setFilterLoading(true);

            try {
                let allMovies = [];
                let hasMore = true;
                const pagesToFetch = 2;

                for (let i = 0; i < pagesToFetch && hasMore; i++) {
                    const pageToFetch = startPage + i;

                    let endpoint = buildFilterEndpoint(FILTER_API_BASE_URL, filterState.mode, filterState.params, pageToFetch);
                    let res;

                    try {
                        res = await fetch(endpoint);

                        if (!res.ok && FILTER_API_BASE_URL === FILTER_PRIMARY_API_URL) {
                            FILTER_API_BASE_URL = FILTER_FALLBACK_API_URL;
                            endpoint = buildFilterEndpoint(FILTER_API_BASE_URL, filterState.mode, filterState.params, pageToFetch);
                            res = await fetch(endpoint);
                        }
                    } catch (fetchErr) {
                        if (FILTER_API_BASE_URL === FILTER_PRIMARY_API_URL) {
                            FILTER_API_BASE_URL = FILTER_FALLBACK_API_URL;
                            endpoint = buildFilterEndpoint(FILTER_API_BASE_URL, filterState.mode, filterState.params, pageToFetch);
                            res = await fetch(endpoint);
                        } else {
                            throw fetchErr;
                        }
                    }

                    if (!res.ok) throw new Error(`HTTP error ${res.status} on page ${pageToFetch}`);
                    const data = await res.json();

                    if (data && data.movies) allMovies.push(...data.movies);
                    hasMore = !!(data && data.has_more);
                }

                renderFilterMovies(allMovies, append);

                filterState.hasMore = hasMore;
                if (hasMore) {
                    filterState.page = startPage + pagesToFetch;
                    if (loadMoreBtn) loadMoreBtn.classList.remove('visually-hidden');
                } else {
                    if (loadMoreBtn) loadMoreBtn.classList.add('visually-hidden');
                }

            } catch (e) {
                console.error('Filter results load failed:', e);
                if (!append) {
                    const grid = document.getElementById('filter-results-grid');
                    if (grid) grid.innerHTML = '<p style="color:#ff6b6b; width:100%; text-align:center; padding: 20px 0;">Failed to load movies.</p>';
                }
            } finally {
                setFilterLoading(false);
                filterState.isLoading = false;
            }
        }


        function loadMoreFilterResults() {
            if (!filterState.hasMore) return;
            fetchAndRenderFilter(filterState.page, true);
        }

        document.addEventListener('DOMContentLoaded', initMobileFilter);


const actorsData = {
  "castData": {
    "featured": {
      "actors": [
        {
          "name": "Vijay",
          "actor_code": "3TKYioHCAF",
          "image_url": "https://sund-images.sunnxt.com/100587/250x375_Vijay_100587_224cc6a7-3c61-4e10-bde1-22dc80d0473b.jpg"
        },
        {
          "name": "Dhanush",
          "actor_code": "5vCobOqDDx",
          "image_url": "https://sund-images.sunnxt.com/101546/250x375_Dhanush_101546_2680c0f6-aa8e-4358-bcfd-a545c794f1f1.jpg"
        },
        {
          "name": "Mohanlal",
          "actor_code": "1Uv6Det8Ej",
          "image_url": "https://sund-images.sunnxt.com/101560/250x375_Mohanlal_101560_4a4618e2-faff-4156-bbfd-723f34346e06.jpg"
        },
        {
          "name": "Mammootty",
          "actor_code": "1WaoBhSG80",
          "image_url": "https://sund-images.sunnxt.com/101561/250x375_Mammootty_101561_0dd71a8d-9e60-4c77-86ef-bb773bc98038.jpg"
        },
        {
          "name": "Vijay Sethupathi",
          "actor_code": "1yADiX9kkO",
          "image_url": "https://sund-images.sunnxt.com/138708/250x375_VijaySethupathi_138708_d8b98537-1c46-4b2d-8d49-6a53594ee332.jpg"
        },
        {
          "name": "Rajinikanth",
          "actor_code": "ijsq87BV3Y",
          "image_url": "https://sund-images.sunnxt.com/94511/250x375_Rajinikanth_94511_1202521b-b7e0-421b-80f2-ac5034a57930.jpg"
        },
        {
          "name": "Karthi Sivakumar",
          "actor_code": "5mHRERsgQU",
          "image_url": "https://sund-images.sunnxt.com/101549/250x375_KarthiSivakumar_101549_dd816cb1-d07d-4190-a025-9f183f1f5075.jpg"
        },
        {
          "name": "Sivakarthikeyan",
          "actor_code": "6ZDHHGuxxN",
          "image_url": "https://sund-images.sunnxt.com/101548/250x375_Sivakarthikeyan_101548_969c4838-4b33-4b19-b2b0-76202e848226.jpg"
        },
        {
          "name": "Suriya",
          "actor_code": "2waH3hTKAe",
          "image_url": "https://sund-images.sunnxt.com/101545/250x375_Surya_101545_27017026-a6bd-43fa-a65d-e7fa86cd0528.jpg"
        },
        {
          "name": "Vikram",
          "actor_code": "5uf7csvvAf",
          "image_url": "https://sund-images.sunnxt.com/101544/250x375_Vikram_101544_d6dcb2fb-330f-4850-b748-d503d5241704.jpg"
        },
        {
          "name": "Ajith Kumar",
          "actor_code": "4pDqQD0LPJ",
          "image_url": "https://sund-images.sunnxt.com/101543/250x375_AjithKumar_101543_2a898516-1e0f-49f3-b570-8c5f4ecd8936.jpg"
        },
        {
          "name": "Fahadh Fassil",
          "actor_code": "5rqK8kvM2U",
          "image_url": "https://sund-images.sunnxt.com/101565/250x375_FahadhFaasil_101565_18dbdffc-4760-419a-a24c-d4280c6fe684.jpg"
        },
        {
          "name": "Kamal Haasan",
          "actor_code": "5Ix02sIDeA",
          "image_url": "https://sund-images.sunnxt.com/101542/250x375_KamalHaasan_101542_13c3f9ea-ae22-4e5f-a49e-c0c709c2128f.jpg"
        },
        {
          "name": "Prithviraj",
          "actor_code": "4n085rJr74",
          "image_url": "https://sund-images.sunnxt.com/101562/250x375_PrithvirajSukumaran_101562_7617b864-4396-476e-83aa-83c27978139a.jpg"
        },
        {
          "name": "Vijayakanth",
          "actor_code": "8huiZv1bPB",
          "image_url": "https://sund-images.sunnxt.com/101714/250x375_Vijayakanth_101714_108c0c0d-c124-43d5-8254-c83cb6a7a943.jpg"
        },
        {
          "name": "Prabhas",
          "actor_code": "7IcT9rmeui",
          "image_url": "https://sund-images.sunnxt.com/101553/250x375_Prabhas_101553_5043283d-4812-4d2e-84e8-43313c1622f6.jpg"
        },
        {
          "name": "Nani",
          "actor_code": "3isSF2aCCr",
          "image_url": "https://sund-images.sunnxt.com/101558/250x375_Nani_101558_bf4ca935-5d41-450d-b3e1-94e4faf5e4a9.jpg"
        },
        {
          "name": "Prabhu",
          "actor_code": "5ycjeOX2Hm",
          "image_url": "https://sund-images.sunnxt.com/101711/250x375_Prabhu_101711_2124675c-d79e-47c5-9ce4-2bdfffdc2a64.jpg"
        }
      ],
      "actresses": [
        {
          "name": "Trisha Krishnan",
          "actor_code": "F1cHse9jWW",
          "image_url": "https://sund-images.sunnxt.com/131408/250x375_TrishaKrishnan_131408_d8af3600-7fdd-4bc0-b723-4be0ced8f2e4.jpg"
        },
        {
          "name": "Samantha",
          "actor_code": "6WfqAcxel5",
          "image_url": "https://sund-images.sunnxt.com/131409/250x375_Samantha_131409_65c2f409-f020-4360-969a-b9f741232ccf.jpg"
        },
        {
          "name": "Nayanthara",
          "actor_code": "7tFt1Le1Ep",
          "image_url": "https://sund-images.sunnxt.com/131441/250x375_Nayanthara_131441_76f534d9-19d3-4a02-a01a-03669dcd21c1.jpg"
        },
        {
          "name": "Pooja Hegde",
          "actor_code": "14CoLSwEXV",
          "image_url": "https://sund-images.sunnxt.com/138711/250x375_PoojaHegde_138711_b484d386-2c3d-408b-89db-88177887ab8a.jpg"
        },
        {
          "name": "Nithya Menen",
          "actor_code": "3AQ1iONzZQ",
          "image_url": "https://sund-images.sunnxt.com/131443/250x375_NithyaMenen_131443_db5be06a-7a6a-4b30-80b4-380506464b56.jpg"
        },
        {
          "name": "Anushka Shetty",
          "actor_code": "2ldhTbiGgU",
          "image_url": "https://sund-images.sunnxt.com/131445/250x375_AnushkaShetty_131445_df5b5e1e-50c3-4559-a946-1cb9ab77202e.jpg"
        },
        {
          "name": "Hansika Motwani",
          "actor_code": "3FGflYSCcj",
          "image_url": "https://sund-images.sunnxt.com/131424/250x375_HansikaMotwani_131424_d6c17c92-d0b1-4600-b353-45c2c47d53fd.jpg"
        },
        {
          "name": "Kajal Aggarwal",
          "actor_code": "7GLAgNWiq2",
          "image_url": "https://sund-images.sunnxt.com/131426/250x375_KajalAggarwal_131426_0ca0896b-bdef-4833-9dec-770e035b149c.jpg"
        },
        {
          "name": "Shruti Haasan",
          "actor_code": "7fCylLNfVi",
          "image_url": "https://sund-images.sunnxt.com/131431/250x375_ShrutiHaasan_131431_78778c01-540b-4576-a883-699ec7224571.jpg"
        },
        {
          "name": "Priyamani",
          "actor_code": "1mh1dheOZR",
          "image_url": "https://sund-images.sunnxt.com/131415/250x375_Priyamani_131415_7a92265f-5432-4e9e-a38c-46e2200c522c.jpg"
        },
        {
          "name": "Simran",
          "actor_code": "33rNUL3JZx",
          "image_url": "https://sund-images.sunnxt.com/131407/250x375_Simran_131407_a9b95132-9205-420d-9f5f-9e6a8bba22e0.jpg"
        },
        {
          "name": "Aishwarya Rajesh",
          "actor_code": "CeT6162PqU",
          "image_url": "https://sund-images.sunnxt.com/131411/250x375_AishwaryaRajesh_131411_c7758ce1-6327-41b1-bd5c-7f84ac947bf3.jpg"
        }
      ]
    },
    "tmdb": {
      "actors": [
        {
          "name": "Vijay",
          "tmdb_id": "91547",
          "actor_code": "3TKYioHCAF",
          "language": "tamil"
        },
        {
          "name": "Dhanush",
          "tmdb_id": "550165",
          "actor_code": "5vCobOqDDx",
          "language": "tamil"
        },
        {
          "name": "Kamal Haasan",
          "tmdb_id": "93193",
          "actor_code": "5Ix02sIDeA",
          "language": "tamil"
        },
        {
          "name": "Vijay Sethupathi",
          "tmdb_id": "1123766",
          "actor_code": "1yADiX9kkO",
          "language": "tamil"
        },
        {
          "name": "Rajinikanth",
          "tmdb_id": "91555",
          "actor_code": "ijsq87BV3Y",
          "language": "tamil"
        },
		{ "name": "Vikranth", 
		 "tmdb_id": "585382", 
		 "actor_code": "66ELwNVOVM", 
		"language": "tamil" },
        { "name": "Ashok Selvan", "tmdb_id": "1187398", "actor_code": "73Gxhzkkjf", "language": "tamil" },
        {
          "name": "Karthi Sivakumar",
          "tmdb_id": "123066",
          "actor_code": "5mHRERsgQU",
          "language": "tamil"
        },
        {
          "name": "Sivakarthikeyan",
          "tmdb_id": "587982",
          "actor_code": "6ZDHHGuxxN",
          "language": "tamil"
        },
        {
          "name": "Vishal",
          "tmdb_id": "559892",
          "actor_code": "1emttPrIgB",
          "language": "tamil"
        },
        {
          "name": "Suriya",
          "tmdb_id": "85720",
          "actor_code": "2waH3hTKAe",
          "language": "tamil"
        },
        {
          "name": "Vikram",
          "tmdb_id": "93191",
          "actor_code": "5uf7csvvAf",
          "language": "tamil"
        },
        {
          "name": "Ajith Kumar",
          "tmdb_id": "148360",
          "actor_code": "4pDqQD0LPJ",
          "language": "tamil"
        },
        {
          "name": "Vadivelu",
          "tmdb_id": "91549",
          "actor_code": "1cSST4zk4I",
          "language": "tamil"
        },
        {
          "name": "Yogi Babu",
          "tmdb_id": "1540764",
          "actor_code": "H9Fx9P1JxP",
          "language": "tamil"
        },
        {
          "name": "Jayam Ravi",
          "tmdb_id": "237966",
          "actor_code": "5neYQbiTqu",
          "language": "tamil"
        },
        {
          "name": "Arya",
          "tmdb_id": "130109",
          "actor_code": "33DEfO2wRC",
          "language": "tamil"
        },
        {
          "name": "Madhavan",
          "tmdb_id": "85519",
          "actor_code": "3vxJO7cuw1",
          "language": "tamil"
        },
        {
          "name": "STR",
          "tmdb_id": "222760",
          "actor_code": "2Qv5lafKhY",
          "language": "tamil"
        },
        {
          "name": "Siddharth",
          "tmdb_id": "108216",
          "actor_code": "69EME6TPQE",
          "language": "tamil"
        },
        {
          "name": "Soori",
          "tmdb_id": "544897",
          "actor_code": "523IeICZKh",
          "language": "tamil"
        },
        {
          "name": "Pradeep Ranganathan",
          "tmdb_id": "2274937",
          "actor_code": "19A9Wxsiru",
          "language": "tamil"
        },
        {
          "name": "M. G. Ramachandran",
          "tmdb_id": "584602",
          "actor_code": "8L6px81Vzd",
          "language": "tamil"
        },
        {
          "name": "Vijayakanth",
          "tmdb_id": "237635",
          "actor_code": "8huiZv1bPB",
          "language": "tamil"
        },
        {
          "name": "Prabhu",
          "tmdb_id": "85722",
          "actor_code": "5ycjeOX2Hm",
          "language": "tamil"
        },
        {
          "name": "Shah Rukh Khan",
          "tmdb_id": "35742",
          "actor_code": "b4tCNsNP3r",
          "language": "hindi"
        },
        {
          "name": "Ranbir Kapoor",
          "tmdb_id": "85034",
          "actor_code": "2cKAcgtako",
          "language": "hindi"
        },
        {
          "name": "Salman Khan",
          "tmdb_id": "42802",
          "actor_code": "73t49Zpm8Z",
          "language": "hindi"
        },
        {
          "name": "Sidharth Malhotra",
          "tmdb_id": "1108117",
          "actor_code": "2ZZHmp8rm2",
          "language": "hindi"
        },
        {
          "name": "Amitabh Bachchan",
          "tmdb_id": "35780",
          "actor_code": "2z1RmIZxHh",
          "language": "hindi"
        },
        {
          "name": "Hrithik Roshan",
          "tmdb_id": "78749",
          "actor_code": "pQrb67ZvoX",
          "language": "hindi"
        },
        {
          "name": "Aamir Khan",
          "tmdb_id": "52763",
          "actor_code": "7wg7uK17Bg",
          "language": "hindi"
        },
        {
          "name": "Mohanlal",
          "tmdb_id": "82732",
          "actor_code": "1Uv6Det8Ej",
          "language": "malayalam"
        },
        {
          "name": "Mammootty",
          "tmdb_id": "124111",
          "actor_code": "1WaoBhSG80",
          "language": "malayalam"
        },
        {
          "name": "Fahadh Fassil",
          "tmdb_id": "1072750",
          "actor_code": "5rqK8kvM2U",
          "language": "malayalam"
        },
        {
          "name": "Prithviraj",
          "tmdb_id": "117690",
          "actor_code": "4n085rJr74",
          "language": "malayalam"
        },
        {
          "name": "Prabhas",
          "tmdb_id": "237045",
          "actor_code": "7IcT9rmeui",
          "language": "telugu"
        },
        {
          "name": "Allu Arjun",
          "tmdb_id": "108215",
          "actor_code": "7ug2FmruQr",
          "language": "telugu"
        },
        {
          "name": "Nani",
          "tmdb_id": "225387",
          "actor_code": "3isSF2aCCr",
          "language": "telugu"
        }
      ],
      "actresses": [
        {
          "name": "Trisha Krishnan",
          "tmdb_id": "116925",
          "actor_code": "F1cHse9jWW",
          "language": "tamil"
        },
        {
          "name": "Samantha",
          "tmdb_id": "225312",
          "actor_code": "6WfqAcxel5",
          "language": "tamil"
        },
        {
          "name": "Asin",
          "tmdb_id": "81092",
          "actor_code": "F06ZXPJGJh",
          "language": "tamil"
        },
        {
          "name": "Nayanthara",
          "tmdb_id": "91548",
          "actor_code": "7tFt1Le1Ep",
          "language": "tamil"
        },
        {
          "name": "Pooja Hegde",
          "tmdb_id": "587753",
          "actor_code": "14CoLSwEXV",
          "language": "tamil"
        },
        {
          "name": "Alia Bhatt",
          "tmdb_id": "1108120",
          "actor_code": "4LJUx3vqDc",
          "language": "hindi"
        },
        {
          "name": "Nithya Menen",
          "tmdb_id": "225388",
          "actor_code": "3AQ1iONzZQ",
          "language": "tamil"
        },
        {
          "name": "Rashmika Mandanna",
          "tmdb_id": "1752056",
          "actor_code": "7wtbAiXAuP",
          "language": "tamil"
        },
        {
          "name": "Anushka Shetty",
          "tmdb_id": "88167",
          "actor_code": "2ldhTbiGgU",
          "language": "tamil"
        },
        {
          "name": "Hansika Motwani",
          "tmdb_id": "237967",
          "actor_code": "3FGflYSCcj",
          "language": "tamil"
        },
        {
          "name": "Kajal Aggarwal",
          "tmdb_id": "55061",
          "actor_code": "7GLAgNWiq2",
          "language": "hindi"
        },
        {
          "name": "Shruti Haasan",
          "tmdb_id": "85883",
          "actor_code": "7fCylLNfVi",
          "language": "tamil"
        },
        {
          "name": "Deepika Padukone",
          "tmdb_id": "53975",
          "actor_code": "7Iwku12HLv",
          "language": "hindi"
        },
        {
          "name": "Kareena Kapoor",
          "tmdb_id": "37233",
          "actor_code": "6cC1dMrY40",
          "language": "hindi"
        },
        {
          "name": "Priyamani",
          "tmdb_id": "1107197",
          "actor_code": "1mh1dheOZR",
          "language": "tamil"
        },
        {
          "name": "Simran",
          "tmdb_id": "141705",
          "actor_code": "33rNUL3JZx",
          "language": "tamil"
        },
        {
          "name": "Aishwarya Rajesh",
          "tmdb_id": "1114583",
          "actor_code": "CeT6162PqU",
          "language": "tamil"
        }
      ]
    }
  }
};
const tamilData = {
  "category": "popular",
  "language": "tamil",
  "has_more": true,
  "movies": [
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2223-7856.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2223/?lang=tamil",
      "title": "Raja Rani"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2786-70f7.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2786/?lang=tamil",
      "title": "Thani Oruvan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2937-2069.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2937/?lang=tamil",
      "title": "Theri"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1671-52bd.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1671/?lang=tamil",
      "title": "Soodhu Kavvuum"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2639-bcaf.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2639/?lang=tamil",
      "title": "O Kadhal Kanmani"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1561-9d7a.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1561/?lang=tamil",
      "title": "Vishwaroopam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2536-1777.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2536/?lang=tamil",
      "title": "Kaththi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/3QoX-3033.jpg",
      "page_url": "https://einthusan.tv/movie/watch/3QoX/?lang=tamil",
      "title": "Mersal"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2909-173a.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2909/?lang=tamil",
      "title": "Thozha"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/559E-7360.jpg",
      "page_url": "https://einthusan.tv/movie/watch/559E/?lang=tamil",
      "title": "Sarkar"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1692-e04a.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1692/?lang=tamil",
      "title": "Singam 2 (Tamil)"
    },
	{
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1usm-3175.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1usm/?lang=tamil",
      "title": "Varisu"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1ueW-6c85.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1ueW/?lang=tamil",
      "title": "Beast Tamil"
    },
	{
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/6yMk-0d0b.jpg",
      "page_url": "https://einthusan.tv/movie/watch/6yMk/?lang=tamil",
      "title": "Idly Kadai"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/5i4m-929c.jpg",
      "page_url": "https://einthusan.tv/movie/watch/5i4m/?lang=tamil",
      "title": "Kuberaa"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/4mtx-da28.jpg",
      "page_url": "https://einthusan.tv/movie/watch/4mtx/?lang=tamil",
      "title": "Nilavuku Enmel Ennadi Kobam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/4l4Y-eb9b.jpg",
      "page_url": "https://einthusan.tv/movie/watch/4l4Y/?lang=tamil",
      "title": "Raayan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/4JAA-33ac.jpg",
      "page_url": "https://einthusan.tv/movie/watch/4JAA/?lang=tamil",
      "title": "Captain Miller"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1qP8-5b09.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1qP8/?lang=tamil",
      "title": "Vaathi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/5h4y-29b5.jpg",
      "page_url": "https://einthusan.tv/movie/watch/5h4y/?lang=tamil",
      "title": "Naane Varuven"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/66ih-e021.jpg",
      "page_url": "https://einthusan.tv/movie/watch/66ih/?lang=tamil",
      "title": "Thiruchitrambalam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/eUzB-0a95.jpg",
      "page_url": "https://einthusan.tv/movie/watch/eUzB/?lang=tamil",
      "title": "Maaran"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/5Orl-e1dd.jpg",
      "page_url": "https://einthusan.tv/movie/watch/5Orl/?lang=tamil",
      "title": "Atrangi Re"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/3ULz-bf58.jpg",
      "page_url": "https://einthusan.tv/movie/watch/3ULz/?lang=tamil",
      "title": "Jagame Thandhiram"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/6c7h-5dc0.jpg",
      "page_url": "https://einthusan.tv/movie/watch/6c7h/?lang=tamil",
      "title": "Karnan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/27KY-a82b.jpg",
      "page_url": "https://einthusan.tv/movie/watch/27KY/?lang=tamil",
      "title": "Pattas"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/6bNK-ef58.jpg",
      "page_url": "https://einthusan.tv/movie/watch/6bNK/?lang=tamil",
      "title": "Asuran"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/ZHGp-6038.jpg",
      "page_url": "https://einthusan.tv/movie/watch/ZHGp/?lang=tamil",
      "title": "Maari 2"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/3KSd-9f84.jpg",
      "page_url": "https://einthusan.tv/movie/watch/3KSd/?lang=tamil",
      "title": "Vada Chennai"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/4STi-2862.jpg",
      "page_url": "https://einthusan.tv/movie/watch/4STi/?lang=tamil",
      "title": "Velaiilla Pattadhari 2"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/4V8X-8b73.jpg",
      "page_url": "https://einthusan.tv/movie/watch/4V8X/?lang=tamil",
      "title": "Pa Paandi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/6nFG-a02f.jpg",
      "page_url": "https://einthusan.tv/movie/watch/6nFG/?lang=tamil",
      "title": "Kodi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/9074-a4f7.jpg",
      "page_url": "https://einthusan.tv/movie/watch/9074/?lang=tamil",
      "title": "Thodari"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2990-082a.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2990/?lang=tamil",
      "title": "Amma Kanakku"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2876-1ab0.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2876/?lang=tamil",
      "title": "Visaaranai"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2835-b06a.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2835/?lang=tamil",
      "title": "Thanga Magan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2756-b451.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2756/?lang=tamil",
      "title": "Naanum Rowdy Dhaan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2712-587f.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2712/?lang=tamil",
      "title": "Maari"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2659-6814.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2659/?lang=tamil",
      "title": "Kakka Muttai"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2605-4f75.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2605/?lang=tamil",
      "title": "Kaaki Sattai"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2595-b314.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2595/?lang=tamil",
      "title": "Anegan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2526-ec92.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2526/?lang=tamil",
      "title": "Velaiyilla Pattathari"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/4QKP-c039.jpg",
      "page_url": "https://einthusan.tv/movie/watch/4QKP/?lang=tamil",
      "title": "Naiyaandi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1694-3629.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1694/?lang=tamil",
      "title": "Maryan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1691-ce80.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1691/?lang=tamil",
      "title": "Ambikapathy"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1670-4be4.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1670/?lang=tamil",
      "title": "Ethir Neechal"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0753-ffcc.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0753/?lang=tamil",
      "title": "3 - Moonu"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0607-6139.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0607/?lang=tamil",
      "title": "Mayakkam Enna"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0305-bf1f.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0305/?lang=tamil",
      "title": "Venghai"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0185-7252.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0185/?lang=tamil",
      "title": "Mappillai"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0218-d922.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0218/?lang=tamil",
      "title": "Seedan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2526-ec92.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2526/?lang=tamil",
      "title": "Velaiyilla Pattathari"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2xQm-8702.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2xQm/?lang=tamil",
      "title": "Thalaivaa"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0600-a683.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0600/?lang=tamil",
      "title": "Velayudham"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0118-7cec.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0118/?lang=tamil",
      "title": "Kanthaswamy"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0028-2607.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0028/?lang=tamil",
      "title": "Silambattam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/4bRV-6e9b.jpg",
      "page_url": "https://einthusan.tv/movie/watch/4bRV/?lang=tamil",
      "title": "Madharaasi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1kTx-7208.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1kTx/?lang=tamil",
      "title": "Amaran"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1rwz-72bc.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1rwz/?lang=tamil",
      "title": "Kottukkaali"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/6i18-c3b0.jpg",
      "page_url": "https://einthusan.tv/movie/watch/6i18/?lang=tamil",
      "title": "Ayalaan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/7C8l-ee60.jpg",
      "page_url": "https://einthusan.tv/movie/watch/7C8l/?lang=tamil",
      "title": "Maaveeran"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/4gpM-c6cf.jpg",
      "page_url": "https://einthusan.tv/movie/watch/4gpM/?lang=tamil",
      "title": "Don Tamil"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/sa3L-c583",
      "page_url": "https://einthusan.tv/movie/watch/sa3L/?lang=tamil",
      "title": "Doctor"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/5mU6-e0da.jpg",
      "page_url": "https://einthusan.tv/movie/watch/5mU6/?lang=tamil",
      "title": "Hero"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/3CnU-5b06.jpg",
      "page_url": "https://einthusan.tv/movie/watch/3CnU/?lang=tamil",
      "title": "Namma Veettu Pillai"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1v4r-a593.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1v4r/?lang=tamil",
      "title": "Mr. Local"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/6FmL-391d.jpg",
      "page_url": "https://einthusan.tv/movie/watch/6FmL/?lang=tamil",
      "title": "Seema Raja"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/5Hzc-5ac9.jpg",
      "page_url": "https://einthusan.tv/movie/watch/5Hzc/?lang=tamil",
      "title": "Velaikkaran"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/9073-ae89.jpg",
      "page_url": "https://einthusan.tv/movie/watch/9073/?lang=tamil",
      "title": "Remo"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2842-5551.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2842/?lang=tamil",
      "title": "Rajini Murugan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2605-4f75.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2605/?lang=tamil",
      "title": "Kaaki Sattai"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2566-6815.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2566/?lang=tamil",
      "title": "Vennila Veedu"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2538-6316.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2538/?lang=tamil",
      "title": "Maan Karate"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1670-4be4.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1670/?lang=tamil",
      "title": "Ethir Neechal"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/3d52-3c00.jpg",
      "page_url": "https://einthusan.tv/movie/watch/3d52/?lang=tamil",
      "title": "Coolie"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/5goY-2e08.jpg",
      "page_url": "https://einthusan.tv/movie/watch/5goY/?lang=tamil",
      "title": "Vettaiyan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/34ku-bc3b.jpg",
      "page_url": "https://einthusan.tv/movie/watch/34ku/?lang=tamil",
      "title": "Lal Salaam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/6E5G-70df.jpg",
      "page_url": "https://einthusan.tv/movie/watch/6E5G/?lang=tamil",
      "title": "Jailer"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2aFb-26be",
      "page_url": "https://einthusan.tv/movie/watch/2aFb/?lang=tamil",
      "title": "Annaatthe"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/7uqZ-572c.jpg",
      "page_url": "https://einthusan.tv/movie/watch/7uqZ/?lang=tamil",
      "title": "Darbar"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1ne5-e0a5.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1ne5/?lang=tamil",
      "title": "Petta"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/4M74-fc98.jpg",
      "page_url": "https://einthusan.tv/movie/watch/4M74/?lang=tamil",
      "title": "Kaala"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/9038-47b7.jpg",
      "page_url": "https://einthusan.tv/movie/watch/9038/?lang=tamil",
      "title": "Kabali"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2571-e5de.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2571/?lang=tamil",
      "title": "Lingaa"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2441-7198.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2441/?lang=tamil",
      "title": "Kochadaiiyaan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0044-e725.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0044/?lang=tamil",
      "title": "Enthiran"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0177-9631.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0177/?lang=tamil",
      "title": "Kuselan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0111-50f7.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0111/?lang=tamil",
      "title": "Sivaji"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0055-2313.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0055/?lang=tamil",
      "title": "Chandramukhi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0140-dc7c.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0140/?lang=tamil",
      "title": "Baba"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0019-92cf.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0019/?lang=tamil",
      "title": "Padayappa"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0241-304b.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0241/?lang=tamil",
      "title": "Arunachalam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0018-9626.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0018/?lang=tamil",
      "title": "Muthu"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0192-c510.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0192/?lang=tamil",
      "title": "Baasha"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0228-28f1.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0228/?lang=tamil",
      "title": "Veera"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0316-efda.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0316/?lang=tamil",
      "title": "Ulaipali"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0083-c2f4.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0083/?lang=tamil",
      "title": "Yejaman"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0410-d68c.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0410/?lang=tamil",
      "title": "Pandiyan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0011-0b3c.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0011/?lang=tamil",
      "title": "Annamalai"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0279-3fd1.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0279/?lang=tamil",
      "title": "Mannan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0310-29cc.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0310/?lang=tamil",
      "title": "Thalapathi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0428-6c3a.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0428/?lang=tamil",
      "title": "Nattukku Oru Nallavan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0250-9c06.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0250/?lang=tamil",
      "title": "Dharma Durai"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/3jpM-ce71.jpg",
      "page_url": "https://einthusan.tv/movie/watch/3jpM/?lang=tamil",
      "title": "Arasan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0429-f02a.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0429/?lang=tamil",
      "title": "Panakkaran"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/37n4-9298.jpg",
      "page_url": "https://einthusan.tv/movie/watch/37n4/?lang=tamil",
      "title": "Thug Life"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1kTx-7208.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1kTx/?lang=tamil",
      "title": "Amaran"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1nJq-2cff.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1nJq/?lang=tamil",
      "title": "Indian 2"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1S86-022d.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1S86/?lang=tamil",
      "title": "Kalki 2898-AD"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/4UPi-d097.jpg",
      "page_url": "https://einthusan.tv/movie/watch/4UPi/?lang=tamil",
      "title": "Vikram"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2MsW-e582.gif",
      "page_url": "https://einthusan.tv/movie/watch/2MsW/?lang=tamil",
      "title": "Kadaram Kondan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/73g7-8b67.jpg",
      "page_url": "https://einthusan.tv/movie/watch/73g7/?lang=tamil",
      "title": "Vishwaroopam II"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2774-e895.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2774/?lang=tamil",
      "title": "Thoongaa Vanam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2691-b910.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2691/?lang=tamil",
      "title": "Papanasam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2649-3dde.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2649/?lang=tamil",
      "title": "Uttama Villain"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1561-9d7a.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1561/?lang=tamil",
      "title": "Vishwaroopam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0604-cd67.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0604/?lang=tamil",
      "title": "Anbulla Kamal"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0126-d882.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0126/?lang=tamil",
      "title": "Manmadan Ambu"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0050-83a9.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0050/?lang=tamil",
      "title": "Unnaipol Oruvan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0056-d1ba.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0056/?lang=tamil",
      "title": "Dasavathaaram"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0081-eab8.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0081/?lang=tamil",
      "title": "Vettaiyaadu Vilaiyaadu"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0146-291c.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0146/?lang=tamil",
      "title": "Mumbai Express"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0129-5f5a.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0129/?lang=tamil",
      "title": "Vasool Raja MBBS"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0099-68a5.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0099/?lang=tamil",
      "title": "Virumaandi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1116-cda8.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1116/?lang=tamil",
      "title": "Nala Damayanthi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0120-64a2.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0120/?lang=tamil",
      "title": "Anbe Sivam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0080-6c23.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0080/?lang=tamil",
      "title": "Panchathantiram"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0164-845e.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0164/?lang=tamil",
      "title": "Pammal K. Sambandam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0235-23e5.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0235/?lang=tamil",
      "title": "Aalavandhan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0073-9872.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0073/?lang=tamil",
      "title": "Thenali"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0257-1371.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0257/?lang=tamil",
      "title": "Hey Ram"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0262-5e78.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0262/?lang=tamil",
      "title": "Kaathala Kaathala"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0090-84f9.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0090/?lang=tamil",
      "title": "Avvai Shanmughi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0066-3c78.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0066/?lang=tamil",
      "title": "Indian"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0270-e524.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0270/?lang=tamil",
      "title": "Kuruthipunal"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0275-7053.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0275/?lang=tamil",
      "title": "Mahanadi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0116-33ac.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0116/?lang=tamil",
      "title": "Aadukalam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0271-3984.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0271/?lang=tamil",
      "title": "Kutty"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0224-381a.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0224/?lang=tamil",
      "title": "Uthama Puthiran"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0127-2125.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0127/?lang=tamil",
      "title": "Padikathavan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0038-c215.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0038/?lang=tamil",
      "title": "Yaaradi Nee Mohini"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0293-ff1b.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0293/?lang=tamil",
      "title": "Parattai Engira Azhagu Sundaram"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0138-67c1.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0138/?lang=tamil",
      "title": "Thiruvilaiyaadal Aarambam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1063-ce17.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1063/?lang=tamil",
      "title": "Pudhupettai"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0052-95bf.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0052/?lang=tamil",
      "title": "Adhu Oru Kana Kaalam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0012-8cbe.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0012/?lang=tamil",
      "title": "Devathayai Kanden"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0020-1eea.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0020/?lang=tamil",
      "title": "Puthu Kotaiyilirinthu Sarvanan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0035-af38.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0035/?lang=tamil",
      "title": "Thiruda Thirudi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2V1b-6e01.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2V1b/?lang=tamil",
      "title": "Thulluvadho Ilamai"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/3gi4-77c9.jpg",
      "page_url": "https://einthusan.tv/movie/watch/3gi4/?lang=tamil",
      "title": "Master Tamil"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/274k-a3c0.jpg",
      "page_url": "https://einthusan.tv/movie/watch/274k/?lang=tamil",
      "title": "Bigil"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/559E-7360.jpg",
      "page_url": "https://einthusan.tv/movie/watch/559E/?lang=tamil",
      "title": "Sarkar"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/3QoX-3033.jpg",
      "page_url": "https://einthusan.tv/movie/watch/3QoX/?lang=tamil",
      "title": "Mersal"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/7Hgm-a330.jpg",
      "page_url": "https://einthusan.tv/movie/watch/7Hgm/?lang=tamil",
      "title": "Bairavaa"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2937-2069.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2937/?lang=tamil",
      "title": "Theri"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2772-3adf.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2772/?lang=tamil",
      "title": "Puli"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2536-1777.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2536/?lang=tamil",
      "title": "Kaththi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2279-926e.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2279/?lang=tamil",
      "title": "Jilla"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2xQm-8702.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2xQm/?lang=tamil",
      "title": "Thalaivaa"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1327-224f.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1327/?lang=tamil",
      "title": "Thuppakki"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0614-3009.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0614/?lang=tamil",
      "title": "Nanban"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0600-a683.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0600/?lang=tamil",
      "title": "Velayudham"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0031-1622.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0031/?lang=tamil",
      "title": "Kavalan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0342-0325.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0342/?lang=tamil",
      "title": "Sura"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0327-8a54.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0327/?lang=tamil",
      "title": "Villu"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0325-c537.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0325/?lang=tamil",
      "title": "Vettaikaaran"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0047-d2dd.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0047/?lang=tamil",
      "title": "Kuruvi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0064-cc50.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0064/?lang=tamil",
      "title": "Azhagiya Tamil Magan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0089-0a3d.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0089/?lang=tamil",
      "title": "Pokkiri"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0100-c075.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0100/?lang=tamil",
      "title": "Aathi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0112-1d98.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0112/?lang=tamil",
      "title": "Sivakasi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0308-3c9e.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0308/?lang=tamil",
      "title": "Sukran"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0022-771a.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0022/?lang=tamil",
      "title": "Sachein"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0128-0284.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0128/?lang=tamil",
      "title": "Thirupaachi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0125-827e.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0125/?lang=tamil",
      "title": "Madurey"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0079-ff6f.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0079/?lang=tamil",
      "title": "Ghilli"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0055-2313.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0055/?lang=tamil",
      "title": "Chandramukhi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1334-d824.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1334/?lang=tamil",
      "title": "Naduvula Konjam Pakkatha Kaanom"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/ZHGp-6038.jpg",
      "page_url": "https://einthusan.tv/movie/watch/ZHGp/?lang=tamil",
      "title": "Maari 2"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2605-4f75.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2605/?lang=tamil",
      "title": "Kaaki Sattai"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0037-d004.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0037/?lang=tamil",
      "title": "Singam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2Fbx-1ce4.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2Fbx/?lang=tamil",
      "title": "96"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2588-9858.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2588/?lang=tamil",
      "title": "Yennai Arindhaal"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2609-74c1.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2609/?lang=tamil",
      "title": "Aambala"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/BCPE-25e8.jpg",
      "page_url": "https://einthusan.tv/movie/watch/BCPE/?lang=tamil",
      "title": "Viswasam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/4UPi-d097.jpg",
      "page_url": "https://einthusan.tv/movie/watch/4UPi/?lang=tamil",
      "title": "Vikram"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2659-6814.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2659/?lang=tamil",
      "title": "Kakka Muttai"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2712-587f.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2712/?lang=tamil",
      "title": "Maari"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2756-b451.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2756/?lang=tamil",
      "title": "Naanum Rowdy Dhaan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1678-3f1c.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1678/?lang=tamil",
      "title": "Neram"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2aTX-5620.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2aTX/?lang=tamil",
      "title": "Ratsasan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0111-50f7.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0111/?lang=tamil",
      "title": "Sivaji"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2562-fb25.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2562/?lang=tamil",
      "title": "Poojai"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/7Hgm-a330.jpg",
      "page_url": "https://einthusan.tv/movie/watch/7Hgm/?lang=tamil",
      "title": "Bairavaa"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1ne5-e0a5.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1ne5/?lang=tamil",
      "title": "Petta"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/66ih-e021.jpg",
      "page_url": "https://einthusan.tv/movie/watch/66ih/?lang=tamil",
      "title": "Thiruchitrambalam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0044-e725.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0044/?lang=tamil",
      "title": "Enthiran"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/9038-47b7.jpg",
      "page_url": "https://einthusan.tv/movie/watch/9038/?lang=tamil",
      "title": "Kabali"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1331-d111.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1331/?lang=tamil",
      "title": "Neethaane En Ponvasantham"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/6BU0-8a3a.jpg",
      "page_url": "https://einthusan.tv/movie/watch/6BU0/?lang=tamil",
      "title": "Baahubali 2: The Conclusion"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1694-3629.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1694/?lang=tamil",
      "title": "Maryan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2741-8470.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2741/?lang=tamil",
      "title": "Baahubali: The Beginning (Tamil)"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2214-2f58.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2214/?lang=tamil",
      "title": "Varuthapadatha Valibar Sangam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2254-6bec.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2254/?lang=tamil",
      "title": "Arrambam"
    },
	    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2691-b910.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2691/?lang=tamil",
      "title": "Papanasam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0089-0a3d.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0089/?lang=tamil",
      "title": "Pokkiri"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1670-4be4.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1670/?lang=tamil",
      "title": "Ethir Neechal"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2221-90c4.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2221/?lang=tamil",
      "title": "Moodar Koodam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2571-e5de.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2571/?lang=tamil",
      "title": "Lingaa"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2842-5551.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2842/?lang=tamil",
      "title": "Rajini Murugan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0579-7111.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0579/?lang=tamil",
      "title": "Mankatha"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/9073-ae89.jpg",
      "page_url": "https://einthusan.tv/movie/watch/9073/?lang=tamil",
      "title": "Remo"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2785-b4f3.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2785/?lang=tamil",
      "title": "Vedalam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1usm-3175.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1usm/?lang=tamil",
      "title": "Varisu"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1699-2316.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1699/?lang=tamil",
      "title": "Pattathu Yaanai"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/3ZQP-7d50.jpg",
      "page_url": "https://einthusan.tv/movie/watch/3ZQP/?lang=tamil",
      "title": "Thadam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1302-7117.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1302/?lang=tamil",
      "title": "English Vinglish"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2306-3d8a.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2306/?lang=tamil",
      "title": "Pulivaal"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2936-8a1f.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2936/?lang=tamil",
      "title": "24"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1299-8e8b.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1299/?lang=tamil",
      "title": "Maatraan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2744-e054.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2744/?lang=tamil",
      "title": "Vasuvum Saravananum Onna Padichavanga"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0113-53d4.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0113/?lang=tamil",
      "title": "Something Something Unakkum Enakkum"
    },
	    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0934-ae4a.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0934/?lang=tamil",
      "title": "Saguni"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1332-b165.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1332/?lang=tamil",
      "title": "Kumki"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/4STi-2862.jpg",
      "page_url": "https://einthusan.tv/movie/watch/4STi/?lang=tamil",
      "title": "Velaiilla Pattadhari 2"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/4QSl-a33f.jpg",
      "page_url": "https://einthusan.tv/movie/watch/4QSl/?lang=tamil",
      "title": "Kolamaavu Kokila"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0041-e510.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0041/?lang=tamil",
      "title": "Anniyan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/6tv3-e1ea.jpg",
      "page_url": "https://einthusan.tv/movie/watch/6tv3/?lang=tamil",
      "title": "Leo Tamil"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0029-23c8.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0029/?lang=tamil",
      "title": "Boss Engira Bhaskaran"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2595-b314.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2595/?lang=tamil",
      "title": "Anegan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0026-b8ab.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0026/?lang=tamil",
      "title": "Vaaranam Aayiram"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/6E5G-70df.jpg",
      "page_url": "https://einthusan.tv/movie/watch/6E5G/?lang=tamil",
      "title": "Jailer"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2669-62de.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2669/?lang=tamil",
      "title": "Massu Engira Masilamani"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0079-ff6f.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0079/?lang=tamil",
      "title": "Ghilli"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0019-92cf.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0019/?lang=tamil",
      "title": "Padayappa"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2526-ec92.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2526/?lang=tamil",
      "title": "Velaiyilla Pattathari"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0614-3009.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0614/?lang=tamil",
      "title": "Nanban"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1691-ce80.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1691/?lang=tamil",
      "title": "Ambikapathy"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1665-2f71.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1665/?lang=tamil",
      "title": "Udhayam NH4"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0043-b348.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0043/?lang=tamil",
      "title": "Aadhavan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2649-3dde.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2649/?lang=tamil",
      "title": "Uttama Villain"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1vh7-09ed.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1vh7/?lang=tamil",
      "title": "Maanaadu"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/50P5-a36a.jpg",
      "page_url": "https://einthusan.tv/movie/watch/50P5/?lang=tamil",
      "title": "Imaikkaa Nodigal"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1689-b066.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1689/?lang=tamil",
      "title": "Thillu Mullu"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0327-8a54.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0327/?lang=tamil",
      "title": "Villu"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0331-6ceb.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0331/?lang=tamil",
      "title": "Alex Pandian"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2774-e895.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2774/?lang=tamil",
      "title": "Thoongaa Vanam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2835-b06a.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2835/?lang=tamil",
      "title": "Thanga Magan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1700-ab7d.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1700/?lang=tamil",
      "title": "Sonna Puriyathu"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/6gF4-f571.jpg",
      "page_url": "https://einthusan.tv/movie/watch/6gF4/?lang=tamil",
      "title": "Theeran Adhigaaram Ondru"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/3KSd-9f84.jpg",
      "page_url": "https://einthusan.tv/movie/watch/3KSd/?lang=tamil",
      "title": "Vada Chennai"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2569-bb2f.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2569/?lang=tamil",
      "title": "Meaghamann"
    },
	    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1687-9bbb.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1687/?lang=tamil",
      "title": "Kutti Puli"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1317-5419.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1317/?lang=tamil",
      "title": "Pizza"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/6jiA-f94b.jpg",
      "page_url": "https://einthusan.tv/movie/watch/6jiA/?lang=tamil",
      "title": "Love Today"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0753-ffcc.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0753/?lang=tamil",
      "title": "3 - Moonu"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/7Mln-9367.jpg",
      "page_url": "https://einthusan.tv/movie/watch/7Mln/?lang=tamil",
      "title": "Adanga Maru"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2729-1db8.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2729/?lang=tamil",
      "title": "Sakalakala Vallavan 2015"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1656-820a.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1656/?lang=tamil",
      "title": "Kedi Billa Killadi Ranga"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/41m3-1b5f.jpg",
      "page_url": "https://einthusan.tv/movie/watch/41m3/?lang=tamil",
      "title": "Super Deluxe"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1349-6466.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1349/?lang=tamil",
      "title": "Kanna Laddu Thinna Aasaiya"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0217-9f75.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0217/?lang=tamil",
      "title": "Santosh Subramaniam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1273-8b97.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1273/?lang=tamil",
      "title": "Sundarapandian"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0600-a683.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0600/?lang=tamil",
      "title": "Velayudham"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0220-77e8.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0220/?lang=tamil",
      "title": "Thillalangadi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2668-51c9.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2668/?lang=tamil",
      "title": "36 Vayadhinile"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1GMg-2d51.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1GMg/?lang=tamil",
      "title": "Sandakozhi 2"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2924-6b14.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2924/?lang=tamil",
      "title": "Manithan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/AtVV-0bb5.png",
      "page_url": "https://einthusan.tv/movie/watch/AtVV/?lang=tamil",
      "title": "Bogan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0807-3b46.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0807/?lang=tamil",
      "title": "Oru Kal Oru Kannadi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1647-1d80.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1647/?lang=tamil",
      "title": "Chennaiyil Oru Naal"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1UlQ-1edd.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1UlQ/?lang=tamil",
      "title": "Kanaa"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2385-f392.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2385/?lang=tamil",
      "title": "Ennamo Nadakkudhu"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2918-615b.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2918/?lang=tamil",
      "title": "Vetrivel"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0155-53b2.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0155/?lang=tamil",
      "title": "Sillunu Oru Kaadhal"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1Ud5-f534.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1Ud5/?lang=tamil",
      "title": "Sardar"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1oaE-94f3.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1oaE/?lang=tamil",
      "title": "Saamy 2"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/6FmL-391d.jpg",
      "page_url": "https://einthusan.tv/movie/watch/6FmL/?lang=tamil",
      "title": "Seema Raja"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1YUm-de73.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1YUm/?lang=tamil",
      "title": "Singam 3"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2690-05af.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2690/?lang=tamil",
      "title": "Romeo Juliet"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1ueW-6c85.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1ueW/?lang=tamil",
      "title": "Beast Tamil"
    },
  ]
};
const malayalamData = {
  "category": "popular",
  "language": "malayalam",
  "has_more": true,
  "movies": [
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2473-2cf9.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2473/?lang=malayalam",
      "title": "Bangalore Days"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1t88-319c.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1t88/?lang=malayalam",
      "title": "Premalu"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/3175-1154.jpg",
      "page_url": "https://einthusan.tv/movie/watch/3175/?lang=malayalam",
      "title": "Premam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2384-f1d0.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2384/?lang=malayalam",
      "title": "Drishyam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2185-d05d.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2185/?lang=malayalam",
      "title": "Ohm Shanthi Oshaana"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2902-c7e3.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2902/?lang=malayalam",
      "title": "Charlie"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2964-5728.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2964/?lang=malayalam",
      "title": "Kali"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2939-fd2e.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2939/?lang=malayalam",
      "title": "Action Hero Biju"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1929-b207.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1929/?lang=malayalam",
      "title": "ABCD: American-Born Confused Desi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/9012-fd32.jpg",
      "page_url": "https://einthusan.tv/movie/watch/9012/?lang=malayalam",
      "title": "Jacobinte Swargarajyam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2913-83b6.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2913/?lang=malayalam",
      "title": "Two Countries"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/3147-9162.jpg",
      "page_url": "https://einthusan.tv/movie/watch/3147/?lang=malayalam",
      "title": "Oru Vadakkan Selfie"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2474-d8ce.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2474/?lang=malayalam",
      "title": "How Old Are You"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/4i3K-4445.jpg",
      "page_url": "https://einthusan.tv/movie/watch/4i3K/?lang=malayalam",
      "title": "Hridayam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2988-e0fc.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2988/?lang=malayalam",
      "title": "Maheshinte Prathikaaram"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2148-d60b.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2148/?lang=malayalam",
      "title": "Mumbai Police"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2502-a490.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2502/?lang=malayalam",
      "title": "Vikramadithyan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/3cSj-6f60.jpg",
      "page_url": "https://einthusan.tv/movie/watch/3cSj/?lang=malayalam",
      "title": "Lucifer"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2286-6d3d.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2286/?lang=malayalam",
      "title": "Memories"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/3114-c9bb.jpg",
      "page_url": "https://einthusan.tv/movie/watch/3114/?lang=malayalam",
      "title": "100 Days Of Love"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/3CDy-c531.jpg",
      "page_url": "https://einthusan.tv/movie/watch/3CDy/?lang=malayalam",
      "title": "Anjaam Pathiraa"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/31c8-541c.jpg",
      "page_url": "https://einthusan.tv/movie/watch/31c8/?lang=malayalam",
      "title": "Aavesham"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/6GcS-db5d.jpg",
      "page_url": "https://einthusan.tv/movie/watch/6GcS/?lang=malayalam",
      "title": "Jomonte Suvisheshangal"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/9021-cc9b.jpg",
      "page_url": "https://einthusan.tv/movie/watch/9021/?lang=malayalam",
      "title": "Kammatipaadam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/3182-8f5d.jpg",
      "page_url": "https://einthusan.tv/movie/watch/3182/?lang=malayalam",
      "title": "Bhaskar The Rascal"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2998-d74b.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2998/?lang=malayalam",
      "title": "James & Alice"
	},
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2152-763d.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2152/?lang=malayalam",
      "title": "Neelakasham Pachakadal Chuvanna Bhoomi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2339-8dde.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2339/?lang=malayalam",
      "title": "Punyalan Agarbattis"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/3177-14d9.jpg",
      "page_url": "https://einthusan.tv/movie/watch/3177/?lang=malayalam",
      "title": "Thattathin Marayathu"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2864-7def.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2864/?lang=malayalam",
      "title": "Anarkali"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2ZJw-df9e.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2ZJw/?lang=malayalam",
      "title": "Rekhachithram"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2982-2956.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2982/?lang=malayalam",
      "title": "King Liar"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2853-fdf2.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2853/?lang=malayalam",
      "title": "Amar Akbar Anthony"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/3Tcu-42b4.jpg",
      "page_url": "https://einthusan.tv/movie/watch/3Tcu/?lang=malayalam",
      "title": "Kumbalangi Nights"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/5qVL-e1c4.jpg",
      "page_url": "https://einthusan.tv/movie/watch/5qVL/?lang=malayalam",
      "title": "Mayaanadhi"
	},
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/7uSR-921a.jpg",
      "page_url": "https://einthusan.tv/movie/watch/7uSR/?lang=malayalam",
      "title": "Sookshma Darshini"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2940-352b.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2940/?lang=malayalam",
      "title": "Puthiya Niyamam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/3056-9ede.jpg",
      "page_url": "https://einthusan.tv/movie/watch/3056/?lang=malayalam",
      "title": "1983"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1841-ac40.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1841/?lang=malayalam",
      "title": "Ayalum Njanum Thammil"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/5U0M-b1ee.jpg",
      "page_url": "https://einthusan.tv/movie/watch/5U0M/?lang=malayalam",
      "title": "Oppam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/6Q0i-750d.jpg",
      "page_url": "https://einthusan.tv/movie/watch/6Q0i/?lang=malayalam",
      "title": "Thalavan"
	},
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/4Fbk-f9e7.jpg",
      "page_url": "https://einthusan.tv/movie/watch/4Fbk/?lang=malayalam",
      "title": "Jaya Jaya Jaya Jaya Hey"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/gamU-ccb2.jpg",
      "page_url": "https://einthusan.tv/movie/watch/gamU/?lang=malayalam",
      "title": "Thudarum"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/3154-8823.jpg",
      "page_url": "https://einthusan.tv/movie/watch/3154/?lang=malayalam",
      "title": "Ivide"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/4vaC-1547.jpg",
      "page_url": "https://einthusan.tv/movie/watch/4vaC/?lang=malayalam",
      "title": "Abraham Ozler"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/3W0w-9dd9.jpg",
      "page_url": "https://einthusan.tv/movie/watch/3W0w/?lang=malayalam",
      "title": "Salute"
	},
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/71Oy-2acc.jpg",
      "page_url": "https://einthusan.tv/movie/watch/71Oy/?lang=malayalam",
      "title": "Varathan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/4TPG-9193.jpg",
      "page_url": "https://einthusan.tv/movie/watch/4TPG/?lang=malayalam",
      "title": "Kishkindha Kaandam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1QMS-f890.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1QMS/?lang=malayalam",
      "title": "Ponman"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2363-7ccb.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2363/?lang=malayalam",
      "title": "London Bridge"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/4YfR-d0b6.jpg",
      "page_url": "https://einthusan.tv/movie/watch/4YfR/?lang=malayalam",
      "title": "Munthirivallikal Thalirkkumbol"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/6cSk-6567.jpg",
      "page_url": "https://einthusan.tv/movie/watch/6cSk/?lang=malayalam",
      "title": "Neru"
	},
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2328-adf3.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2328/?lang=malayalam",
      "title": "Oru Indian Pranayakatha"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2874-51c0.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2874/?lang=malayalam",
      "title": "Ennu Ninte Moideen"
    }
  ]
};
const hindiData = {
  "category": "popular",
  "language": "hindi",
  "has_more": true,
  "movies": [
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2728-6ddc.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2728/?lang=hindi",
      "title": "Dil Dhadakne Do"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2wt9-5a7c.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2wt9/?lang=hindi",
      "title": "Dunki"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/5mCU-1be3.jpg",
      "page_url": "https://einthusan.tv/movie/watch/5mCU/?lang=hindi",
      "title": "Jawan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/5Zt9-e3fa.jpg",
      "page_url": "https://einthusan.tv/movie/watch/5Zt9/?lang=hindi",
      "title": "Pathaan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2B37-bcb5.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2B37/?lang=hindi",
      "title": "Zero"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2d7m-031c.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2d7m/?lang=hindi",
      "title": "Jab Harry Met Sejal"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/75K1-38ab.jpg",
      "page_url": "https://einthusan.tv/movie/watch/75K1/?lang=hindi",
      "title": "Raees"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1d0X-4a60.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1d0X/?lang=hindi",
      "title": "Dear Zindagi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/26vf-81ec.jpg",
      "page_url": "https://einthusan.tv/movie/watch/26vf/?lang=hindi",
      "title": "Tutak Tutak Tutiya"
    },
	      {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1342-3f2d.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1342/?lang=hindi",
      "title": "Jab Tak Hai Jaan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0723-1296.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0723/?lang=hindi",
      "title": "Don 2"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0674-9ed7.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0674/?lang=hindi",
      "title": "Ra One"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0738-1a6f.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0738/?lang=hindi",
      "title": "My Name Is Khan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0489-427d.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0489/?lang=hindi",
      "title": "Dulha Mil Gaya"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1501-8ad3.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1501/?lang=hindi",
      "title": "Aao Wish Karein"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0553-0749.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0553/?lang=hindi",
      "title": "Rab Ne Bana Di Jodi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0629-a21d.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0629/?lang=hindi",
      "title": "Bhoothnath"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0543-d913.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0543/?lang=hindi",
      "title": "Om Shanti Om"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1204-2497.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1204/?lang=hindi",
      "title": "Chak De! India"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0981-0fee.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0981/?lang=hindi",
      "title": "Kal Ho Naa Ho"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0965-77fa.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0965/?lang=hindi",
      "title": "Chalte Chalte"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0561-7859.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0561/?lang=hindi",
      "title": "Saathiya"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0571-fb6c.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0571/?lang=hindi",
      "title": "Veer Zaara"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1611-bb50.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1611/?lang=hindi",
      "title": "Shakti The Power"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0480-da47.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0480/?lang=hindi",
      "title": "Devdas"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2840-8ef2.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2840/?lang=hindi",
      "title": "Dilwale"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2504-f4c1.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2504/?lang=hindi",
      "title": "Happy New Year"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/7757-d043.jpg",
      "page_url": "https://einthusan.tv/movie/watch/7757/?lang=hindi",
      "title": "Chennai Express"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2277-b511.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2277/?lang=hindi",
      "title": "Goliyon Ki Raasleela Ram Leela"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2887-0159.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2887/?lang=hindi",
      "title": "Bajirao Mastani"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2886-155f.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2886/?lang=hindi",
      "title": "Sanam Teri Kasam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0442-a982.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0442/?lang=hindi",
      "title": "Kabhi Khushi Kabhie Gham"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2356-53ed.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2356/?lang=hindi",
      "title": "Queen"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2737-3b94.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2737/?lang=hindi",
      "title": "Bajrangi Bhaijaan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2840-8ef2.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2840/?lang=hindi",
      "title": "Dilwale"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2907-4ca8.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2907/?lang=hindi",
      "title": "Kapoor And Sons"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2464-8daa.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2464/?lang=hindi",
      "title": "Humpty Sharma Ki Dulhania"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2679-1113.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2679/?lang=hindi",
      "title": "Tanu Weds Manu Returns"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1342-3f2d.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1342/?lang=hindi",
      "title": "Jab Tak Hai Jaan"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/9097-c32a.jpg",
      "page_url": "https://einthusan.tv/movie/watch/9097/?lang=hindi",
      "title": "Ae Dil Hai Mushkil"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1335-06a5.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1335/?lang=hindi",
      "title": "Student Of The Year"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2714-c9a1.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2714/?lang=hindi",
      "title": "Hamari Adhuri Kahani"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2626-0a35.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2626/?lang=hindi",
      "title": "Dum Laga Ke Haisha"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2504-f4c1.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2504/?lang=hindi",
      "title": "Happy New Year"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2738-6806.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2738/?lang=hindi",
      "title": "Baahubali: The Beginning"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/0488-b828.jpg",
      "page_url": "https://einthusan.tv/movie/watch/0488/?lang=hindi",
      "title": "Dilwale Dulhania Le Jayenge"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2931-04ff.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2931/?lang=hindi",
      "title": "Ki & Ka"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2678-d9e2.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2678/?lang=hindi",
      "title": "Piku"
    }
  ]
};
const teluguData = {
  "category": "popular",
  "has_more": true,
  "language": "telugu",
  "movies": [
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1RPl-17d0.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1RPl/?lang=telugu",
      "title": "Arjun Reddy"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2555-9162.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2555/?lang=telugu",
      "title": "Manam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2RmX-c102.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2RmX/?lang=telugu",
      "title": "Geetha Govindham"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2858-ec05.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2858/?lang=telugu",
      "title": "Son Of Satyamurthy"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/9050-2d38.jpg",
      "page_url": "https://einthusan.tv/movie/watch/9050/?lang=telugu",
      "title": "A Aa"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/9020-6dee.jpg",
      "page_url": "https://einthusan.tv/movie/watch/9020/?lang=telugu",
      "title": "Brahmotsavam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2875-0756.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2875/?lang=telugu",
      "title": "Soggade Chinni Nayana"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2925-1b71.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2925/?lang=telugu",
      "title": "Srimanthudu"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2911-0846.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2911/?lang=telugu",
      "title": "Oopiri"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2999-ee99.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2999/?lang=telugu",
      "title": "Nenu Sailaja"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/9041-581e.jpg",
      "page_url": "https://einthusan.tv/movie/watch/9041/?lang=telugu",
      "title": "Kalyana Vaibhogame"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/9036-9bbe.jpg",
      "page_url": "https://einthusan.tv/movie/watch/9036/?lang=telugu",
      "title": "Baahubali: The Beginning (Telugu)"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/205O-badb.jpg",
      "page_url": "https://einthusan.tv/movie/watch/205O/?lang=telugu",
      "title": "Bharat Ane Nenu"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/5viA-9a98.jpg",
      "page_url": "https://einthusan.tv/movie/watch/5viA/?lang=telugu",
      "title": "Rangasthalam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1887-98d1.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1887/?lang=telugu",
      "title": "Mirchi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2953-6ebf.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2953/?lang=telugu",
      "title": "Krishna Gaadi Veera Prema Gaadha"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2922-1d38.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2922/?lang=telugu",
      "title": "Kshanam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2573-4e95.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2573/?lang=telugu",
      "title": "Loukyam"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/2880-a0ef.jpg",
      "page_url": "https://einthusan.tv/movie/watch/2880/?lang=telugu",
      "title": "Bhale Bhale Magadivoy"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/1378-dec1.jpg",
      "page_url": "https://einthusan.tv/movie/watch/1378/?lang=telugu",
      "title": "Julayi"
    },
    {
      "img_url": "https://img.einthusan.io/etv/s3/moviecovers/3032-3dca.jpg",
      "page_url": "https://einthusan.tv/movie/watch/3032/?lang=telugu",
      "title": "1: Nenokkadine"
    }

  ],
  "next_page": 2,
  "page": 1
};       
        // State management for pagination
        let searchState = { query: '', lang: 'tamil', page: 1, hasMore: false };
        // Auto-search debounce (1s) + load 2 pages at a time
        let _searchDebounce = null;

        async function prefetchNextSearchPageIfAvailable() {
            if (searchState.hasMore) {
                await doSearch(searchState.page + 1, false);
            }
        }

        function setupAutoSearch() {
            const input = document.getElementById('search-input');
            if (!input) return;

            input.addEventListener('input', () => {
                clearTimeout(_searchDebounce);
                _searchDebounce = setTimeout(async () => {
                    // Start a new search and prefetch the next page for fuller results
                    await doSearch(1, true);
                    await prefetchNextSearchPageIfAvailable();
                }, 1000);
            });
        }

        async function loadMoreSearch() {
            // Load 2 pages per click
            const firstPage = searchState.page + 1;
            await doSearch(firstPage, false);
            if (searchState.hasMore) {
                await doSearch(firstPage + 1, false);
            }
        }

let actorState = { actorCode: '', lang: 'tamil', actorName: '', page: 1, hasMore: false };

        // ===============================================
        // UTILS
        // ===============================================
        function getRedirectUrl(einthusanUrl) {
            // Extracts ID from: https://einthusan.tv/movie/watch/2223/?lang=tamil
            // Returns: https://thirai.me/watch?film=2223
            const match = einthusanUrl.match(/\/watch\/([a-zA-Z0-9]+)\//);
            if(match && match[1]) {
                return `https://thirai.me/mobile/watch?film=${match[1]}`;
            }
            return einthusanUrl;
        }

        function createCard(item) {
            const div = document.createElement('div');
            div.className = 'card';
            div.innerHTML = `<img src="${item.img_url}" loading="lazy" alt="${item.title}">`;
            div.onclick = () => window.location.href = getRedirectUrl(item.page_url);
            return div;
        }

        // ===============================================
        // SIDEBAR ACTIVE STATE HELPERS
        // ===============================================
        let filterPopupOpen = false;
        function setFilterActive(on){
            const desk = document.getElementById('desk-filter');
            const btm = document.getElementById('btm-filter');
            if(desk) desk.classList.toggle('active', !!on);
            if(btm) btm.classList.toggle('active', !!on);
        }

        // ===============================================
        // LANGUAGE CATEGORY (Recent/Popular) FULL SCREEN
        // Uses: (API_BASE)/language/(language)?category=recent|popular&page=(number)
        // ===============================================
        const langCategoryState = { lang: null, category: 'recent', page: 1, hasMore: false };

        function openLanguageCategory(lang, category='recent'){
            langCategoryState.lang = lang;
            langCategoryState.category = category;
            langCategoryState.page = 1;
            langCategoryState.hasMore = false;

            // toggle pills
            document.getElementById('langcat-recent')?.classList.toggle('active', category==='recent');
            document.getElementById('langcat-popular')?.classList.toggle('active', category==='popular');

            const niceLang = (lang || '').charAt(0).toUpperCase() + (lang || '').slice(1);
            const niceCat = category.charAt(0).toUpperCase() + category.slice(1);
            const titleEl = document.getElementById('lang-category-title');
            if(titleEl) titleEl.textContent = `${niceLang} • ${niceCat}`;

            const grid = document.getElementById('lang-category-grid');
            if(grid) grid.innerHTML = '';

            switchTab('lang-category');
            fetchAndRenderLanguageCategory(1, true);
        }

        function setLanguageCategory(category){
            if(!langCategoryState.lang) return;
            if(category !== 'recent' && category !== 'popular') return;
            openLanguageCategory(langCategoryState.lang, category);
        }

        async function fetchAndRenderLanguageCategory(pageNumber, clear=false){
            const grid = document.getElementById('lang-category-grid');
            const loadMoreBtn = document.getElementById('load-more-lang-category');
            if(!grid || !loadMoreBtn) return;

            loadMoreBtn.disabled = true;

            if(clear){
                setLoading('lang-category-grid', true, false);
            } else {
                setLoadMoreBtnLoading(loadMoreBtn, true);
            }

            try{
                const url = `${API_BASE}/language/${langCategoryState.lang}?category=${langCategoryState.category}&page=${pageNumber}`;
                const r = await fetch(url);
                const d = await r.json();

                if(clear) grid.innerHTML = '';

                const movies = d.movies || d.results || [];
                if(movies.length){
                    movies.forEach(m => grid.appendChild(createCard(m)));
                    langCategoryState.page = pageNumber;
                    langCategoryState.hasMore = d.has_more || d.hasMore || false;
                } else if(clear){
                    grid.innerHTML = '<p style="color:#777; width:100%; text-align:center; padding:16px 0;">No results</p>';
                    langCategoryState.hasMore = false;
                }
            }catch(err){
                console.error(err);
                if(clear) grid.innerHTML = '<p style="color:#777; width:100%; text-align:center; padding:16px 0;">Failed to load</p>';
                langCategoryState.hasMore = false;
            }finally{
setLoadMoreBtnLoading(loadMoreBtn, false);
                loadMoreBtn.disabled = !langCategoryState.hasMore;
                loadMoreBtn.classList.toggle('visually-hidden', !langCategoryState.hasMore);
            }
        }

        function loadNextLanguageCategoryPage(){
            if(langCategoryState.hasMore){
                fetchAndRenderLanguageCategory(langCategoryState.page + 1, false);
            }
        }

        function setLoading(elementId, isLoading, append = false) {
            const el = document.getElementById(elementId);
            if (isLoading) {
                if (!append) el.innerHTML = '<p style="color:#777; width:100%; text-align:center; padding: 20px 0;">Loading...</p>';
            } else if (!append) {
                 el.innerHTML = '';
            }
        }

        

        // ===============================================
        // LOAD MORE BUTTON (circle) - loading helper
        // ===============================================
        function setLoadMoreBtnLoading(btnOrId, isLoading){
            const btn = (typeof btnOrId === 'string') ? document.getElementById(btnOrId) : btnOrId;
            if(!btn) return;
            btn.classList.toggle('is-loading', !!isLoading);
            btn.disabled = !!isLoading;
            if(isLoading) btn.setAttribute('aria-busy', 'true');
            else btn.removeAttribute('aria-busy');
        }
// ===============================================
        // VIEW/NAVIGATION LOGIC
        // ===============================================
        let historyStack = ['home'];

        function switchTab(tab) {
            const views = document.querySelectorAll('#view-home, #view-collections, #view-search, #view-actor-details, #view-filter-results, #view-lang-category');
            const navItems = document.querySelectorAll('.nav-link, .nav-item, .side-item');
            const backBtn = document.getElementById('back-button');

            // 1. Manage History
            const currentTab = historyStack[historyStack.length - 1];
            if (tab !== currentTab) {
                if (tab === 'home' || tab === 'collections' || tab === 'search') {
                    historyStack = [tab]; // Start new main path
                } else {
                    historyStack.push(tab); // Push secondary view (like actor-details)
                }
            }
            
            // 2. Manage Views and Back Button
            views.forEach(e => e.classList.add('visually-hidden'));
            navItems.forEach(e => e.classList.remove('active'));
            
            document.getElementById(`view-${tab}`).classList.remove('visually-hidden');

            // Keep the main tab highlighted even when opening secondary views (like actor-details / filter-results)
            const mainTab = historyStack[0];

            // Highlight Filter button when using filter feature
            if (tab === 'filter-results') {
                setFilterActive(true);
            } else if (!filterPopupOpen) {
                setFilterActive(false);
            }
            if(document.getElementById(`btm-${mainTab}`)) document.getElementById(`btm-${mainTab}`).classList.add('active');
            if(document.getElementById(`desk-${mainTab}`)) document.getElementById(`desk-${mainTab}`).classList.add('active');
            // Prevent sticky focus styling on desktop sidebar buttons
            const deskBtn = document.getElementById(`desk-${mainTab}`);
            if (deskBtn) { setTimeout(() => deskBtn.blur(), 0); }// Show back button for secondary views (anything that isn't a main bottom-nav tab)
            if (historyStack.length > 1) {
                backBtn.classList.remove('visually-hidden');
            } else {
                backBtn.classList.add('visually-hidden');
            }

            // 3. Init Collections on first load
            if(tab === 'collections' && document.getElementById('grid-actors').children.length === 0) {
                renderFeatured();
                filterGrid('tamil', document.querySelector('.filter-tab[data-lang="tamil"]'));
            }
        }

        function goBack() {
            if (historyStack.length > 1) {
                historyStack.pop(); // remove current secondary view
                const prevTab = historyStack[historyStack.length - 1];
                switchTab(prevTab);
            } else if (historyStack.length === 1 && historyStack[0] !== 'home') {
                switchTab('home');
            }
        }
        
        // ===============================================
        // FEATURED SLIDESHOW LOGIC (Blurred Carousel)
        // ===============================================
        let currentFeaturedMode = 'actors';
        // Infinite-loop state for Featured slider
        let featuredLoop = { baseCount: 0, loopWidth: 0, isJumping: false, navAnimating: false };


        
function renderFeatured() {
    const list = actorsData.castData.featured[currentFeaturedMode] || [];
    const slider = document.getElementById('featured-slider');
    if (!slider) return;

    slider.innerHTML = '';
    featuredLoop.baseCount = list.length;
    featuredLoop.loopWidth = 0;
    featuredLoop.isJumping = false;

    // Build 3 copies so we can "wrap" seamlessly.
    const loopList = list.length ? [...list, ...list, ...list] : [];

    loopList.forEach(actor => {
        const div = document.createElement('div');
        div.className = 'featured-card';
        div.innerHTML = `
            <img src="${actor.image_url}" loading="lazy" alt="${actor.name}">
            <div class="featured-overlay">
                <div class="featured-name">${actor.name}</div>
            </div>
        `;
        div.onclick = () => openActorDetails(actor.actor_code, 'tamil', actor.name);
        slider.appendChild(div);
    });

    // Re-attach scroll listener to update active slide + loop behavior
    slider.removeEventListener('scroll', handleFeaturedScroll);
    slider.addEventListener('scroll', handleFeaturedScroll, { passive: true });

    // Jump to the middle copy so scrolling "both ways" loops.
    requestAnimationFrame(() => {
        const cards = slider.querySelectorAll('.featured-card');
        if (!cards.length || featuredLoop.baseCount === 0) return;

        const middleFirst = featuredLoop.baseCount; // first card of the middle copy
        const c = cards[middleFirst];

        // Center that card
        const target = c.offsetLeft - (slider.clientWidth / 2) + (c.offsetWidth / 2);
        
        // Prevent any "auto glide" on load: force instant positioning
        const prevBehavior = slider.style.scrollBehavior;
        slider.style.scrollBehavior = 'auto';
        slider.scrollLeft = target;
        // Restore (CSS is auto, but keep this safe)
        requestAnimationFrame(() => { slider.style.scrollBehavior = prevBehavior || ''; });


        // Measure the width of one full copy (distance between copy 0 start and copy 1 start)
        const loopWidth = cards[featuredLoop.baseCount].offsetLeft - cards[0].offsetLeft;
        featuredLoop.loopWidth = Math.max(1, loopWidth);

        handleFeaturedScroll(); // Initial call to set active slide
    });
}


function handleFeaturedScroll() {
    const slider = document.getElementById('featured-slider');
    if (!slider) return;

    // --- Infinite loop wrap ---
    if (featuredLoop.baseCount > 0 && featuredLoop.loopWidth > 0 && !featuredLoop.isJumping && !featuredLoop.navAnimating) {
        const left = slider.scrollLeft;

        // If we drift too far into the first copy, jump forward one copy.
        if (left < featuredLoop.loopWidth * 0.5) {
            featuredLoop.isJumping = true;
            slider.scrollLeft = left + featuredLoop.loopWidth;
            requestAnimationFrame(() => { featuredLoop.isJumping = false; });
        }
        // If we drift too far into the last copy, jump backward one copy.
        else if (left > featuredLoop.loopWidth * 1.5) {
            featuredLoop.isJumping = true;
            slider.scrollLeft = left - featuredLoop.loopWidth;
            requestAnimationFrame(() => { featuredLoop.isJumping = false; });
        }
    }

    // --- Active slide scaling ---
    const cards = slider.querySelectorAll('.featured-card');
    const scrollCenter = slider.scrollLeft + (slider.offsetWidth / 2);

    cards.forEach(card => {
        const cardCenter = card.offsetLeft + (card.offsetWidth / 2);
        const distance = Math.abs(scrollCenter - cardCenter);

        // Determine if the card is close enough to the center to be "active"
        const tolerance = card.offsetWidth * 0.4;

        if (distance < tolerance) card.classList.add('active-slide');
        else card.classList.remove('active-slide');
    });
}



// ===============================================
// FEATURED CAROUSEL NAV (desktop arrows)
// ===============================================
function featuredScrollToIndex(targetIndex){
    const slider = document.getElementById('featured-slider');
    if (!slider) return;
    const cards = slider.querySelectorAll('.featured-card');
    if (!cards.length) return;

    const i = Math.max(0, Math.min(cards.length - 1, targetIndex));
    const c = cards[i];
    const target = c.offsetLeft - (slider.clientWidth / 2) + (c.offsetWidth / 2);

    // Animate on arrow navigation (desktop) without triggering loop-jumps mid-animation
    featuredLoop.navAnimating = true;
    clearTimeout(featuredLoop._navTimer);
    slider.scrollTo({ left: target, behavior: 'smooth' });
    featuredLoop._navTimer = setTimeout(() => { featuredLoop.navAnimating = false; }, 520);
}

function featuredGetClosestIndex(){
    const slider = document.getElementById('featured-slider');
    if (!slider) return 0;
    const cards = slider.querySelectorAll('.featured-card');
    if (!cards.length) return 0;

    const center = slider.scrollLeft + (slider.clientWidth / 2);
    let bestIdx = 0;
    let bestDist = Infinity;

    cards.forEach((card, idx) => {
        const cardCenter = card.offsetLeft + (card.offsetWidth / 2);
        const dist = Math.abs(center - cardCenter);
        if (dist < bestDist){
            bestDist = dist;
            bestIdx = idx;
        }
    });
    return bestIdx;
}

function featuredNext(){
    const idx = featuredGetClosestIndex();
    featuredScrollToIndex(idx + 1);
}
function featuredPrev(){
    const idx = featuredGetClosestIndex();
    featuredScrollToIndex(idx - 1);
}
function toggleFeatured() {
            currentFeaturedMode = currentFeaturedMode === 'actors' ? 'actresses' : 'actors';
            const bg = document.getElementById('feat-toggle-bg');
            const btn1 = document.getElementById('btn-actors');
            const btn2 = document.getElementById('btn-actresses');

            if(currentFeaturedMode === 'actresses') {
                bg.style.transform = 'translateX(100%)';
                btn1.classList.remove('active');
                btn2.classList.add('active');
            } else {
                bg.style.transform = 'translateX(0)';
                btn1.classList.add('active');
                btn2.classList.remove('active');
            }
            renderFeatured();
        }

// ===============================================
        // ACTOR DETAILS & PAGINATION
        // ===============================================
        async function openActorDetails(actorCode, lang, actorName) {
            switchTab('actor-details');
            
            // Set initial state
            actorState = { 
                actorCode: actorCode, 
                lang: lang, 
                actorName: actorName, 
                page: 1, 
                hasMore: false 
            };
            document.getElementById('actor-details-title').textContent = `${actorName}`;
            
            // Clear previous results and load page 1
            document.getElementById('actor-movies-grid').innerHTML = '';
            document.getElementById('load-more-actor').classList.add('visually-hidden');
            await fetchActorPage(1, true);
        }

        async function fetchActorPage(pageNumber, clear = false) {
            const { actorCode, lang } = actorState;
            const grid = document.getElementById('actor-movies-grid');
            const loadMoreBtn = document.getElementById('load-more-actor');

            loadMoreBtn.disabled = true;

            if(clear) {
                setLoading('actor-movies-grid', true, false);
            } else {
                setLoadMoreBtnLoading(loadMoreBtn, true);
            }

            try {
                let d;
if (actorCode === '3TKYioHCAF') {
    const r = await fetch('/mobile/vijay.json');
    d = await r.json();
    d.has_more = false; 
} else if (actorCode === '5vCobOqDDx') {
    const r = await fetch('/mobile/Dhanush.json');
    d = await r.json();
    d.has_more = false;
}
                // ✅ All other actors continue to use the normal API
                else {
                    const url = `${API_BASE}/actors/${lang}/${actorCode}?page=${pageNumber}`;
                    const r = await fetch(url);
                    d = await r.json();
                }

                if (clear) grid.innerHTML = '';
                
                if(d.movies && d.movies.length > 0) {
                    d.movies.forEach(m => {
                        grid.appendChild(createCard(m));
                    });
                    
                    // Update state
                    actorState.page = pageNumber;
                    actorState.hasMore = d.has_more || false;
                } else if (clear) {
                    grid.innerHTML = '<p style="color:#777; width:100%; text-align:center;">No movies found.</p>';
                }

            } catch(e) {
                if (clear) grid.innerHTML = '<p style="color:red; width:100%; text-align:center;">Error loading movies.</p>';
            } finally {
                setLoadMoreBtnLoading(loadMoreBtn, false);
                if(actorState.hasMore) {
                    loadMoreBtn.classList.remove('visually-hidden');
                } else {
                    loadMoreBtn.classList.add('visually-hidden');
                }
            }
        }
        
        function loadNextActorPage() {
            if (actorState.hasMore) {
                fetchActorPage(actorState.page + 1, false);
            }
        }

        // ===============================================
        // ACTOR GRID (Collections Tab)
        // ===============================================
        async function filterGrid(lang, btn) {
            document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
            btn.classList.add('active');
            
            const grid = document.getElementById('grid-actors');
            setLoading('grid-actors', true, false);

            const actors = actorsData.castData.tmdb.actors.filter(a => a.language === lang);
            
            grid.innerHTML = '';
            for(const actor of actors) {
                // Simplified card, TMDB ID is used for poster fetch only
                let img = 'https://via.placeholder.com/150';
                try {
                    const r = await fetch(`${TMDB_BASE}/person/${actor.tmdb_id}/images?api_key=${API_KEY}`);
                    const d = await r.json();
                    if(d.profiles && d.profiles.length) img = `https://image.tmdb.org/t/p/w185${d.profiles[0].file_path}`;
                } catch(e){}

                const div = document.createElement('div');
                div.style.textAlign = 'center';
                div.style.cursor = 'pointer';
                div.innerHTML = `
                    <div style="width:100px; height:100px; border-radius:50%; overflow:hidden; margin:0 auto 10px; border:2px solid #333;">
                        <img src="${img}" style="width:100%; height:100%; object-fit:cover;" loading="lazy">
                    </div>
                    <div style="font-size:0.85rem; color:#ccc;">${actor.name}</div>
                `;
                // On click, use actor_code and language
                div.onclick = () => openActorDetails(actor.actor_code, actor.language, actor.name);
                grid.appendChild(div);
            }
        }

        // ===============================================
        // SEARCH LOGIC (Dedicated Button)
        // ===============================================
// TMDB SEARCH CARD (separate from TMDB home rows)
// NOTE: we already have a createTmdbCard() used by the TMDB home rows below.
// This one is dedicated to the Search tab to avoid name collisions.
function createTmdbSearchCard(type, item) {
    const div = document.createElement('div');
    div.className = 'card';

    const title = item.title || item.name || '';
    div.innerHTML = `<img src="https://image.tmdb.org/t/p/w342${item.poster_path}" loading="lazy" alt="${title}">`;

    div.onclick = () => {
        if (type === 'movie') window.location.href = `movie.html?${item.id}`;
        else window.location.href = `show.html?${item.id}`;
    };
    return div;
}

        async function doSearch(pageNumber, isNewSearch) {
            const q = document.getElementById('search-input').value.trim();
            const lang = document.getElementById('lang-select').value;
            const grid = document.getElementById('search-results');
            const loadMoreBtn = document.getElementById('load-more-search');

            if (q.length < 1) {
                grid.innerHTML = '<p style="color:#777; width:100%; text-align:center; padding: 20px 0;">Enter at least 1 character to search.</p>';
                loadMoreBtn.classList.add('visually-hidden');
                return;
            }

            if (isNewSearch) {
                // Start new search
                searchState.query = q;
                searchState.lang = lang;
                searchState.page = 1;
                searchState.hasMore = false;
                grid.innerHTML = ''; // Clear old results
                setLoading('search-results', true, false);
                loadMoreBtn.classList.add('visually-hidden');
            } else {
                // Load more
                setLoadMoreBtnLoading(loadMoreBtn, true);
            }

            try {
                
                if (searchState.lang === 'tmdb') {
                    const movieUrl = `${TMDB_BASE}/search/movie?api_key=${API_KEY}&query=${encodeURIComponent(searchState.query)}&page=${pageNumber}&include_adult=false`;
                    const tvUrl = `${TMDB_BASE}/search/tv?api_key=${API_KEY}&query=${encodeURIComponent(searchState.query)}&page=${pageNumber}&include_adult=false`;

                    const [mr, tr] = await Promise.all([fetch(movieUrl), fetch(tvUrl)]);
                    const [md, td] = await Promise.all([mr.json(), tr.json()]);

                    if (isNewSearch) grid.innerHTML = ''; // Clear "Loading..."

                    const movieResults = (md.results || []).filter(x => x && x.poster_path);
                    const tvResults = (td.results || []).filter(x => x && x.poster_path);

                    // Section headers only on new search OR first page
                    if (pageNumber === 1) {
                        if (movieResults.length) {
                            const h = document.createElement('div');
                            h.style.cssText = 'grid-column:1/-1;color:#bbb;font-weight:600;margin:8px 2px 0;';
                            h.textContent = 'Movies';
                            grid.appendChild(h);
                        }
                        movieResults.forEach(item => grid.appendChild(createTmdbSearchCard('movie', item)));

                        if (tvResults.length) {
                            const h2 = document.createElement('div');
                            h2.style.cssText = 'grid-column:1/-1;color:#bbb;font-weight:600;margin:12px 2px 0;';
                            h2.textContent = 'TV Shows';
                            grid.appendChild(h2);
                        }
                        tvResults.forEach(item => grid.appendChild(createTmdbSearchCard('tv', item)));
                    } else {
                        // Load more: append to the end without repeating headers
                        movieResults.forEach(item => grid.appendChild(createTmdbSearchCard('movie', item)));
                        tvResults.forEach(item => grid.appendChild(createTmdbSearchCard('tv', item)));
                    }

                    // Pagination
                    const movieHasMore = (md.total_pages || 0) > pageNumber;
                    const tvHasMore = (td.total_pages || 0) > pageNumber;
                    searchState.page = pageNumber;
                    searchState.hasMore = movieHasMore || tvHasMore;

                    if (!movieResults.length && !tvResults.length && isNewSearch) {
                        grid.innerHTML = `<p style="color:#777; width:100%; text-align:center;">No results found for "${q}" in TMDB.</p>`;
                    }

                    return; // Skip non-TMDB backend search
                }

const url = `${API_BASE}/search/${searchState.lang}?q=${encodeURIComponent(searchState.query)}&page=${pageNumber}`;
                const r = await fetch(url);
                const d = await r.json();

                if (isNewSearch) grid.innerHTML = ''; // Clear "Loading..."

                if(d.movies && d.movies.length > 0) {
                    d.movies.forEach(m => {
                        grid.appendChild(createCard(m));
                    });
                    
                    // Update state and pagination
                    searchState.page = pageNumber;
                    searchState.hasMore = d.has_more || false;
                } else if (isNewSearch) {
                    grid.innerHTML = `<p style="color:#777; width:100%; text-align:center;">No results found for "${q}" in ${lang}.</p>`;
                }
            } catch(e) {
                if (isNewSearch) grid.innerHTML = '<p style="color:red; width:100%; text-align:center;">Search failed.</p>';
            } finally {
                setLoadMoreBtnLoading(loadMoreBtn, false);
                if(searchState.hasMore) {
                    loadMoreBtn.classList.remove('visually-hidden');
                } else {
                    loadMoreBtn.classList.add('visually-hidden');
                }
            }
        }


        // ===============================================
        // BANNER & HOME ROWS LOGIC
        // ===============================================
        async function initBanner() {
            const allMovies = [...tamilData.movies, ...hindiData.movies, ...malayalamData.movies, ...teluguData.movies];
            const shuffled = allMovies.sort(() => 0.5 - Math.random());
            tryBanner(shuffled, 0);
        }

        async function tryBanner(moviesList, index) {
            if (index >= moviesList.length || index > 10) return; 

            const movie = moviesList[index];
            try {
                const s = await fetch(`${TMDB_BASE}/search/movie?api_key=${API_KEY}&query=${encodeURIComponent(movie.title)}`);
                const sd = await s.json();
                const tmdbItem = sd.results && sd.results[0];

                if(tmdbItem && tmdbItem.backdrop_path) {
                    const l = await fetch(`${TMDB_BASE}/movie/${tmdbItem.id}/images?api_key=${API_KEY}&include_image_language=en,null`);
                    const ld = await l.json();
                    const logo = ld.logos.find(img => img.iso_639_1 === 'en') || ld.logos[0];

                    if(logo) {
                        renderBanner(tmdbItem, logo, movie.page_url);
                    } else {
                        // Skip if no logo/banner
                        tryBanner(moviesList, index + 1);
                    }
                } else {
                    tryBanner(moviesList, index + 1);
                }
            } catch(e) {
                tryBanner(moviesList, index + 1);
            }
        }

        function renderBanner(item, logo, originalUrl) {
            const finalUrl = getRedirectUrl(originalUrl);
            const bg = `https://image.tmdb.org/t/p/original${item.backdrop_path}`;
            const logoUrl = `https://image.tmdb.org/t/p/w500${logo.file_path}`;

            document.getElementById('hero-bg').style.backgroundImage = `url('${bg}')`;
            document.getElementById('hero-logo-container').innerHTML = `<img src="${logoUrl}" class="hero-logo" alt="${item.title} Logo">`;
            
            const heroLink = document.getElementById('hero-link');
            heroLink.href = finalUrl;
            heroLink.classList.remove('visually-hidden');
        }
        
        function renderRows(append = false) {
            const rowData = [
                ['row-tamil', tamilData.movies],
                ['row-malayalam', malayalamData.movies],
                ['row-hindi', hindiData.movies],
                ['row-telugu', teluguData.movies]
            ];
            
            rowData.forEach(([id, list]) => {
                const el = document.getElementById(id);
                // The refresh button simulates loading the next page (whilst still showing the previous one)
                // We achieve this by appending the entire list again to show 'more content'
                const contentToRender = append ? list : list;
                contentToRender.forEach(item => el.appendChild(createCard(item)));
            });
        }

// ===============================================
// INIT & EVENT LISTENERS
// ===============================================
async function init() {
    renderRows(false); // Initial render
    initBanner();
    setupAutoSearch();

    // API Wakeup Call
    try {
        const response = await fetch('https://thirai-watch.onrender.com');
        const status = await response.text();
        console.log("api reading:", status.trim()); // Should log "ok"
    } catch (error) {
        console.error("api reading:", error);
    }
}

        window.addEventListener('scroll', () => {
            const h = document.getElementById('main-header');
            if(window.scrollY > 50) h.classList.add('scrolled');
            else h.classList.remove('scrolled');
        });

        init();
    </script>

<script>
let deferredPrompt;
const installBtn = document.getElementById('btm-install');

window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  installBtn.classList.remove('visually-hidden');

  installBtn.onclick = async () => {
    installBtn.classList.add('visually-hidden');
    deferredPrompt.prompt();
    await deferredPrompt.userChoice;
    deferredPrompt = null;
  };
});

window.addEventListener('appinstalled', () => {
  installBtn.classList.add('visually-hidden');
});

if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/static/service-worker.js');
  });
}
</script>


<script>
(function () {
    const CACHE_KEY = 'thirai_continue_watching';


    function updateContinueTitle() {
        const title = document.getElementById('cw-title');
        if (!title) return;
        const isLandscape = window.matchMedia && window.matchMedia('(orientation: landscape)').matches;
        title.textContent = isLandscape ? 'Continue' : 'Continue';
    }

    function renderContinueWatching() {
        const row = document.getElementById('continue-watching-row');
        const title = document.getElementById('cw-title');
        if (!row || !title) return;


        updateContinueTitle();
        let items = [];
        try {
            items = JSON.parse(localStorage.getItem(CACHE_KEY)) || [];
        } catch {}

        row.innerHTML = '';

        if (!items.length) {
            row.classList.add('visually-hidden');
            title.classList.add('visually-hidden');
            return;
        }

        title.classList.remove('visually-hidden');
        row.classList.remove('visually-hidden');

        items.forEach((item, index) => {
            if (!item.url || !item.img) return;

            const card = document.createElement('div');
            card.className = 'card';

            card.innerHTML = `
                <img src="${item.img}" alt="${item.title || ''}">
                <div class="remove-watch-item">&times;</div>
            `;

            card.onclick = () => {
                window.location.href = item.url;
            };

            card.querySelector('.remove-watch-item').onclick = (e) => {
                e.stopPropagation();
                removeItem(index);
            };

            row.appendChild(card);
        });
    }

    function removeItem(index) {
        let items = JSON.parse(localStorage.getItem(CACHE_KEY)) || [];
        items.splice(index, 1);
        localStorage.setItem(CACHE_KEY, JSON.stringify(items));
        renderContinueWatching();
    }

    document.addEventListener('DOMContentLoaded', renderContinueWatching);

    document.addEventListener('DOMContentLoaded', updateContinueTitle);
    window.addEventListener('resize', updateContinueTitle);
    window.addEventListener('orientationchange', updateContinueTitle);
})();
</script>

<script>
/* ================================
   HOME MOVIES OVERRIDE (CACHE)
   This overrides ONLY home rows
================================ */
const HOME_LANGS = [
  { id: "row-tamil", lang: "tamil", title: "Tamil" },
  { id: "row-malayalam", lang: "malayalam", title: "Malayalam" },
  { id: "row-hindi", lang: "hindi", title: "Hindi" },
  { id: "row-telugu", lang: "telugu", title: "Telugu" },
  { id: "row-punjabi", lang: "punjabi", title: "Punjabi" },
  { id: "row-marathi", lang: "marathi", title: "Marathi" },
  { id: "row-kannada", lang: "kannada", title: "Kannada" },
  { id: "row-bengali", lang: "bengali", title: "Bengali" }
];

function ensureRow(id, title) {
  let row = document.getElementById(id);
  if (!row) {
    const h = document.createElement("div");
    h.className = "section-title";
    h.textContent = title;

    row = document.createElement("div");
    row.className = "row-container";
    row.id = id;

    document.querySelector("#view-home").appendChild(h);
    document.querySelector("#view-home").appendChild(row);
  }
  row.innerHTML = "";
  return row;
}

async function loadHomeFromCache() {
  for (const cfg of HOME_LANGS) {
    const row = ensureRow(cfg.id, cfg.title);
    try {
      const r = await fetch(`/cache/${cfg.lang}popular.json`);
      const d = await r.json();

      (d.movies || []).forEach(item => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `<img src="${item.img_url}" loading="lazy" alt="${item.title}">`;
        card.onclick = () => window.location.href = getRedirectUrl(item.page_url);
        row.appendChild(card);
      });
    } catch (e) {
      console.error("Failed loading", cfg.lang, e);
    }
  }
}



// ===============================================
// TMDB HOME ROWS (Premium / isUnlocked)
// - Hidden by default
// - Shown only if localStorage.isUnlocked === true (also supports "true")
// - Uses /movie/popular and /tv/popular
// - Clicking cards goes to movie.html?{tmdbId} / show.html?{tmdbId}
// ===============================================
function isTmdbUnlocked() {
  // localStorage values are usually strings; support both boolean and "true"
  return (localStorage.isUnlocked === true || localStorage.isUnlocked === 'true');
}

// Hide TMDB from the search language selector unless unlocked
function applyTmdbSearchVisibility() {
  const sel = document.getElementById('lang-select');
  if (!sel) return;

  const unlocked = isTmdbUnlocked();
  const tmdbOpt = sel.querySelector('option[value="tmdb"]');

  if (!unlocked) {
    if (tmdbOpt) tmdbOpt.remove();
    // If somehow TMDB was selected via cached state/URL, fall back to first option
    if (sel.value === 'tmdb') sel.selectedIndex = 0;
  }
}

// Run now if DOM is ready, otherwise on DOMContentLoaded
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', applyTmdbSearchVisibility);
} else {
  applyTmdbSearchVisibility();
}


function showTmdbHomeRows(show) {
  const movieTitle = document.getElementById('tmdb-movies-title');
  const movieRow = document.getElementById('row-tmdb-movies');
  const tvTitle = document.getElementById('tmdb-tv-title');
  const tvRow = document.getElementById('row-tmdb-tv');

  [movieTitle, movieRow, tvTitle, tvRow].forEach(el => {
    if (!el) return;
    if (show) el.classList.remove('visually-hidden');
    else el.classList.add('visually-hidden');
  });
}

function createTmdbCard(posterPath, altText, onClick) {
  const div = document.createElement('div');
  div.className = 'card';
  div.innerHTML = `<img src="https://image.tmdb.org/t/p/w342${posterPath}" loading="lazy" alt="${altText || ''}">`;
  div.onclick = onClick;
  return div;
}

async function loadTmdbPopular(endpoint, rowId, type) {
  const row = document.getElementById(rowId);
  if (!row) return;

  row.innerHTML = '';
  try {
    const r = await fetch(`${TMDB_BASE}${endpoint}?api_key=${API_KEY}`);
    const d = await r.json();

    const results = (d && d.results) ? d.results : [];
    results.forEach(item => {
      if (!item || !item.id || !item.poster_path) return; // hide items with no poster
      const title = item.title || item.name || '';
      const card = createTmdbCard(item.poster_path, title, () => {
        if (type === 'movie') window.location.href = `movie.html?${item.id}`;
        else window.location.href = `show.html?${item.id}`;
      });
      row.appendChild(card);
    });
  } catch (e) {
    console.error('Failed loading TMDB', endpoint, e);
  }
}

async function loadTmdbHomeRows() {
  if (!isTmdbUnlocked()) {
    showTmdbHomeRows(false);
    return;
  }
  showTmdbHomeRows(true);
  await Promise.all([
    loadTmdbPopular('/movie/popular', 'row-tmdb-movies', 'movie'),
    loadTmdbPopular('/tv/popular', 'row-tmdb-tv', 'tv')
  ]);
}
/* Run AFTER existing init */
window.addEventListener("load", () => {
  setTimeout(async () => {
    try {
      const tasks = [];
      if (typeof loadHomeFromCache === "function") tasks.push(loadHomeFromCache());
      if (typeof loadTmdbHomeRows === "function") tasks.push(loadTmdbHomeRows());
      if (tasks.length) {
        await Promise.allSettled(tasks);
      }
    } finally {
      if (typeof window.hideLoadingOverlay === "function") {
        window.hideLoadingOverlay();
      } else {
        const overlay = document.getElementById("loadingOverlay");
        if (overlay) overlay.style.display = "none";
      }
    }
  }, 500);
});
// data-lang-category-handler
        document.addEventListener('click', (e) => {
            const btn = e.target.closest('.section-arrow');
            if (!btn) return;
            const lang = btn.getAttribute('data-lang');
            const category = btn.getAttribute('data-category') || 'recent';
            if (!lang) return;
            e.preventDefault();
            e.stopPropagation();
            try { openLanguageCategory(lang, category); } catch(err) { console.error(err); }
        }, true);
    
</script>


<script>
/* Force scroll to top when switching views */
function scrollToTopInstant() {
  document.documentElement.scrollTop = 0;
  document.body.scrollTop = 0;
}

/* Wrap openView if it exists */
if (typeof window.openView === "function") {
  const originalOpenView = window.openView;
  window.openView = function(...args) {
    originalOpenView.apply(this, args);
    scrollToTopInstant();
  };
}

/* Handle navigation clicks */
document.addEventListener("click", function(e) {
  const btn = e.target.closest('[data-view], .nav-item, .menu-item, .collections-btn, .home-btn, .search-btn');
  if (btn) {
    setTimeout(scrollToTopInstant, 50);
  }
});

/* Handle history navigation */
const originalPushState = history.pushState;
history.pushState = function(...args) {
  originalPushState.apply(this, args);
  scrollToTopInstant();
};

/* On page load */
window.addEventListener("load", scrollToTopInstant);
</script>


<script id="continue-watching-remove-script">
function renderContinueWatching() {
  const row = document.getElementById('continue-watching-row');
  const title = document.getElementById('cw-title');

  if (!row || !title) return;

  let data = JSON.parse(localStorage.getItem('thirai_continue_watching') || '[]');

  if (!data.length) {
    row.classList.add('visually-hidden');
    title.classList.add('visually-hidden');
    row.innerHTML = '';
    return;
  }

  row.classList.remove('visually-hidden');
  title.classList.remove('visually-hidden');

  row.innerHTML = '';

  data.forEach((item, index) => {
    const card = document.createElement('div');
    card.className = 'card';

    card.innerHTML = `
      <img src="${item.img}" alt="${item.title || ''}">
      <button class="remove-watch-item">&times;</button>
    `;

    card.querySelector('img').onclick = () => {
      window.location.href = item.link;
    };

    card.querySelector('.remove-watch-item').onclick = (e) => {
      e.stopPropagation();
      data.splice(index, 1);
      localStorage.setItem('thirai_continue_watching', JSON.stringify(data));
      renderContinueWatching();
    };

    row.appendChild(card);
  });
}

// Auto-run when page loads
document.addEventListener("DOMContentLoaded", renderContinueWatching);
</script>


<script id="prevent-flash-fix-script">
(() => {
  const wrapper = document.querySelector('#view-home .home-content-wrapper');
  if (!wrapper) return;

  // If loadHomeFromCache exists, wrap it so we reveal rows only after it finishes (success or failure).
  const orig = window.loadHomeFromCache;
  if (typeof orig === 'function') {
    window.loadHomeFromCache = async function(...args) {
      try {
        return await orig.apply(this, args);
      } finally {
        wrapper.style.visibility = 'visible';
      }
    };
  } else {
    // Fallback: never keep the page blank if the function isn't present for some reason.
    window.addEventListener('DOMContentLoaded', () => {
      wrapper.style.visibility = 'visible';
    });
  }
})();
</script>



<script id="global-loading-overlay-script">
(function(){
  function hideLoadingOverlay(){
    const overlay = document.getElementById("loadingOverlay");
    if (!overlay) return;
    overlay.style.opacity = "0";
    setTimeout(() => { overlay.style.display = "none"; }, 500);
  }

  // Slow network hint (only meaningful while overlay is visible)
  setTimeout(() => {
    const overlay = document.getElementById("loadingOverlay");
    const slowMsg = document.getElementById("slowNetworkMessage");
    if (overlay && slowMsg && overlay.style.display !== "none") {
      slowMsg.style.display = "flex";
    }
  }, 4000);

  // Expose for other scripts if needed
  window.hideLoadingOverlay = hideLoadingOverlay;

  // IMPORTANT: We do NOT hide on window load.
  // The overlay is hidden after the Home rows finish loading.
})();
</script>


<!-- Backup Hero Banner Script (ONLY used if TMDB fails) -->
<script>
const HERO_FALLBACK = [
  {
    title: "Mersal",
    logo: "https://image.tmdb.org/t/p/original/udsF8gnPdklZGj74wDBgPSTklkg.png",
    background: "https://image.tmdb.org/t/p/original/rx9kyO6YJLpXfFrU934C6i4yYMj.jpg",
    link: "/watch.html?film=3QoX"
  },
  {
    title: "Papanasam",
    logo: "https://image.tmdb.org/t/p/w500/49Z8fKeYm0DMpdYM8VkP875KiBi.png",
    background: "https://image.tmdb.org/t/p/original/e6WQoHeD1lomknxc0a65Ae1sfVw.jpg",
    link: "/mobile/watch?film=2691"
  }
];

function setHeroBanner(item) {
  const bg = document.getElementById("hero-bg");
  const logoContainer = document.getElementById("hero-logo-container");
  const link = document.getElementById("hero-link");

  if (!bg || !logoContainer || !link) return;

  bg.style.backgroundImage = `url('${item.background}')`;
  logoContainer.innerHTML = `<img src="${item.logo}" class="hero-logo" alt="${item.title}">`;
  link.href = item.link;
  link.classList.remove("visually-hidden");
}

// Wrap original loadHero safely
const originalLoadHero = window.loadHero;

window.loadHero = async function() {
  try {
    if (typeof originalLoadHero === "function") {
      await originalLoadHero();
    } else {
      throw new Error("Original hero loader missing");
    }
  } catch (e) {
    console.warn("TMDB hero failed, using backup hero", e);
    const fallback = HERO_FALLBACK[Math.floor(Math.random() * HERO_FALLBACK.length)];
    setHeroBanner(fallback);
  }
};

// Safety fallback if nothing loads after 3 seconds
setTimeout(() => {
  const bg = document.getElementById("hero-bg");
  if (!bg || !bg.style.backgroundImage) {
    const fallback = HERO_FALLBACK[Math.floor(Math.random() * HERO_FALLBACK.length)];
    setHeroBanner(fallback);
  }
}, 3000);
</script>


<style id="cw-and-layout-fixes">
/* FIX: prevent hero from pulling content under header */
.hero{
  margin-bottom: 0 !important;
}

/* FIX: ensure home sections sit below header */
#view-home .home-content-wrapper{
  padding-top: 18px !important;
  margin-top: 0 !important;
}
</style>

<script id="continue-watching-unified-fix">
(() => {
  const CACHE_KEY = 'thirai_continue_watching';

  function readItems() {
    let items = [];
    try { items = JSON.parse(localStorage.getItem(CACHE_KEY)) || []; } catch {}

    let changed = false;
    items = items.map(it => {
      if (it && !it.url && it.link) { it.url = it.link; changed = true; }
      return it;
    });

    if (changed) localStorage.setItem(CACHE_KEY, JSON.stringify(items));

    return items.filter(it => it && it.img && (it.url || it.link));
  }

  function writeItems(items) {
    localStorage.setItem(CACHE_KEY, JSON.stringify(items || []));
  }

  function renderContinueWatching() {
    const row = document.getElementById('continue-watching-row');
    const title = document.getElementById('cw-title');
    if (!row || !title) return;

    const items = readItems();

    row.innerHTML = '';
    if (!items.length) {
      row.classList.add('visually-hidden');
      title.classList.add('visually-hidden');
      return;
    }

    row.classList.remove('visually-hidden');
    title.classList.remove('visually-hidden');

    items.forEach((item, index) => {
      const card = document.createElement('div');
      card.className = 'card';

      card.innerHTML = `
        <img src="${item.img}" alt="${item.title || ''}">
        <button class="remove-watch-item" type="button">&times;</button>
      `;

      card.onclick = () => {
        const href = item.url || item.link;
        if (!href) return;
        window.location.href = href;
      };

      card.querySelector('.remove-watch-item').onclick = (e) => {
        e.stopPropagation();
        const next = readItems();
        next.splice(index, 1);
        writeItems(next);
        renderContinueWatching();
      };

      row.appendChild(card);
    });
  }

  document.addEventListener('DOMContentLoaded', renderContinueWatching);
})();
</script>


<script id="home-row-arrows-js">
(function(){
  function makeBtn(dir){
    const btn = document.createElement('button');
    btn.type = 'button';
    btn.className = 'row-nav ' + (dir === 'prev' ? 'row-prev' : 'row-next');
    btn.setAttribute('aria-label', dir === 'prev' ? 'Scroll left' : 'Scroll right');
    btn.innerHTML = dir === 'prev'
      ? '<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M15.5 19.5L8 12l7.5-7.5" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/></svg>'
      : '<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M8.5 4.5L16 12l-7.5 7.5" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/></svg>';
    return btn;
  }

  function needsOverflow(el){
    return (el.scrollWidth - el.clientWidth) > 6;
  }

  function initOneRow(row){
    if (!row || row.dataset.arrowsInit === '1') return;
    row.dataset.arrowsInit = '1';

    // wrap the row so arrows can overlay cleanly
    const wrap = document.createElement('div');
    wrap.className = 'row-wrap';
    row.parentNode.insertBefore(wrap, row);
    wrap.appendChild(row);

    const prev = makeBtn('prev');
    const next = makeBtn('next');
    wrap.appendChild(prev);
    wrap.appendChild(next);

    function scrollByAmount(sign){
      const amount = Math.max(240, Math.floor(row.clientWidth * 0.85));
      row.scrollBy({ left: sign * amount, behavior: 'smooth' });
    }

    prev.addEventListener('click', () => scrollByAmount(-1));
    next.addEventListener('click', () => scrollByAmount( 1));

    let raf = 0;
    function update(){
      cancelAnimationFrame(raf);
      raf = requestAnimationFrame(() => {
        const overflow = needsOverflow(row);
        wrap.classList.toggle('has-overflow', overflow);

        if (!overflow){
          prev.classList.remove('is-visible');
          next.classList.remove('is-visible');
          return;
        }

        const max = row.scrollWidth - row.clientWidth;
        const left = row.scrollLeft;

        // show/hide based on position
        if (left > 6){
          prev.classList.add('is-visible');
          wrap.classList.add('can-scroll-left');
        } else {
          prev.classList.remove('is-visible');
          wrap.classList.remove('can-scroll-left');
        }

        if (left < max - 6){
          next.classList.add('is-visible');
          wrap.classList.add('can-scroll-right');
        } else {
          next.classList.remove('is-visible');
          wrap.classList.remove('can-scroll-right');
        }
      });
    }

    row.addEventListener('scroll', update, { passive: true });
    window.addEventListener('resize', update);

    // initial + after images load
    update();
    setTimeout(update, 350);
    setTimeout(update, 900);
  }

  function initHomeRowArrows(){
    const home = document.getElementById('view-home');
    if (!home) return;

    // language/category rows on home (exclude continue-watching which can be hidden)
    const rows = home.querySelectorAll('.home-content-wrapper .row-container');
    rows.forEach(r => initOneRow(r));
  }

  // run after DOM ready
  if (document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', initHomeRowArrows);
  } else {
    initHomeRowArrows();
  }

  // also re-run whenever tab switches (in case home rows re-render)
  const _origSwitchTab = window.switchTab;
  if (typeof _origSwitchTab === 'function'){
    window.switchTab = function(){
      const res = _origSwitchTab.apply(this, arguments);
      // allow any render to finish
      setTimeout(() => {
        try{ initHomeRowArrows(); }catch(e){}
      }, 50);
      return res;
    }
  }
})();
</script>


<script id="watch-party-popup-script">
/* ===============================================
   WATCH PARTY POPUP (Join in-place)
   - Mirrors join.html behavior but as a modal
=============================================== */
let wpSocket = null;
let wpCurrentRoomId = "";

function openWatchPartyPopup(){
  const overlay = document.getElementById('watchPartyOverlay');
  if(!overlay) return;

  // Close filter popup if open (avoid stacked modals)
  try{ if(typeof filterPopupOpen !== 'undefined' && filterPopupOpen) toggleFilterPopup(); }catch(e){}

  overlay.classList.add('active');
  document.body.style.overflow = 'hidden';
  resetWatchPartyUI(true);

  // connect socket lazily
  try{
    if(!wpSocket){
      wpSocket = io("https://watchpartybackend-b5a2.onrender.com", { transports: ["websocket", "polling"] });
      wireWatchPartySocket();
    }
  }catch(err){
    console.warn("Watch Party socket init failed", err);
  }

  // focus first input
  const first = overlay.querySelector('.wp-code');
  if(first) first.focus();
}

function closeWatchPartyPopup(){
  const overlay = document.getElementById('watchPartyOverlay');
  if(!overlay) return;
  overlay.classList.remove('active');
  document.body.style.overflow = '';

  // disconnect to avoid leaking listeners (match join.html behavior)
  try{
    if(wpSocket){
      wpSocket.disconnect();
      wpSocket = null;
    }
  }catch(e){}
  wpCurrentRoomId = "";
}

function closeWatchPartyOnOutsideClick(e){
  const card = document.querySelector('#watchPartyOverlay .watchparty-card');
  if(card && !card.contains(e.target)){
    closeWatchPartyPopup();
  }
}

document.addEventListener('keydown', (e) => {
  if(e.key === 'Escape'){
    const overlay = document.getElementById('watchPartyOverlay');
    if(overlay && overlay.classList.contains('active')) closeWatchPartyPopup();
  }
});

function resetWatchPartyUI(clearInputs){
  const codeView = document.getElementById('wpCodeView');
  const lobby = document.getElementById('wpLobby');
  const loading = document.getElementById('wpLoading');
  const err = document.getElementById('wpError');
  const checkBtn = document.getElementById('wpCheckBtn');
  const joinBtn = document.getElementById('wpJoinBtn');
  const nickname = document.getElementById('wpNickname');
  const inputs = document.querySelectorAll('#watchPartyOverlay .wp-code');

  if(codeView) codeView.style.display = 'block';
  if(lobby) lobby.style.display = 'none';
  if(loading) loading.style.display = 'none';
  if(err) err.style.display = 'none';
  if(checkBtn) checkBtn.disabled = true;
  if(joinBtn) joinBtn.disabled = true;
  if(nickname) nickname.value = '';

  if(clearInputs){
    inputs.forEach(i => i.value = '');
  }
}

function formatWpTime(s){
  if(!s && s !== 0) return "";
  const m = Math.floor(s / 60);
  const rs = Math.floor(s % 60);
  return `Host is at ${m.toString().padStart(2,'0')}:${rs.toString().padStart(2,'0')}`;
}

function wireWatchPartySocket(){
  if(!wpSocket) return;

  wpSocket.on('user-list', (users) => {
    const list = document.getElementById('wpUserList');
    if(!list) return;
    const realUsers = (users || []).filter(u => u && u.name !== "Preview_User");
    if(realUsers.length === 0){
      list.innerHTML = '<div style="text-align:center; color:rgba(255,255,255,0.55); font-size:0.82rem; padding:8px 0;">Waiting for others…</div>';
    }else{
      list.innerHTML = realUsers.map(u => `
        <div class="wp-user">
          <i class="fas fa-user-circle" aria-hidden="true"></i>
          <span>${escapeHtml(u.name)} ${u.isHost ? '<b style="color:#ffd86b; font-size:0.72rem; margin-left:4px;">HOST</b>' : ''}</span>
        </div>
      `).join('');
    }
  });
}

function escapeHtml(str){
  return String(str ?? '').replace(/[&<>"']/g, (m) => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
}

// Input behavior (auto-advance, paste, enable buttons)
(function initWatchPartyInputs(){
  const overlay = document.getElementById('watchPartyOverlay');
  if(!overlay) return;
  const inputs = overlay.querySelectorAll('.wp-code');
  const checkBtn = document.getElementById('wpCheckBtn');
  const err = document.getElementById('wpError');

  inputs.forEach((input, idx) => {
    input.addEventListener('input', () => {
      if(err) err.style.display = 'none';
      input.value = (input.value || '').toUpperCase().slice(0,1);
      if(input.value && idx < inputs.length - 1) inputs[idx+1].focus();
      if(checkBtn) checkBtn.disabled = Array.from(inputs).some(i => !i.value);
    });

    input.addEventListener('keydown', (e) => {
      if(e.key === 'Backspace' && !input.value && idx > 0) inputs[idx-1].focus();
    });

    input.addEventListener('paste', (e) => {
      e.preventDefault();
      const data = (e.clipboardData.getData('text') || '').toUpperCase().trim();
      const chars = data.split('');
      chars.forEach((ch, i) => {
        if(inputs[idx+i]) inputs[idx+i].value = ch;
      });
      const nextIndex = Math.min(idx + chars.length, inputs.length - 1);
      if(inputs[nextIndex]) inputs[nextIndex].focus();
      if(checkBtn) checkBtn.disabled = Array.from(inputs).some(i => !i.value);
    });
  });

  if(checkBtn){
    checkBtn.addEventListener('click', () => {
      const code = Array.from(inputs).map(i => i.value).join('');
      handleWpCodeSearch(code);
    });
  }

  const nickname = document.getElementById('wpNickname');
  const joinBtn = document.getElementById('wpJoinBtn');
  if(nickname && joinBtn){
    nickname.addEventListener('input', () => {
      joinBtn.disabled = nickname.value.trim().length < 1;
    });
    joinBtn.addEventListener('click', () => {
      const name = encodeURIComponent(nickname.value.trim());
      // ensure socket closes before redirect
      try{ if(wpSocket){ wpSocket.disconnect(); wpSocket = null; } }catch(e){}
      window.location.href = `gurcher.html?join=${encodeURIComponent(wpCurrentRoomId)}&name=${name}`;
    });
  }
})();

function handleWpCodeSearch(roomId){
  const codeView = document.getElementById('wpCodeView');
  const lobby = document.getElementById('wpLobby');
  const loading = document.getElementById('wpLoading');
  const err = document.getElementById('wpError');
  const inputs = document.querySelectorAll('#watchPartyOverlay .wp-code');

  wpCurrentRoomId = (roomId || '').toUpperCase();

  if(err) err.style.display = 'none';
  if(codeView) codeView.style.display = 'none';
  if(lobby) lobby.style.display = 'none';
  if(loading){ loading.style.display = 'flex'; }

  // Ensure socket exists
  if(!wpSocket){
    try{
      wpSocket = io("https://watchpartybackend-b5a2.onrender.com", { transports: ["websocket", "polling"] });
      wireWatchPartySocket();
    }catch(e){
      showWpError();
      return;
    }
  }

  // safety timeout (like join.html)
  const timeout = setTimeout(() => {
    if(lobby && lobby.style.display !== 'block'){
      showWpError();
    }
  }, 6500);

  try{
    wpSocket.emit('join-room', { roomId: wpCurrentRoomId, userName: "Preview_User" });

    wpSocket.once('joined-room', async (data) => {
      clearTimeout(timeout);
      if(data && data.movieUrl){
        await processWpRoomData(data);
      }else{
        showWpError();
      }
    });
  }catch(e){
    clearTimeout(timeout);
    showWpError();
  }

  function showWpError(){
    if(loading) loading.style.display = 'none';
    if(codeView) codeView.style.display = 'block';
    if(err) err.style.display = 'block';
    inputs.forEach(i => i.value = '');
    if(inputs[0]) inputs[0].focus();
  }
}

async function processWpRoomData(data){
  const posterEl = document.getElementById('wpPoster');
  const titleEl = document.getElementById('wpTitle');
  const statusEl = document.getElementById('wpStatus');
  const loading = document.getElementById('wpLoading');
  const lobby = document.getElementById('wpLobby');

  // Find film code from URL patterns used by backend
  const url = data.movieUrl || '';
  const filmMatch = url.match(/film=([^&]+)/) || url.match(/watch\/(\d+)/);
  const filmCode = filmMatch ? filmMatch[1] : null;

  if(statusEl) statusEl.textContent = formatWpTime(data.time);

  if(filmCode){
    try{
      const res = await fetch(`https://api.thirai.me/watch?url=https://einthusan.tv/movie/watch/${filmCode}/?lang=tamil`);
      const meta = await res.json();

      if(posterEl) posterEl.src = meta.img_url || '';
      if(posterEl) posterEl.alt = meta.title || 'Movie poster';
      if(titleEl) titleEl.textContent = meta.title || 'Movie Session';
    }catch(e){
      if(titleEl) titleEl.textContent = 'Movie Session';
    }
  }else{
    if(titleEl) titleEl.textContent = 'Movie Session';
  }

  if(loading) loading.style.display = 'none';
  if(lobby) lobby.style.display = 'block';
  const nick = document.getElementById('wpNickname');
  if(nick) nick.focus();
}
</script>




<!-- =======================
     Thirai Account System (Supabase)
     FIXES:
     - Continue Watching syncs to account (mirrors any localStorage updates to DB when logged in)
     - Display name is taken from profiles.display_name (no name field on login)
     - Account chip shows name only when logged in; otherwise shows "Sign in"
     - Click name opens menu; menu contains TMDB toggle + Edit name + Sign out
     - TMDB enable uses premium_fixed-style PIN gate; state stored in profiles.tmdb_unlocked (account-based)
     - Crown icon shows when TMDB enabled
     - Sign out reliability improved (menu click propagation fixed)
     NOTE: Replace SUPABASE_URL + SUPABASE_ANON_KEY with your project values.
     DB REQUIREMENT:
       public.profiles(user_id uuid pk, display_name text, tmdb_unlocked boolean default false)
       public.continue_watching(user_id uuid, url text, img text, title text, progress_seconds int, duration_seconds int, updated_at timestamptz)
     ======================= -->
<style>
  #acctDock{position:fixed;top:12px;right:12px;z-index:99999;display:flex;gap:10px;align-items:center}
  #acctChip{
    display:inline-flex;align-items:center;gap:8px;
    padding:8px 10px;border-radius:999px;
    background:rgba(255,255,255,.06);
    border:1px solid rgba(255,255,255,.10);
    font:800 13px/1 Inter,system-ui,sans-serif;color:#fff;
    cursor:pointer; user-select:none;
  }
  #acctChip .muted{color:rgba(255,255,255,.68)}
  #acctChip .crown{display:none}
  #acctMenu{
    position:fixed;top:52px;right:12px;z-index:99999;
    width:min(340px,calc(100vw - 24px));
    background:#0f0f0f;border:1px solid rgba(255,255,255,.12);
    border-radius:16px;box-shadow:0 20px 80px rgba(0,0,0,.55);
    display:none;overflow:hidden;
  }
  #acctMenu .hdr{
    padding:14px 14px 10px;border-bottom:1px solid rgba(255,255,255,.08);
    display:flex;flex-direction:column;gap:4px;
  }
  #acctMenu .hdr .nm{font:900 15px/1.2 Inter,system-ui,sans-serif;color:#fff}
  #acctMenu .hdr .em{font:600 12px/1.2 Inter,system-ui,sans-serif;color:rgba(255,255,255,.55);word-break:break-all}
  #acctMenu .row{padding:12px 14px;display:flex;align-items:center;justify-content:space-between;gap:10px}
  #acctMenu .row + .row{border-top:1px solid rgba(255,255,255,.06)}
  #acctMenu .row .label{display:flex;flex-direction:column;gap:3px}
  #acctMenu .row .label b{font:900 12px/1.1 Inter,system-ui,sans-serif;color:#fff}
  #acctMenu .row .label span{font:600 11px/1.2 Inter,system-ui,sans-serif;color:rgba(255,255,255,.55)}
  #acctMenu .btn{
    background:rgba(255,255,255,.06);
    border:1px solid rgba(255,255,255,.12);
    color:#fff;border-radius:12px;
    padding:10px 12px;font:900 12px/1 Inter,system-ui,sans-serif;
    cursor:pointer; width:100%;
  }
  #acctMenu .btn.danger{border-color:rgba(229,9,20,.55)}
  #acctMenu .btn.white{background:#fff;color:#000;border-color:#fff}
  .sw{position:relative;width:46px;height:26px;flex:0 0 auto}
  .sw input{opacity:0;width:0;height:0}
  .slider{position:absolute;cursor:pointer;inset:0;background:rgba(255,255,255,.14);transition:.2s;border-radius:999px;border:1px solid rgba(255,255,255,.18)}
  .slider:before{content:"";position:absolute;height:20px;width:20px;left:3px;top:50%;transform:translateY(-50%);background:#fff;border-radius:50%;transition:.2s;}
  .sw input:checked + .slider{background:rgba(229,9,20,.55);border-color:rgba(229,9,20,.65)}
  .sw input:checked + .slider:before{transform:translate(20px,-50%)}

  /* Auth modal */
  #authModalBackdrop{position:fixed;inset:0;background:rgba(0,0,0,.68);z-index:99998;display:none}
  #authModal{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);width:min(420px,calc(100vw - 28px));
    background:#0f0f0f;border:1px solid rgba(255,255,255,.12);border-radius:16px;z-index:99999;display:none;
    box-shadow:0 20px 80px rgba(0,0,0,.55)}
  #authModal header{display:flex;justify-content:space-between;align-items:center;padding:14px 14px 8px}
  #authModal header .title{font:900 16px/1.1 Inter,system-ui,sans-serif}
  #authModal header button{background:transparent;border:0;color:#fff;font-size:18px;cursor:pointer;padding:6px}
  #authModal .body{padding:0 14px 14px}
  #authModal label{display:block;color:rgba(255,255,255,.72);font:800 12px/1 Inter,system-ui,sans-serif;margin:10px 0 6px}
  #authModal input{
    width:100%;background:#141414;color:#fff;border:1px solid rgba(255,255,255,.10);border-radius:12px;
    padding:10px 12px;font:700 14px/1.2 Inter,system-ui,sans-serif
  }
  #authModal .row{display:flex;gap:10px;margin-top:12px}
  #authModal .row button{
    flex:1;background:#121212;color:#fff;border:1px solid rgba(255,255,255,.12);border-radius:12px;
    padding:10px 12px;font:900 13px/1 Inter,system-ui,sans-serif;cursor:pointer
  }
  #authModal .row button.primary{border-color:rgba(229,9,20,.55)}
  #authModal .status{margin-top:10px;color:rgba(255,255,255,.7);font:600 12px/1.25 Inter,system-ui,sans-serif}

  /* TMDB enable modal (PIN) */
  #tmdbBackdrop{position:fixed;inset:0;background:rgba(0,0,0,.72);z-index:99998;display:none}
  #tmdbModal{
    position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);
    width:min(520px,calc(100vw - 28px));
    background:#0f0f0f;border:1px solid rgba(255,255,255,.12);border-radius:18px;
    z-index:99999;display:none;box-shadow:0 20px 80px rgba(0,0,0,.55);overflow:hidden
  }
  #tmdbModal .pad{padding:18px}
  #tmdbModal .head{display:flex;align-items:center;gap:12px;margin-bottom:12px}
  #tmdbModal .pillIcon{width:42px;height:42px;border-radius:14px;display:grid;place-items:center;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.10)}
  #tmdbModal h3{margin:0;font:900 16px/1.1 Inter,system-ui,sans-serif}
  #tmdbModal p{margin:6px 0 0;color:rgba(255,255,255,.65);font:600 12px/1.35 Inter,system-ui,sans-serif}
  #tmdbModal .pins{display:flex;justify-content:center;gap:8px;margin:14px 0}
  #tmdbModal .pin{width:44px;height:56px;text-align:center;font:900 22px/1 Inter,system-ui,sans-serif;color:#fff;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);border-radius:12px}
  #tmdbModal .btnPrimary{width:100%;height:46px;border:none;border-radius:14px;background:#fff;color:#000;font:900 13px/1 Inter,system-ui,sans-serif;cursor:pointer}
  #tmdbModal .err{display:none;margin-top:10px;color:#ff6b6b;font:700 12px/1.25 Inter,system-ui,sans-serif;text-align:center}
</style>

<div id="acctDock">
  <div id="acctChip" title="Account">
    <span id="acctName" class="muted">Sign in</span>
    <i id="acctCrown" class="fa-solid fa-crown crown" title="TMDB enabled"></i>
    <i class="fa-solid fa-chevron-down" style="font-size:11px;opacity:.75"></i>
  </div>
</div>

<div id="acctMenu" role="menu" aria-label="Account menu">
  <div class="hdr">
    <div class="nm" id="menuName">—</div>
    <div class="em" id="menuEmail">—</div>
  </div>

  <div class="row">
    <div class="label">
      <b>TMDB Access</b>
      <span>Enable TMDB Movies/TV in Thirai</span>
    </div>
    <label class="sw" aria-label="TMDB toggle">
      <input id="tmdbToggle" type="checkbox" />
      <span class="slider"></span>
    </label>
  </div>

  <div class="row">
    <button class="btn white" id="editNameBtn">Edit display name</button>
  </div>

  <div class="row">
    <button class="btn danger" id="signOutBtn">Sign out</button>
  </div>
</div>

<div id="authModalBackdrop"></div>
<div id="authModal" role="dialog" aria-modal="true" aria-label="Sign in">
  <header>
    <div class="title">Sign in</div>
    <button id="authCloseBtn" aria-label="Close">✕</button>
  </header>
  <div class="body">
    <label>Email</label>
    <input id="authEmail" type="email" autocomplete="email" placeholder="you@example.com" />
    <label>Password</label>
    <input id="authPassword" type="password" autocomplete="current-password" placeholder="••••••••" />
    <div class="row">
      <button id="authLoginBtn" class="primary">Login</button>
      <button id="authSignupBtn">Sign up</button>
    </div>
    <div id="authStatus" class="status"></div>
  </div>
</div>

<div id="tmdbBackdrop"></div>
<div id="tmdbModal" role="dialog" aria-modal="true" aria-label="Enable TMDB">
  <div class="pad">
    <div class="head">
      <div class="pillIcon"><i class="fa-solid fa-lock"></i></div>
      <div>
        <h3>Enter the access code</h3>
        <p>Enable TMDB features for your account.</p>
      </div>
    </div>

    <div class="pins" aria-label="Access code">
      <input class="pin" id="pin1" maxlength="1" inputmode="numeric" autocomplete="off" />
      <input class="pin" id="pin2" maxlength="1" inputmode="numeric" autocomplete="off" />
      <input class="pin" id="pin3" maxlength="1" inputmode="numeric" autocomplete="off" />
      <input class="pin" id="pin4" maxlength="1" inputmode="numeric" autocomplete="off" />
    </div>

    <button class="btnPrimary" id="tmdbUnlockBtn" disabled>Enable TMDB</button>
    <div class="err" id="tmdbErr"></div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const SUPABASE_URL = "https://jgzsjgrlgzzfrvjsuctt.supabase.co";
const SUPABASE_ANON_KEY = "sb_publishable_oMvwF5VI_Upl8GOrnnusdA_y07YJ8Oe";

/* premium_fixed-style gate */
const TMDB_CORRECT_PIN = "1451";
const TMDB_MAX_ATTEMPTS = 5;
const TMDB_LOCKOUT_MS = 15 * 60 * 1000;
const LS_TMDB_ATTEMPTS = "tmdb_attemptCount";
const LS_TMDB_LOCKOUT = "tmdb_lockoutTimestamp";

/* Continue Watching key */
const CW_CACHE_KEY = "thirai_continue_watching";

/* Supabase */
let _sb = null;
function sb(){
  if(_sb) return _sb;
  if(!SUPABASE_URL || SUPABASE_URL.startsWith("PASTE_") || !SUPABASE_ANON_KEY || SUPABASE_ANON_KEY.startsWith("PASTE_")){
    console.warn("[Accounts] Supabase not configured yet. Add SUPABASE_URL + SUPABASE_ANON_KEY.");
    return null;
  }
  _sb = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
  return _sb;
}
async function sbUser(){
  const c = sb(); if(!c) return null;
  const { data } = await c.auth.getUser();
  return data?.user || null;
}
function el(id){ return document.getElementById(id); }
function show(id, on){ const e=el(id); if(e) e.style.display = on ? "block" : "none"; }
function setText(id, t){ const e=el(id); if(e) e.textContent = t; }
function setStatus(msg){ setText("authStatus", msg || ""); }

/* Profiles */
async function ensureProfile(user){
  const c = sb(); if(!c || !user) return;
  await c.from("profiles").upsert({ user_id: user.id });
}
async function getProfile(){
  const c = sb(); if(!c) return null;
  const user = await sbUser(); if(!user) return null;
  const { data, error } = await c.from("profiles").select("display_name, tmdb_unlocked").eq("user_id", user.id).single();
  if(error){ console.warn("[Profiles] ", error.message); return null; }
  return data || null;
}
async function setDisplayName(name){
  const c = sb(); if(!c) return;
  const user = await sbUser(); if(!user) return;
  const nm = String(name||"").trim();
  if(!nm) return;
  const { error } = await c.from("profiles").update({ display_name: nm }).eq("user_id", user.id);
  if(error) console.warn("[Profiles]", error.message);
}
async function setTmdbUnlocked(on){
  const c = sb(); if(!c) return;
  const user = await sbUser(); if(!user) return;
  const { error } = await c.from("profiles").update({ tmdb_unlocked: !!on }).eq("user_id", user.id);
  if(error) console.warn("[TMDB flag]", error.message);
  try { localStorage.isUnlocked = on ? "true" : "false"; } catch {}
}

/* Crown */
function setCrownVisible(on){
  const crown = el("acctCrown");
  if(crown) crown.style.display = on ? "inline-block" : "none";
}

/* Auth modal + menu */
function openAuth(){ show("authModalBackdrop", true); show("authModal", true); setStatus(""); setTimeout(()=>el("authEmail")?.focus(),0); }
function closeAuth(){ show("authModalBackdrop", false); show("authModal", false); }
function openMenu(){ el("acctMenu").style.display = "block"; }
function closeMenu(){ el("acctMenu").style.display = "none"; }
function isMenuOpen(){ return el("acctMenu").style.display === "block"; }

/* Dock refresh */
async function refreshDock(){
  const user = await sbUser();
  if(!user){
    setText("acctName", "Sign in");
    setText("menuName", "—");
    setText("menuEmail", "—");
    setCrownVisible(false);
    closeMenu();
    return;
  }

  const prof = await getProfile();
  const nm = (prof?.display_name || "").trim() || "Account";
  setText("acctName", nm);
  setText("menuName", nm);
  setText("menuEmail", user.email || "");
  const unlocked = !!prof?.tmdb_unlocked;
  el("tmdbToggle").checked = unlocked;
  setCrownVisible(unlocked);
  try { localStorage.isUnlocked = unlocked ? "true" : "false"; } catch {}
}

/* Continue Watching: local <-> account sync */
function readLocalCW(){
  try { return JSON.parse(localStorage.getItem(CW_CACHE_KEY) || "[]") || []; } catch { return []; }
}

let _cwSyncTimer = null;
async function syncCWToAccount(items){
  const c = sb(); if(!c) return;
  const user = await sbUser(); if(!user) return;

  // normalize
  const norm = (items || []).map(it => ({
    url: it.url || it.link,
    img: it.img,
    title: it.title || null,
    progress_seconds: it.progress_seconds ?? null,
    duration_seconds: it.duration_seconds ?? null
  })).filter(it => it.url && it.img);

  // upsert all
  if(norm.length){
    const payload = norm.map(it => ({ ...it, user_id: user.id }));
    const { error } = await c.from("continue_watching").upsert(payload, { onConflict: "user_id,url" });
    if(error) console.warn("[CW upsert]", error.message);
  }

  // delete removed (keep DB in sync with local list)
  const urls = norm.map(x=>x.url);
  const { data: existing, error: selErr } = await c.from("continue_watching").select("url").eq("user_id", user.id);
  if(selErr){ console.warn("[CW select]", selErr.message); return; }
  const toDelete = (existing || []).map(x=>x.url).filter(u => !urls.includes(u));
  if(toDelete.length){
    const { error: delErr } = await c.from("continue_watching").delete().eq("user_id", user.id).in("url", toDelete);
    if(delErr) console.warn("[CW delete]", delErr.message);
  }
}

function scheduleCWAccountSync(items){
  clearTimeout(_cwSyncTimer);
  _cwSyncTimer = setTimeout(()=>syncCWToAccount(items), 400);
}

/* Hook localStorage writes so ANY existing code that updates CW will sync to account */
(function hookLocalStorage(){
  const origSetItem = localStorage.setItem.bind(localStorage);
  localStorage.setItem = function(k, v){
    try{
      if(k === CW_CACHE_KEY){
        const items = JSON.parse(String(v || "[]")) || [];
        scheduleCWAccountSync(items);
      }
    }catch{}
    return origSetItem(k, v);
  };
})();

/* Render CW from account when logged-in, else fallback to whatever the site already renders */
async function fetchCWFromAccount(){
  const c = sb(); if(!c) return null;
  const user = await sbUser(); if(!user) return null;
  const { data, error } = await c
    .from("continue_watching")
    .select("url,img,title,progress_seconds,duration_seconds,updated_at")
    .eq("user_id", user.id)
    .order("updated_at", { ascending: false })
    .limit(30);
  if(error){ console.warn("[CW fetch]", error.message); return []; }
  return (data || []).map(r => ({ url:r.url, img:r.img, title:r.title||"", progress_seconds:r.progress_seconds, duration_seconds:r.duration_seconds }));
}

async function renderCWFromAccountIfLoggedIn(){
  const user = await sbUser();
  if(!user) return; // let site do its normal thing if logged out

  const row = document.getElementById("continue-watching-row");
  const title = document.getElementById("cw-title");
  if(!row || !title) return;

  const items = await fetchCWFromAccount();
  row.innerHTML = "";
  if(!items || !items.length){
    row.classList.add("visually-hidden");
    title.classList.add("visually-hidden");
    return;
  }

  row.classList.remove("visually-hidden");
  title.classList.remove("visually-hidden");

  items.forEach((item, index)=>{
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <img src="${item.img}" alt="${(item.title||"").replace(/"/g,"&quot;")}">
      <button class="remove-watch-item" type="button">&times;</button>
    `;
    card.onclick = ()=>{ if(item.url) window.location.href = item.url; };
    card.querySelector(".remove-watch-item").onclick = async (e)=>{
      e.stopPropagation();
      const c = sb(); if(!c) return;
      const user = await sbUser(); if(!user) return;
      await c.from("continue_watching").delete().eq("user_id", user.id).eq("url", item.url);
      await renderCWFromAccountIfLoggedIn();
    };
    row.appendChild(card);
  });
}

/* Auth actions */
async function loginEmail(){
  const c = sb(); if(!c) return setStatus("Supabase not configured yet.");
  const email = el("authEmail").value.trim();
  const password = el("authPassword").value;
  setStatus("Signing in…");
  const { data, error } = await c.auth.signInWithPassword({ email, password });
  if(error) return setStatus(error.message);
  await ensureProfile(data.user);
  await refreshDock();
  await renderCWFromAccountIfLoggedIn();
  closeAuth();
}
async function signupEmail(){
  const c = sb(); if(!c) return setStatus("Supabase not configured yet.");
  const email = el("authEmail").value.trim();
  const password = el("authPassword").value;
  setStatus("Creating account…");
  const { data, error } = await c.auth.signUp({ email, password });
  if(error) return setStatus(error.message);
  if(data.user) await ensureProfile(data.user);
  setStatus("Check your email to confirm your account, then log in.");
}
async function signOut(){
  const c = sb(); if(!c) return;
  await c.auth.signOut();
  try { localStorage.isUnlocked = "false"; } catch {}
  await refreshDock();
  closeMenu();
}

/* TMDB enable flow (PIN) */
let lockoutTimer = null;
function tmdbIsLockedOut(){
  const ts = localStorage.getItem(LS_TMDB_LOCKOUT);
  if(!ts) return false;
  const now = Date.now();
  const end = parseInt(ts,10) + TMDB_LOCKOUT_MS;
  if(now < end) return true;
  localStorage.removeItem(LS_TMDB_LOCKOUT);
  localStorage.setItem(LS_TMDB_ATTEMPTS, "0");
  return false;
}
function tmdbLockoutMessage(){
  const ts = localStorage.getItem(LS_TMDB_LOCKOUT);
  if(!ts) return "";
  const now = Date.now();
  const end = parseInt(ts,10) + TMDB_LOCKOUT_MS;
  const rem = Math.max(0, end-now);
  const total = Math.ceil(rem/1000);
  const m = Math.floor(total/60);
  const s = total%60;
  return `Too many failed attempts. Try again in ${m}:${String(s).padStart(2,'0')}.`;
}
function tmdbPins(){ return [el("pin1"),el("pin2"),el("pin3"),el("pin4")]; }
function tmdbOpenModal(){
  show("tmdbBackdrop", true); show("tmdbModal", true);
  el("tmdbErr").style.display="none";
  tmdbPins().forEach(i=>i.value="");
  el("tmdbUnlockBtn").disabled = true;
  setTimeout(()=>el("pin1")?.focus(),50);
  tmdbStartLockoutTick();
}
function tmdbCloseModal(){ show("tmdbBackdrop", false); show("tmdbModal", false); tmdbStopLockoutTick(); }
function tmdbStopLockoutTick(){ if(lockoutTimer){ clearInterval(lockoutTimer); lockoutTimer=null; } }
function tmdbStartLockoutTick(){
  tmdbStopLockoutTick();
  if(tmdbIsLockedOut()){
    const err = el("tmdbErr");
    err.textContent = tmdbLockoutMessage();
    err.style.display="block";
    el("tmdbUnlockBtn").disabled = true;
    lockoutTimer = setInterval(()=>{
      if(!tmdbIsLockedOut()){
        tmdbStopLockoutTick();
        err.style.display="none";
        tmdbCheckPins();
      }else{
        err.textContent = tmdbLockoutMessage();
      }
    }, 1000);
  }
}
function tmdbCheckPins(){
  const pins = tmdbPins();
  const allFilled = pins.every(i => i.value && /^\d$/.test(i.value));
  const locked = tmdbIsLockedOut();
  el("tmdbUnlockBtn").disabled = !allFilled || locked;
  if(allFilled && !locked) el("tmdbErr").style.display="none";
}
async function tmdbHandleSuccess(){
  localStorage.setItem(LS_TMDB_ATTEMPTS, "0");
  localStorage.removeItem(LS_TMDB_LOCKOUT);
  await setTmdbUnlocked(true);
  await refreshDock();
  // TMDB rows rely on localStorage.isUnlocked; refresh them if function exists
  try { if(typeof window.applyTmdbSearchVisibility === "function") window.applyTmdbSearchVisibility(); } catch {}
  tmdbCloseModal();
}
function tmdbHandleFailure(){
  let attempts = parseInt(localStorage.getItem(LS_TMDB_ATTEMPTS) || "0", 10);
  attempts++;
  localStorage.setItem(LS_TMDB_ATTEMPTS, String(attempts));
  const err = el("tmdbErr");
  if(attempts >= TMDB_MAX_ATTEMPTS){
    localStorage.setItem(LS_TMDB_LOCKOUT, String(Date.now()));
    err.textContent = `Maximum attempts reached (${TMDB_MAX_ATTEMPTS}). Access locked.`;
    err.style.display = "block";
    el("tmdbUnlockBtn").disabled = true;
    tmdbStartLockoutTick();
  }else{
    err.textContent = `Incorrect code. ${TMDB_MAX_ATTEMPTS - attempts} attempts remaining.`;
    err.style.display = "block";
  }
  tmdbPins().forEach(i=>i.value="");
  el("pin1")?.focus();
  el("tmdbUnlockBtn").disabled = true;
}
async function tmdbUnlockClick(){
  if(tmdbIsLockedOut()) return;
  const entered = tmdbPins().map(i=>i.value).join("");
  if(entered === TMDB_CORRECT_PIN) await tmdbHandleSuccess();
  else tmdbHandleFailure();
}

/* Wiring */
(function wire(){
  // prevent "outside click" handler from eating menu clicks
  el("acctMenu")?.addEventListener("click", (e)=>e.stopPropagation());
  el("acctChip")?.addEventListener("click", async (e)=>{
    e.stopPropagation();
    const user = await sbUser();
    if(!user){ openAuth(); return; }
    if(isMenuOpen()) closeMenu(); else openMenu();
  });

  document.addEventListener("click", ()=>closeMenu());

  el("authCloseBtn")?.addEventListener("click", closeAuth);
  el("authModalBackdrop")?.addEventListener("click", closeAuth);
  el("authLoginBtn")?.addEventListener("click", loginEmail);
  el("authSignupBtn")?.addEventListener("click", signupEmail);

  el("signOutBtn")?.addEventListener("click", signOut);

  el("editNameBtn")?.addEventListener("click", async ()=>{
    const user = await sbUser(); if(!user){ closeMenu(); openAuth(); return; }
    const prof = await getProfile();
    const current = (prof?.display_name || "").trim();
    const nm = prompt("Display name", current || "");
    if(nm && String(nm).trim()){
      await setDisplayName(nm);
      await refreshDock();
    }
  });

  el("tmdbToggle")?.addEventListener("change", async (e)=>{
    const user = await sbUser();
    if(!user){ e.target.checked=false; closeMenu(); openAuth(); return; }
    if(e.target.checked){
      e.target.checked=false;
      tmdbOpenModal();
    }else{
      await setTmdbUnlocked(false);
      await refreshDock();
      try { if(typeof window.applyTmdbSearchVisibility === "function") window.applyTmdbSearchVisibility(); } catch {}
    }
  });

  el("tmdbBackdrop")?.addEventListener("click", tmdbCloseModal);

  const pins = tmdbPins();
  pins.forEach((input, idx)=>{
    input.addEventListener("input", ()=>{
      const v = (input.value || "").replace(/[^0-9]/g,"").charAt(0);
      input.value = v;
      if(v && idx < pins.length - 1) pins[idx+1].focus();
      tmdbCheckPins();
    });
    input.addEventListener("keyup", (ev)=>{
      if(ev.key === "Backspace" && !input.value && idx>0) pins[idx-1].focus();
      tmdbCheckPins();
    });
    input.addEventListener("paste", (ev)=>{
      ev.preventDefault();
      const paste = (ev.clipboardData || window.clipboardData).getData("text").trim().replace(/[^0-9]/g,"").slice(0,4);
      for(let i=0;i<paste.length;i++){ if(pins[i]) pins[i].value = paste[i]; }
      (pins[Math.min(paste.length,3)] || pins[3]).focus();
      tmdbCheckPins();
    });
  });
  el("tmdbUnlockBtn")?.addEventListener("click", tmdbUnlockClick);

  window.addEventListener("keydown",(e)=>{
    if(e.key==="Escape"){ closeAuth(); tmdbCloseModal(); closeMenu(); }
    if(e.key==="Enter" && !el("tmdbUnlockBtn").disabled && el("tmdbModal").style.display==="block"){
      e.preventDefault(); tmdbUnlockClick();
    }
  });
})();

/* Init */
(async function init(){
  const c = sb();
  await refreshDock();

  // render CW from account on load if logged in
  document.addEventListener("DOMContentLoaded", ()=>renderCWFromAccountIfLoggedIn());

  if(c){
    c.auth.onAuthStateChange(async (_event, session)=>{
      if(session?.user){
        await ensureProfile(session.user);
      }
      await refreshDock();
      await renderCWFromAccountIfLoggedIn();
    });

    // If already logged in, ensure profile + render
    const user = await sbUser();
    if(user){
      await ensureProfile(user);
      await renderCWFromAccountIfLoggedIn();
    }
  }
})();
</script>

</body>
</html>
    <div id="view-lang-category" class="visually-hidden view-padded">
        <div class="section-title" id="lang-category-title" style="margin-top: 0;">Recent</div>

        <div style="display:flex; gap:10px; padding: 0 var(--page-pad); margin-bottom: 12px;">
            <button class="filter-tab" id="langcat-recent" onclick="setLanguageCategory('recent')">Recent</button>
            <button class="filter-tab" id="langcat-popular" onclick="setLanguageCategory('popular')">Popular</button>
        </div>

        <div class="grid-layout" id="lang-category-grid"></div>
        <button class="load-more-btn visually-hidden" id="load-more-lang-category" onclick="loadNextLanguageCategoryPage()" aria-label="Load more"><i class="fas fa-arrow-rotate-right" aria-hidden="true"></i></button>
    </div>



